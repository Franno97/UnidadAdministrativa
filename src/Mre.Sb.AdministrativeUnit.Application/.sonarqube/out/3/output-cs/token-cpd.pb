ñ»
}D:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\AdministrativeUnitApplicationAutoMapperProfile.cs
	namespace

 	
Mre


 
.

 
Sb

 
.

  
UnidadAdministrativa

 %
{ 
public 

class :
.AdministrativeUnitApplicationAutoMapperProfile ?
:@ A
ProfileB I
{ 
public :
.AdministrativeUnitApplicationAutoMapperProfile =
(= >
)> ?
{ 	
	CreateMap 
< $
TipoUnidadAdministrativa .
,. /'
UnidadAdministrativaTipoDto0 K
>K L
(L M
)M N
. 
	ForMember 
( 
x 
=>  
x! "
." #
Nombre# )
,) *
map+ .
=>/ 1
map2 5
.5 6
MapFrom6 =
(= >
src> A
=>B D
srcE H
.H I
NombreI O
)O P
)P Q
; 
	CreateMap 
< $
TipoUnidadAdministrativa .
,. /+
UnidadAdministrativaTipoInfoDto0 O
>O P
(P Q
)Q R
. 
	ForMember 
( 
x 
=> 
x  !
.! "
Nombre" (
,( )
map* -
=>. 0
map1 4
.4 5
MapFrom5 <
(< =
src= @
=>A C
srcD G
.G H
NombreH N
)N O
)O P
; 
	CreateMap 
< '
UnidadAdministrativaTipoDto 1
,1 2$
TipoUnidadAdministrativa3 K
>K L
(L M
)M N
. 
	ForMember 
( 
x 
=> 
x  !
.! "
Nombre" (
,( )
map* -
=>. 0
map1 4
.4 5
MapFrom5 <
(< =
src= @
=>A C
srcD G
.G H
NombreH N
)N O
)O P
;P Q
	CreateMap 
< 
Nivel 
, 
NivelDto %
>% &
(& '
)' (
;( )
	CreateMap 
< 
Nivel 
, 
NivelLookupDto +
>+ ,
(, -
)- .
;. /
	CreateMap   
<   
NivelDto   
,   
Nivel    %
>  % &
(  & '
)  ' (
;  ( )
	CreateMap## 
<## 
Moneda## 
,## 
	MonedaDto## '
>##' (
(##( )
)##) *
;##* +
	CreateMap$$ 
<$$ 
Moneda$$ 
,$$ 
MonedaLookupDto$$ -
>$$- .
($$. /
)$$/ 0
;$$0 1
	CreateMap%% 
<%% 
	MonedaDto%% 
,%%  
Moneda%%! '
>%%' (
(%%( )
)%%) *
;%%* +
	CreateMap)) 
<)) 
Banco)) 
,)) 
BancoDto)) %
>))% &
())& '
)))' (
;))( )
	CreateMap** 
<** 
Banco** 
,** 
BancoLookupDto** +
>**+ ,
(**, -
)**- .
;**. /
	CreateMap++ 
<++ 
BancoDto++ 
,++ 
Banco++  %
>++% &
(++& '
)++' (
;++( )
	CreateMap// 
<// 
TipoServicio// "
,//" #
TipoServicioDto//$ 3
>//3 4
(//4 5
)//5 6
;//6 7
	CreateMap00 
<00 
TipoServicio00 "
,00" #!
TipoServicioLookupDto00$ 9
>009 :
(00: ;
)00; <
;00< =
	CreateMap11 
<11 
TipoServicioDto11 %
,11% &
TipoServicio11' 3
>113 4
(114 5
)115 6
;116 7
	CreateMap44 
<44 
TipoPago44 
,44 
TipoPagoDto44  +
>44+ ,
(44, -
)44- .
;44. /
	CreateMap55 
<55 
TipoPagoDto55 !
,55! "
TipoPago55# +
>55+ ,
(55, -
)55- .
;55. /
	CreateMap<< 
<<< 
TipoArancel<< !
,<<! "
TipoArancelDto<<# 1
><<1 2
(<<2 3
)<<3 4
;<<4 5
	CreateMap== 
<== 
TipoArancel== !
,==! " 
TipoArancelLookupDto==# 7
>==7 8
(==8 9
)==9 :
;==: ;
	CreateMap>> 
<>> 
TipoArancelDto>> $
,>>$ %
TipoArancel>>& 1
>>>1 2
(>>2 3
)>>3 4
;>>4 5
	CreateMapBB 
<BB 
CargoBB 
,BB 
CargoDtoBB %
>BB% &
(BB& '
)BB' (
;BB( )
	CreateMapCC 
<CC 
CargoCC 
,CC 
CargoLookupDtoCC +
>CC+ ,
(CC, -
)CC- .
;CC. /
	CreateMapDD 
<DD 
CargoDtoDD 
,DD 
CargoDD  %
>DD% &
(DD& '
)DD' (
;DD( )
	CreateMapFF 
<FF 
RegionFF 
,FF 
	RegionDtoFF '
>FF' (
(FF( )
)FF) *
;FF* +
	CreateMapGG 
<GG 
CountryGG 
,GG 

CountryDtoGG )
>GG) *
(GG* +
)GG+ ,
;GG, -
	CreateMapII 
<II &
CrearActualizarServicioDtoII 0
,II0 1
DominioII2 9
.II9 :
ServicioII: B
>IIB C
(IIC D
)IID E
.JJ 
	ForMemberJJ 
(JJ 
xJJ 
=>JJ 
xJJ  !
.JJ! "
IdJJ" $
,JJ$ %
mapJJ& )
=>JJ* ,
mapJJ- 0
.JJ0 1
IgnoreJJ1 7
(JJ7 8
)JJ8 9
)JJ9 :
.KK 
	ForMemberKK 
(KK 
xKK 
=>KK 
xKK  !
.KK! "
ConcurrencyStampKK" 2
,KK2 3
mapKK4 7
=>KK8 :
mapKK; >
.KK> ?
IgnoreKK? E
(KKE F
)KKF G
)KKG H
.LL 
	ForMemberLL 
(LL 
xLL 
=>LL 
xLL  !
.LL! "
ExtraPropertiesLL" 1
,LL1 2
mapLL3 6
=>LL7 9
mapLL: =
.LL= >
IgnoreLL> D
(LLD E
)LLE F
)LLF G
.MM 
	ForMemberMM 
(MM 
xMM 
=>MM 
xMM  !
.MM! "
TipoServicioMM" .
,MM. /
mapMM0 3
=>MM4 6
mapMM7 :
.MM: ;
IgnoreMM; A
(MMA B
)MMB C
)MMC D
.NN )
IgnoreAuditedObjectPropertiesNN .
(NN. /
)NN/ 0
;NN0 1
	CreateMapUU 
<UU 2
&CrearActualizarUnidadAdministrativaDtoUU <
,UU< =
DominioUU> E
.UUE F 
UnidadAdministrativaUUF Z
>UUZ [
(UU[ \
)UU\ ]
.VV 
	ForMemberVV 
(VV 
xVV 
=>VV 
xVV  !
.VV! "
IdVV" $
,VV$ %
mapVV& )
=>VV* ,
mapVV- 0
.VV0 1
IgnoreVV1 7
(VV7 8
)VV8 9
)VV9 :
.WW 
	ForMemberWW 
(WW 
xWW 
=>WW 
xWW  !
.WW! "
ConcurrencyStampWW" 2
,WW2 3
mapWW4 7
=>WW8 :
mapWW; >
.WW> ?
IgnoreWW? E
(WWE F
)WWF G
)WWG H
.XX 
	ForMemberXX 
(XX 
xXX 
=>XX 
xXX  !
.XX! "
ExtraPropertiesXX" 1
,XX1 2
mapXX3 6
=>XX7 9
mapXX: =
.XX= >
IgnoreXX> D
(XXD E
)XXE F
)XXF G
.YY 
	ForMemberYY 
(YY 
xYY 
=>YY 
xYY  !
.YY! "%
DependenciaAdministrativaYY" ;
,YY; <
mapYY= @
=>YYA C
mapYYD G
.YYG H
IgnoreYYH N
(YYN O
)YYO P
)YYP Q
.ZZ 
	ForMemberZZ 
(ZZ 
xZZ 
=>ZZ 
xZZ  !
.ZZ! "$
TipoUnidadAdministrativaZZ" :
,ZZ: ;
mapZZ< ?
=>ZZ@ B
mapZZC F
.ZZF G
IgnoreZZG M
(ZZM N
)ZZN O
)ZZO P
.[[ 
	ForMember[[ 
([[ 
x[[ 
=>[[ 
x[[  !
.[[! "
Banco[[" '
,[[' (
map[[) ,
=>[[- /
map[[0 3
.[[3 4
Ignore[[4 :
([[: ;
)[[; <
)[[< =
.\\ 
	ForMember\\ 
(\\ 
x\\ 
=>\\ 
x\\  !
.\\! "
TipoCuentaBancaria\\" 4
,\\4 5
map\\6 9
=>\\: <
map\\= @
.\\@ A
Ignore\\A G
(\\G H
)\\H I
)\\I J
.]] 
	ForMember]] 
(]] 
x]] 
=>]] 
x]]  !
.]]! "
Moneda]]" (
,]]( )
map]]* -
=>]]. 0
map]]1 4
.]]4 5
Ignore]]5 ;
(]]; <
)]]< =
)]]= >
.^^ 
	ForMember^^ 
(^^ 
x^^ 
=>^^ 
x^^  !
.^^! "
Nivel^^" '
,^^' (
map^^) ,
=>^^- /
map^^0 3
.^^3 4
Ignore^^4 :
(^^: ;
)^^; <
)^^< =
.__ 
	ForMember__ 
(__ 
x__ 
=>__ 
x__  !
.__! "
JefeMisionId__" .
,__. /
map__0 3
=>__4 6
map__7 :
.__: ;
Ignore__; A
(__A B
)__B C
)__C D
.`` 
	ForMember`` 
(`` 
x`` 
=>`` 
x``  !
.``! "
Signatarios``" -
,``- .
map``/ 2
=>``3 5
map``6 9
.``9 :
Ignore``: @
(``@ A
)``A B
)``B C
.aa 
	ForMemberaa 
(aa 
xaa 
=>aa 
xaa  !
.aa! "
Funcionariosaa" .
,aa. /
mapaa0 3
=>aa4 6
mapaa7 :
.aa: ;
Ignoreaa; A
(aaA B
)aaB C
)aaC D
.bb 
	ForMemberbb 
(bb 
xbb 
=>bb 
xbb  !
.bb! "
	Serviciosbb" +
,bb+ ,
mapbb- 0
=>bb1 3
mapbb4 7
.bb7 8
Ignorebb8 >
(bb> ?
)bb? @
)bb@ A
.cc 
	ForMembercc 
(cc 
xcc 
=>cc 
xcc  !
.cc! "
	IsDeletedcc" +
,cc+ ,
mapcc- 0
=>cc1 3
mapcc4 7
.cc7 8
Ignorecc8 >
(cc> ?
)cc? @
)cc@ A
.dd 
	ForMemberdd 
(dd 
xdd 
=>dd 
xdd  !
.dd! "
	DeleterIddd" +
,dd+ ,
mapdd- 0
=>dd1 3
mapdd4 7
.dd7 8
Ignoredd8 >
(dd> ?
)dd? @
)dd@ A
.ee 
	ForMemberee 
(ee 
xee 
=>ee 
xee  !
.ee! "
DeletionTimeee" .
,ee. /
mapee0 3
=>ee4 6
mapee7 :
.ee: ;
Ignoreee; A
(eeA B
)eeB C
)eeC D
.ff 
	ForMemberff 
(ff 
xff 
=>ff 
xff  !
.ff! "
Jurisdiccionff" .
,ff. /
mapff0 3
=>ff4 6
mapff7 :
.ff: ;
Ignoreff; A
(ffA B
)ffB C
)ffC D
.gg )
IgnoreAuditedObjectPropertiesgg .
(gg. /
)gg/ 0
;gg0 1
	CreateMapii 
<ii (
CrearActualizarVentanillaDtoii 2
,ii2 3
Dominioii4 ;
.ii; <

Ventanillaii< F
>iiF G
(iiG H
)iiH I
.jj 
	ForMemberjj 
(jj 
xjj 
=>jj 
xjj  !
.jj! "
Idjj" $
,jj$ %
mapjj& )
=>jj* ,
mapjj- 0
.jj0 1
Ignorejj1 7
(jj7 8
)jj8 9
)jj9 :
.kk 
	ForMemberkk 
(kk 
xkk 
=>kk 
xkk  !
.kk! "
ConcurrencyStampkk" 2
,kk2 3
mapkk4 7
=>kk8 :
mapkk; >
.kk> ?
Ignorekk? E
(kkE F
)kkF G
)kkG H
.ll 
	ForMemberll 
(ll 
xll 
=>ll 
xll  !
.ll! "
ExtraPropertiesll" 1
,ll1 2
mapll3 6
=>ll7 9
mapll: =
.ll= >
Ignorell> D
(llD E
)llE F
)llF G
.mm )
IgnoreAuditedObjectPropertiesmm .
(mm. /
)mm/ 0
;mm0 1
	CreateMapoo 
<oo -
!CrearActualizarSecuencialLibroDtooo 7
,oo7 8
SecuencialLibrooo9 H
>ooH I
(ooI J
)ooJ K
.pp 
	ForMemberpp 
(pp 
xpp 
=>pp 
xpp  !
.pp! "
Idpp" $
,pp$ %
mappp& )
=>pp* ,
mappp- 0
.pp0 1
Ignorepp1 7
(pp7 8
)pp8 9
)pp9 :
.qq 
	ForMemberqq 
(qq 
xqq 
=>qq 
xqq  !
.qq! "
Libroqq" '
,qq' (
mapqq) ,
=>qq- /
mapqq0 3
.qq3 4
Ignoreqq4 :
(qq: ;
)qq; <
)qq< =
.rr 
	ForMemberrr 
(rr 
xrr 
=>rr 
xrr  !
.rr! "
ConcurrencyStamprr" 2
,rr2 3
maprr4 7
=>rr8 :
maprr; >
.rr> ?
Ignorerr? E
(rrE F
)rrF G
)rrG H
.ss 
	ForMemberss 
(ss 
xss 
=>ss 
xss  !
.ss! "
ExtraPropertiesss" 1
,ss1 2
mapss3 6
=>ss7 9
mapss: =
.ss= >
Ignoress> D
(ssD E
)ssE F
)ssF G
.tt )
IgnoreAuditedObjectPropertiestt .
(tt. /
)tt/ 0
;tt0 1
	CreateMapww 
<ww 
Libroww 
,ww 
LibroDtoww %
>ww% &
(ww& '
)ww' (
;ww( )
	CreateMapxx 
<xx 
Libroxx 
,xx 
LibroLookupDtoxx +
>xx+ ,
(xx, -
)xx- .
;xx. /
	CreateMapyy 
<yy 
LibroDtoyy 
,yy 
Libroyy  %
>yy% &
(yy& '
)yy' (
;yy( )
	CreateMap{{ 
<{{ 
Arancel{{ 
,{{ 

ArancelDto{{ )
>{{) *
({{* +
){{+ ,
;{{, -
	CreateMap|| 
<|| 
Arancel|| 
,|| 
ArancelLookupDto|| /
>||/ 0
(||0 1
)||1 2
;||2 3
	CreateMap}} 
<}} %
CrearActualizarArancelDto}} /
,}}/ 0
Arancel}}1 8
>}}8 9
(}}9 :
)}}: ;
.~~ 
	ForMember~~ 
(~~ 
x~~ 
=>~~ 
x~~ 
.~~ 
Id~~  
,~~  !
map~~" %
=>~~& (
map~~) ,
.~~, -
Ignore~~- 3
(~~3 4
)~~4 5
)~~5 6
. 
	ForMember 
( 
x 
=> 
x 
. 
Moneda $
,$ %
map& )
=>* ,
map- 0
.0 1
Ignore1 7
(7 8
)8 9
)9 :
.
ÄÄ 
	ForMember
ÄÄ 
(
ÄÄ 
x
ÄÄ 
=>
ÄÄ 
x
ÄÄ 
.
ÄÄ 

Jerarquias
ÄÄ (
,
ÄÄ( )
map
ÄÄ* -
=>
ÄÄ. 0
map
ÄÄ1 4
.
ÄÄ4 5
Ignore
ÄÄ5 ;
(
ÄÄ; <
)
ÄÄ< =
)
ÄÄ= >
.
ÅÅ 
	ForMember
ÅÅ 
(
ÅÅ 
x
ÅÅ 
=>
ÅÅ 
x
ÅÅ 
.
ÅÅ 
ConcurrencyStamp
ÅÅ .
,
ÅÅ. /
map
ÅÅ0 3
=>
ÅÅ4 6
map
ÅÅ7 :
.
ÅÅ: ;
Ignore
ÅÅ; A
(
ÅÅA B
)
ÅÅB C
)
ÅÅC D
.
ÇÇ 
	ForMember
ÇÇ 
(
ÇÇ 
x
ÇÇ 
=>
ÇÇ 
x
ÇÇ 
.
ÇÇ 
ExtraProperties
ÇÇ -
,
ÇÇ- .
map
ÇÇ/ 2
=>
ÇÇ3 5
map
ÇÇ6 9
.
ÇÇ9 :
Ignore
ÇÇ: @
(
ÇÇ@ A
)
ÇÇA B
)
ÇÇB C
.
ÉÉ +
IgnoreAuditedObjectProperties
ÉÉ *
(
ÉÉ* +
)
ÉÉ+ ,
;
ÉÉ, -
	CreateMap
ÖÖ 
<
ÖÖ "
JerarquiaArancelaria
ÖÖ *
,
ÖÖ* +%
JerarquiaArancelariaDto
ÖÖ, C
>
ÖÖC D
(
ÖÖD E
)
ÖÖE F
;
ÖÖF G
	CreateMap
ÜÜ 
<
ÜÜ "
JerarquiaArancelaria
ÜÜ *
,
ÜÜ* ++
JerarquiaArancelariaLookupDto
ÜÜ, I
>
ÜÜI J
(
ÜÜJ K
)
ÜÜK L
;
ÜÜL M
	CreateMap
áá 
<
áá 4
&CrearActualizarJerarquiaArancelariaDto
áá <
,
áá< ="
JerarquiaArancelaria
áá> R
>
ááR S
(
ááS T
)
ááT U
.
àà 
	ForMember
àà 
(
àà 
x
àà 
=>
àà 
x
àà 
.
àà 
Id
àà  
,
àà  !
map
àà" %
=>
àà& (
map
àà) ,
.
àà, -
Ignore
àà- 3
(
àà3 4
)
àà4 5
)
àà5 6
.
ââ 
	ForMember
ââ 
(
ââ 
x
ââ 
=>
ââ 
x
ââ 
.
ââ 
TipoArancel
ââ )
,
ââ) *
map
ââ+ .
=>
ââ/ 1
map
ââ2 5
.
ââ5 6
Ignore
ââ6 <
(
ââ< =
)
ââ= >
)
ââ> ?
.
ää 
	ForMember
ää 
(
ää 
x
ää 
=>
ää 
x
ää 
.
ää 
Partidas
ää &
,
ää& '
map
ää( +
=>
ää, .
map
ää/ 2
.
ää2 3
Ignore
ää3 9
(
ää9 :
)
ää: ;
)
ää; <
.
ãã 
	ForMember
ãã 
(
ãã 
x
ãã 
=>
ãã 
x
ãã 
.
ãã 
ConcurrencyStamp
ãã .
,
ãã. /
map
ãã0 3
=>
ãã4 6
map
ãã7 :
.
ãã: ;
Ignore
ãã; A
(
ããA B
)
ããB C
)
ããC D
.
åå 
	ForMember
åå 
(
åå 
x
åå 
=>
åå 
x
åå 
.
åå 
ExtraProperties
åå -
,
åå- .
map
åå/ 2
=>
åå3 5
map
åå6 9
.
åå9 :
Ignore
åå: @
(
åå@ A
)
ååA B
)
ååB C
.
çç +
IgnoreAuditedObjectProperties
çç *
(
çç* +
)
çç+ ,
;
çç, -
	CreateMap
èè 
<
èè  
PartidaArancelaria
èè (
,
èè( )#
PartidaArancelariaDto
èè* ?
>
èè? @
(
èè@ A
)
èèA B
;
èèB C
	CreateMap
êê 
<
êê  
PartidaArancelaria
êê (
,
êê( ))
PartidaArancelariaLookupDto
êê* E
>
êêE F
(
êêF G
)
êêG H
;
êêH I
	CreateMap
ëë 
<
ëë 2
$CrearActualizarPartidaArancelariaDto
ëë :
,
ëë: ; 
PartidaArancelaria
ëë< N
>
ëëN O
(
ëëO P
)
ëëP Q
.
íí 
	ForMember
íí 
(
íí 
x
íí 
=>
íí 
x
íí 
.
íí 
Id
íí  
,
íí  !
map
íí" %
=>
íí& (
map
íí) ,
.
íí, -
Ignore
íí- 3
(
íí3 4
)
íí4 5
)
íí5 6
.
ìì 
	ForMember
ìì 
(
ìì 
x
ìì 
=>
ìì 
x
ìì 
.
ìì 
ConcurrencyStamp
ìì .
,
ìì. /
map
ìì0 3
=>
ìì4 6
map
ìì7 :
.
ìì: ;
Ignore
ìì; A
(
ììA B
)
ììB C
)
ììC D
.
îî 
	ForMember
îî 
(
îî 
x
îî 
=>
îî 
x
îî 
.
îî 
ExtraProperties
îî -
,
îî- .
map
îî/ 2
=>
îî3 5
map
îî6 9
.
îî9 :
Ignore
îî: @
(
îî@ A
)
îîA B
)
îîB C
.
ïï 
	ForMember
ïï 
(
ïï 
x
ïï 
=>
ïï 
x
ïï 
.
ïï 
	Servicios
ïï '
,
ïï' (
map
ïï) ,
=>
ïï- /
map
ïï0 3
.
ïï3 4
Ignore
ïï4 :
(
ïï: ;
)
ïï; <
)
ïï< =
.
ññ +
IgnoreAuditedObjectProperties
ññ *
(
ññ* +
)
ññ+ ,
;
ññ, -
	CreateMap
òò 
<
òò 
Convenio
òò 
,
òò 
ConvenioDto
òò  +
>
òò+ ,
(
òò, -
)
òò- .
;
òò. /
	CreateMap
ôô 
<
ôô 
Convenio
ôô 
,
ôô 
ConvenioLookupDto
ôô  1
>
ôô1 2
(
ôô2 3
)
ôô3 4
;
ôô4 5
	CreateMap
öö 
<
öö (
CrearActualizarConvenioDto
öö 0
,
öö0 1
Convenio
öö2 :
>
öö: ;
(
öö; <
)
öö< =
.
õõ 
	ForMember
õõ 
(
õõ 
x
õõ 
=>
õõ 
x
õõ 
.
õõ 
Id
õõ  
,
õõ  !
map
õõ" %
=>
õõ& (
map
õõ) ,
.
õõ, -
Ignore
õõ- 3
(
õõ3 4
)
õõ4 5
)
õõ5 6
.
úú 
	ForMember
úú 
(
úú 
x
úú 
=>
úú 
x
úú 
.
úú 
Exoneraciones
úú +
,
úú+ ,
map
úú- 0
=>
úú1 3
map
úú4 7
.
úú7 8
Ignore
úú8 >
(
úú> ?
)
úú? @
)
úú@ A
.
ùù 
	ForMember
ùù 
(
ùù 
x
ùù 
=>
ùù 
x
ùù 
.
ùù 
ConcurrencyStamp
ùù .
,
ùù. /
map
ùù0 3
=>
ùù4 6
map
ùù7 :
.
ùù: ;
Ignore
ùù; A
(
ùùA B
)
ùùB C
)
ùùC D
.
ûû 
	ForMember
ûû 
(
ûû 
x
ûû 
=>
ûû 
x
ûû 
.
ûû 
ExtraProperties
ûû -
,
ûû- .
map
ûû/ 2
=>
ûû3 5
map
ûû6 9
.
ûû9 :
Ignore
ûû: @
(
ûû@ A
)
ûûA B
)
ûûB C
.
üü +
IgnoreAuditedObjectProperties
üü *
(
üü* +
)
üü+ ,
;
üü, -
	CreateMap
°° 
<
°° 
TipoExoneracion
°° %
,
°°% & 
TipoExoneracionDto
°°' 9
>
°°9 :
(
°°: ;
)
°°; <
;
°°< =
	CreateMap
¢¢ 
<
¢¢ 
TipoExoneracion
¢¢ %
,
¢¢% &&
TipoExoneracionLookupDto
¢¢' ?
>
¢¢? @
(
¢¢@ A
)
¢¢A B
;
¢¢B C
	CreateMap
££ 
<
££  
TipoExoneracionDto
££ (
,
££( )
TipoExoneracion
££* 9
>
££9 :
(
££: ;
)
££; <
;
££< =
	CreateMap
•• 
<
••  
EntidadAuspiciante
•• (
,
••( )#
EntidadAuspicianteDto
••* ?
>
••? @
(
••@ A
)
••A B
;
••B C
	CreateMap
¶¶ 
<
¶¶  
EntidadAuspiciante
¶¶ (
,
¶¶( ))
EntidadAuspicianteLookupDto
¶¶* E
>
¶¶E F
(
¶¶F G
)
¶¶G H
;
¶¶H I
	CreateMap
ßß 
<
ßß #
EntidadAuspicianteDto
ßß +
,
ßß+ , 
EntidadAuspiciante
ßß- ?
>
ßß? @
(
ßß@ A
)
ßßA B
;
ßßB C
	CreateMap
™™ 
<
™™ (
ConfiguracionSignatarioDto
™™ 0
,
™™0 1%
ConfiguracionSignatario
™™2 I
>
™™I J
(
™™J K
)
™™K L
.
´´ +
IgnoreAuditedObjectProperties
´´ .
(
´´. /
)
´´/ 0
;
´´0 1
	CreateMap
ÆÆ 
<
ÆÆ  
TipoCuentaBancaria
ÆÆ (
,
ÆÆ( )#
TipoCuentaBancariaDto
ÆÆ* ?
>
ÆÆ? @
(
ÆÆ@ A
)
ÆÆA B
;
ÆÆB C
	CreateMap
ØØ 
<
ØØ #
TipoCuentaBancariaDto
ØØ +
,
ØØ+ , 
TipoCuentaBancaria
ØØ- ?
>
ØØ? @
(
ØØ@ A
)
ØØA B
;
ØØB C
}
≤≤ 	
}
≥≥ 
}¥¥ ˚
rD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\AdministrativeUnitApplicationModule.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
{		 
[

 
	DependsOn

 
(

 
typeof 
( *
AdministrativeUnitDomainModule -
)- .
,. /
typeof 
( 8
,AdministrativeUnitApplicationContractsModule ;
); <
,< =
typeof 
( #
AbpDddApplicationModule &
)& '
,' (
typeof 
( 
AbpAutoMapperModule "
)" #
) 	
]	 

[ 
	DependsOn 
( 
typeof 
( %
AbpFluentValidationModule /
)/ 0
)0 1
]1 2
public 

class /
#AdministrativeUnitApplicationModule 4
:5 6
	AbpModule7 @
{ 
public 
override 
void 
ConfigureServices .
(. /'
ServiceConfigurationContext/ J
contextK R
)R S
{ 	
context 
. 
Services 
. %
AddAutoMapperObjectMapper 6
<6 7/
#AdministrativeUnitApplicationModule7 Z
>Z [
([ \
)\ ]
;] ^
	Configure 
<  
AbpAutoMapperOptions *
>* +
(+ ,
options, 3
=>4 6
{ 
options 
. 
AddMaps 
<  /
#AdministrativeUnitApplicationModule  C
>C D
(D E
validateE M
:M N
trueO S
)S T
;T U
} 
) 
; 
context 
. 
Services 
. 
AddSingleton )
<) *
CountryData* 5
>5 6
(6 7
)7 8
;8 9
} 	
}   
}!! Í
kD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\AdministrativeUnitAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
{ 
public 

abstract 
class (
AdministrativeUnitAppService 6
:7 8
ApplicationService9 K
{ 
	protected (
AdministrativeUnitAppService .
(. /
)/ 0
{		 	 
LocalizationResource

  
=

! "
typeof

# )
(

) *&
AdministrativeUnitResource

* D
)

D E
;

E F
ObjectMapperContext 
=  !
typeof" (
(( )/
#AdministrativeUnitApplicationModule) L
)L M
;M N
} 	
} 
} ˝¬
hD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Arancel\ArancelAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% &
Servicio& .
{ 
public 

class 
ArancelAppService "
:# $
CrudAppService 
< 
Arancel
 
, 

ArancelDto
 
, 
Guid
 
, 
ObtenerArancelInput
 
, %
CrearActualizarArancelDto
 #
># $
,$ %
IArancelAppService 
{ 
private 
readonly 
ArancelManager '
TariffManager( 5
;5 6
private 
readonly 
IStringLocalizer )
<) *&
AdministrativeUnitResource* D
>D E
	localizerF O
;O P
private 
readonly 
IRepository $
<$ % 
JerarquiaArancelaria% 9
>9 :
JerarquiaRepository; N
;N O
public   
ArancelAppService    
(    !
IRepository  ! ,
<  , -
Arancel  - 4
,  4 5
Guid  6 :
>  : ;

repository  < F
,  F G
ArancelManager!! 
tariffManager!! $
,!!$ %
IStringLocalizer"" 
<"" &
AdministrativeUnitResource"" 3
>""3 4
	localizer""5 >
,""> ?
IRepository## 
<##  
JerarquiaArancelaria## (
>##( )
jerarquiaRepository##* =
)##= >
:$$ 
base$$ 
($$ 

repository$$ 
)$$ 
{%% 	
this&& 
.&& 
TariffManager&& 
=&&  
tariffManager&&! .
;&&. /
this'' 
.'' 
	localizer'' 
='' 
	localizer'' &
;''& '
this(( 
.(( 
JerarquiaRepository(( $
=((% &
jerarquiaRepository((' :
;((: ;
}// 	
public11 
override11 
async11 
Task11 "
<11" #

ArancelDto11# -
>11- .
GetAsync11/ 7
(117 8
Guid118 <
id11= ?
)11? @
{22 	
await33 
CheckGetPolicyAsync33 %
(33% &
)33& '
;33' (
var55 
	queryable55 
=55 
await55 !

Repository55" ,
.55, -
GetQueryableAsync55- >
(55> ?
)55? @
;55@ A
	queryable66 
=66 
	queryable66 !
.66! "
Where66" '
(66' (
a66( )
=>66* ,
a66- .
.66. /
Id66/ 1
==662 4
id665 7
)667 8
;668 9
var88 
queryableDto88 
=88 
	queryable88 (
.88( )
Select88) /
(88/ 0
entity880 6
=>887 9
new88: =

ArancelDto88> H
(88H I
)88I J
{99 
Id:: 
=:: 
entity:: 
.:: 
Id:: 
,:: 
Descripcion;; 
=;; 
entity;; #
.;;# $
Descripcion;;$ /
,;;/ 0
MonedaId<< 
=<< 
entity<< !
.<<! "
MonedaId<<" *
,<<* +
Moneda== 
=== 
entity== 
.==  
Moneda==  &
.==& '
Nombre==' -
,==- .
Activo>> 
=>> 
entity>> 
.>>  
Activo>>  &
}?? 
)?? 
;?? 
varAA 
	entityDtoAA 
=AA 
awaitAA !
AsyncExecuterAA" /
.AA/ 0
FirstOrDefaultAsyncAA0 C
(AAC D
queryableDtoAAD P
)AAP Q
;AAQ R
returnCC 
	entityDtoCC 
;CC 
}DD 	
publicFF 
overrideFF 
asyncFF 
TaskFF "
<FF" #
PagedResultDtoFF# 1
<FF1 2

ArancelDtoFF2 <
>FF< =
>FF= >
GetListAsyncFF? K
(FFK L
ObtenerArancelInputFFL _
inputFF` e
)FFe f
{GG 	
awaitII #
CheckGetListPolicyAsyncII )
(II) *
)II* +
;II+ ,
varKK 
	queryableKK 
=KK 
awaitKK !$
CreateFilteredQueryAsyncKK" :
(KK: ;
inputKK; @
)KK@ A
;KKA B
	queryableMM 
=MM 
	queryableMM !
.MM! "
WhereIfMM" )
(MM) *
!NN 
inputNN 
.NN 
FilterNN !
.NN! "
IsNullOrWhiteSpaceNN" 4
(NN4 5
)NN5 6
,NN6 7
uOO 
=>OO 
uOO 
.OO 
DescripcionOO &
.OO& '
ContainsOO' /
(OO/ 0
inputOO0 5
.OO5 6
FilterOO6 <
)OO< =
)PP 
;PP 
varRR 

totalCountRR 
=RR 
awaitRR "
AsyncExecuterRR# 0
.RR0 1

CountAsyncRR1 ;
(RR; <
	queryableRR< E
)RRE F
;RRF G
	queryableTT 
=TT 
ApplySortingTT $
(TT$ %
	queryableTT% .
,TT. /
inputTT0 5
)TT5 6
;TT6 7
	queryableUU 
=UU 
ApplyPagingUU #
(UU# $
	queryableUU$ -
,UU- .
inputUU/ 4
)UU4 5
;UU5 6
varWW 
queryableDtoWW 
=WW 
	queryableWW (
.WW( )
SelectWW) /
(WW/ 0
entityWW0 6
=>WW7 9
newWW: =

ArancelDtoWW> H
(WWH I
)WWI J
{XX 
IdYY 
=YY 
entityYY 
.YY 
IdYY 
,YY 
DescripcionZZ 
=ZZ 
entityZZ $
.ZZ$ %
DescripcionZZ% 0
,ZZ0 1
MonedaId[[ 
=[[ 
entity[[ !
.[[! "
MonedaId[[" *
,[[* +
Moneda\\ 
=\\ 
entity\\ 
.\\  
Moneda\\  &
.\\& '
Nombre\\' -
,\\- .
Activo]] 
=]] 
entity]] 
.]]  
Activo]]  &
,]]& '
}^^ 
)^^ 
;^^ 
var`` 

entityDtos`` 
=`` 
await`` "
AsyncExecuter``# 0
.``0 1
ToListAsync``1 <
(``< =
queryableDto``= I
)``I J
;``J K
returnbb 
newbb 
PagedResultDtobb %
<bb% &

ArancelDtobb& 0
>bb0 1
(bb1 2

totalCountcc 
,cc 

entityDtosdd 
)ee 
;ee 
}ff 	
publichh 
overridehh 
asynchh 
Taskhh "
<hh" #

ArancelDtohh# -
>hh- .
CreateAsynchh/ :
(hh: ;%
CrearActualizarArancelDtohh; T
inputhhU Z
)hhZ [
{ii 	
awaitjj "
CheckCreatePolicyAsyncjj (
(jj( )
)jj) *
;jj* +
varll 
entityll 
=ll 
awaitll 
TariffManagerll ,
.ll, -
CreateAsyncll- 8
(ll8 9
idmm 
:mm 
GuidGeneratormm !
.mm! "
Createmm" (
(mm( )
)mm) *
,mm* +
descriptionnn 
:nn 
inputnn "
.nn" #
Descripcionnn# .
,nn. /

currencyIdoo 
:oo 
inputoo !
.oo! "
MonedaIdoo" *
,oo* +
isActivepp 
:pp 
inputpp 
.pp  
Activopp  &
)qq 
;qq 
TryToSetTenantIdss 
(ss 
entityss #
)ss# $
;ss$ %
awaituu 

Repositoryuu 
.uu 
InsertAsyncuu (
(uu( )
entityuu) /
,uu/ 0
autoSaveuu1 9
:uu9 :
trueuu; ?
)uu? @
;uu@ A
returnww 
awaitww 
GetAsyncww !
(ww! "
entityww" (
.ww( )
Idww) +
)ww+ ,
;ww, -
}xx 	
publiczz 
asynczz 
Taskzz 
<zz 
ListResultDtozz '
<zz' (
ArancelLookupDtozz( 8
>zz8 9
>zz9 :
GetLookupAsynczz; I
(zzI J
)zzJ K
{{{ 	
await|| #
CheckGetListPolicyAsync|| )
(||) *
)||* +
;||+ ,
var~~ 
list~~ 
=~~ 
await~~ 

Repository~~ '
.~~' (
GetListAsync~~( 4
(~~4 5
)~~5 6
;~~6 7
return
ÄÄ 
new
ÄÄ 
ListResultDto
ÄÄ $
<
ÄÄ$ %
ArancelLookupDto
ÄÄ% 5
>
ÄÄ5 6
(
ÄÄ6 7
ObjectMapper
ÅÅ 
.
ÅÅ 
Map
ÅÅ  
<
ÅÅ  !
List
ÅÅ! %
<
ÅÅ% &
Arancel
ÅÅ& -
>
ÅÅ- .
,
ÅÅ. /
List
ÅÅ0 4
<
ÅÅ4 5
ArancelLookupDto
ÅÅ5 E
>
ÅÅE F
>
ÅÅF G
(
ÅÅG H
list
ÅÅH L
)
ÅÅL M
)
ÇÇ 
;
ÇÇ 
}
ÉÉ 	
public
ÖÖ 
async
ÖÖ 
Task
ÖÖ 
ChangeStateAsync
ÖÖ *
(
ÖÖ* +
Guid
ÖÖ+ /
id
ÖÖ0 2
,
ÖÖ2 3
bool
ÖÖ4 8
isActive
ÖÖ9 A
)
ÖÖA B
{
ÜÜ 	
await
áá $
CheckUpdatePolicyAsync
áá (
(
áá( )
)
áá) *
;
áá* +
var
ää 
existing
ää 
=
ää 
false
ää  
;
ää  !
if
åå 
(
åå 
existing
åå 
)
åå 
{
çç 
throw
éé 
new
éé #
UserFriendlyException
éé /
(
éé/ 0
string
éé0 6
.
éé6 7
Format
éé7 =
(
éé= >
	localizer
éé> G
[
ééG H
$str
ééH r
]
éér s
)
éés t
)
éét u
;
ééu v
}
èè 
var
ëë 
entity
ëë 
=
ëë 
await
ëë 
TariffManager
ëë ,
.
ëë, -
ChangeStateAsync
ëë- =
(
ëë= >
id
ëë> @
,
ëë@ A
isActive
ëëB J
)
ëëJ K
;
ëëK L
await
ìì 

Repository
ìì 
.
ìì 
UpdateAsync
ìì (
(
ìì( )
entity
ìì) /
,
ìì/ 0
autoSave
ìì1 9
:
ìì9 :
true
ìì; ?
)
ìì? @
;
ìì@ A
}
îî 	
public
öö 
async
öö 
Task
öö 
<
öö 
PagedResultDto
öö (
<
öö( )%
JerarquiaArancelariaDto
öö) @
>
öö@ A
>
ööA B0
"ObtenerJerarquiasArancelariasAsync
ööC e
(
ööe f
Guid
ööf j
	arancelId
öök t
,
ööt u+
GetJerarquiaArancelariaInputööv í
inputööì ò
)ööò ô
{
õõ 	
await
ùù !
CheckGetPolicyAsync
ùù %
(
ùù% &
)
ùù& '
;
ùù' (
var
üü 
	queryable
üü 
=
üü 
await
üü !

Repository
üü" ,
.
üü, -
GetQueryableAsync
üü- >
(
üü> ?
)
üü? @
;
üü@ A
var
††  
queryableJerarquia
†† "
=
††# $
await
††% *!
JerarquiaRepository
††+ >
.
††> ?
GetQueryableAsync
††? P
(
††P Q
)
††Q R
;
††R S
	queryable
¢¢ 
=
¢¢ 
	queryable
¢¢ !
.
¢¢! "
Where
¢¢" '
(
¢¢' (
p
¢¢( )
=>
¢¢* ,
p
¢¢- .
.
¢¢. /
Id
¢¢/ 1
==
¢¢2 4
	arancelId
¢¢5 >
)
¢¢> ?
;
¢¢? @
var
§§ 
queryableDto
§§ 
=
§§ 
from
§§ #
entity
§§$ *
in
§§+ -
	queryable
§§. 7
join
•• #
	jerarquia
••$ -
in
••. 0 
queryableJerarquia
••1 C
on
••D F
entity
••G M
.
••M N
Id
••N P
equals
••Q W
	jerarquia
••X a
.
••a b
	ArancelId
••b k
select
¶¶ %
new
¶¶& )%
JerarquiaArancelariaDto
¶¶* A
(
¶¶A B
)
¶¶B C
{
ßß  
Id
®®# %
=
®®& '
	jerarquia
®®( 1
.
®®1 2
Id
®®2 4
,
®®4 5
Descripcion
©©# .
=
©©/ 0
	jerarquia
©©1 :
.
©©: ;
Descripcion
©©; F
,
©©F G
NumeroJerarquia
™™# 2
=
™™3 4
	jerarquia
™™5 >
.
™™> ?
NumeroJerarquia
™™? N
,
™™N O
Orden
´´# (
=
´´) *
	jerarquia
´´+ 4
.
´´4 5
Orden
´´5 :
,
´´: ;
TipoArancelId
¨¨# 0
=
¨¨1 2
	jerarquia
¨¨3 <
.
¨¨< =
TipoArancel
¨¨= H
.
¨¨H I
Id
¨¨I K
,
¨¨K L
TipoArancel
≠≠# .
=
≠≠/ 0
	jerarquia
≠≠1 :
.
≠≠: ;
TipoArancel
≠≠; F
.
≠≠F G
Nombre
≠≠G M
,
≠≠M N
	ArancelId
ÆÆ# ,
=
ÆÆ- .
	jerarquia
ÆÆ/ 8
.
ÆÆ8 9
	ArancelId
ÆÆ9 B
}
ØØ  
;
ØØ  !
var
±± 

totalCount
±± 
=
±± 
await
±± "
AsyncExecuter
±±# 0
.
±±0 1

CountAsync
±±1 ;
(
±±; <
queryableDto
±±< H
)
±±H I
;
±±I J
var
≥≥ 

entityDtos
≥≥ 
=
≥≥ 
await
≥≥ "
AsyncExecuter
≥≥# 0
.
≥≥0 1
ToListAsync
≥≥1 <
(
≥≥< =
queryableDto
≥≥= I
)
≥≥I J
;
≥≥J K
return
µµ 
new
µµ 
PagedResultDto
µµ %
<
µµ% &%
JerarquiaArancelariaDto
µµ& =
>
µµ= >
(
µµ> ?

totalCount
∂∂ 
,
∂∂ 

entityDtos
∑∑ 
)
∏∏ 
;
∏∏ 
}
∫∫ 	
public
ºº 
async
ºº 
Task
ºº 
<
ºº %
JerarquiaArancelariaDto
ºº 1
>
ºº1 2.
 ObtenerJerarquiaArancelariaAsync
ºº3 S
(
ººS T
Guid
ººT X
	arancelId
ººY b
,
ººb c
Guid
ººd h
jerarquiaId
ººi t
)
ººt u
{
ΩΩ 	
await
øø !
CheckGetPolicyAsync
øø %
(
øø% &
)
øø& '
;
øø' (
var
¡¡ 
	queryable
¡¡ 
=
¡¡ 
await
¡¡ !

Repository
¡¡" ,
.
¡¡, -
WithDetailsAsync
¡¡- =
(
¡¡= >
p
¡¡> ?
=>
¡¡@ B
p
¡¡C D
.
¡¡D E

Jerarquias
¡¡E O
)
¡¡O P
;
¡¡P Q
	queryable
¬¬ 
=
¬¬ 
	queryable
¬¬ !
.
¬¬! "
Where
¬¬" '
(
¬¬' (
a
¬¬( )
=>
¬¬* ,
a
¬¬- .
.
¬¬. /
Id
¬¬/ 1
==
¬¬2 4
	arancelId
¬¬5 >
)
¬¬> ?
;
¬¬? @
var
√√  
queryableJerarquia
√√ "
=
√√# $
	queryable
√√% .
.
√√. /

SelectMany
√√/ 9
(
√√9 :
entity
√√: @
=>
√√A C
entity
√√D J
.
√√J K

Jerarquias
√√K U
)
√√U V
.
ƒƒ 
Where
ƒƒ 
(
ƒƒ 
j
ƒƒ 
=>
ƒƒ 
j
ƒƒ  !
.
ƒƒ! "
Id
ƒƒ" $
==
ƒƒ% '
jerarquiaId
ƒƒ( 3
)
ƒƒ3 4
;
ƒƒ4 5
var
∆∆ 
jerarquiaDto
∆∆ 
=
∆∆  
queryableJerarquia
∆∆ 1
.
∆∆1 2
Select
∆∆2 8
(
∆∆8 9
entity
∆∆9 ?
=>
∆∆@ B
new
∆∆C F%
JerarquiaArancelariaDto
∆∆G ^
(
∆∆^ _
)
∆∆_ `
{
«« 
Id
»» 
=
»» 
entity
»» 
.
»» 
Id
»» 
,
»» 
	ArancelId
…… 
=
…… 
entity
…… "
.
……" #
	ArancelId
……# ,
,
……, -
Descripcion
   
=
   
entity
   $
.
  $ %
Descripcion
  % 0
,
  0 1
TipoArancelId
ÀÀ 
=
ÀÀ 
entity
ÀÀ  &
.
ÀÀ& '
TipoArancelId
ÀÀ' 4
,
ÀÀ4 5
TipoArancel
ÃÃ 
=
ÃÃ 
entity
ÃÃ $
.
ÃÃ$ %
TipoArancel
ÃÃ% 0
.
ÃÃ0 1
Nombre
ÃÃ1 7
,
ÃÃ7 8
Orden
ÕÕ 
=
ÕÕ 
entity
ÕÕ 
.
ÕÕ 
Orden
ÕÕ $
,
ÕÕ$ %
NumeroJerarquia
ŒŒ 
=
ŒŒ  !
entity
ŒŒ" (
.
ŒŒ( )
NumeroJerarquia
ŒŒ) 8
}
œœ 
)
œœ 
;
œœ 
var
—— 
	resultado
—— 
=
—— 
await
—— !
AsyncExecuter
——" /
.
——/ 0"
SingleOrDefaultAsync
——0 D
(
——D E
jerarquiaDto
——E Q
)
——Q R
;
——R S
return
”” 
	resultado
”” 
;
”” 
}
‘‘ 	
public
◊◊ 
async
◊◊ 
Task
◊◊ 
<
◊◊ %
JerarquiaArancelariaDto
◊◊ 1
>
◊◊1 2.
 AgregarJerarquiaArancelariaAsync
◊◊3 S
(
◊◊S T
Guid
◊◊T X
	arancelId
◊◊Y b
,
◊◊b c5
&CrearActualizarJerarquiaArancelariaDto◊◊d ä
input◊◊ã ê
)◊◊ê ë
{
ÿÿ 	
await
ŸŸ $
CheckUpdatePolicyAsync
ŸŸ (
(
ŸŸ( )
)
ŸŸ) *
;
ŸŸ* +
var
€€ 
	jerarquia
€€ 
=
€€ 
await
€€ !
TariffManager
€€" /
.
€€/ 0,
CrearJerarquiaArancelariaAsync
€€0 N
(
€€N O
id
‹‹ 
:
‹‹ 
GuidGenerator
‹‹ !
.
‹‹! "
Create
‹‹" (
(
‹‹( )
)
‹‹) *
,
‹‹* +
	arancelId
›› 
:
›› 
	arancelId
›› $
,
››$ %
tipoArancelId
ﬁﬁ 
:
ﬁﬁ 
input
ﬁﬁ $
.
ﬁﬁ$ %
TipoArancelId
ﬁﬁ% 2
,
ﬁﬁ2 3
descripcion
ﬂﬂ 
:
ﬂﬂ 
input
ﬂﬂ "
.
ﬂﬂ" #
Descripcion
ﬂﬂ# .
,
ﬂﬂ. /
orden
‡‡ 
:
‡‡ 
input
‡‡ 
.
‡‡ 
Orden
‡‡ "
,
‡‡" #
numeroJerarquia
·· 
:
··  
input
··! &
.
··& '
NumeroJerarquia
··' 6
)
··6 7
;
··7 8
var
„„ 
arancel
„„ 
=
„„ 
await
„„ 
TariffManager
„„  -
.
„„- ..
 AgregarJerarquiaArancelariaAsync
„„. N
(
„„N O
	jerarquia
„„O X
)
„„X Y
;
„„Y Z
await
ÂÂ 

Repository
ÂÂ 
.
ÂÂ 
UpdateAsync
ÂÂ (
(
ÂÂ( )
arancel
ÂÂ) 0
,
ÂÂ0 1
autoSave
ÂÂ2 :
:
ÂÂ: ;
true
ÂÂ< @
)
ÂÂ@ A
;
ÂÂA B
return
ÁÁ 
await
ÁÁ .
 ObtenerJerarquiaArancelariaAsync
ÁÁ 9
(
ÁÁ9 :
	arancelId
ÁÁ: C
,
ÁÁC D
	jerarquia
ÁÁE N
.
ÁÁN O
Id
ÁÁO Q
)
ÁÁQ R
;
ÁÁR S
}
ËË 	
public
ÎÎ 
async
ÎÎ 
Task
ÎÎ 
<
ÎÎ %
JerarquiaArancelariaDto
ÎÎ 1
>
ÎÎ1 21
#ActualizarJerarquiaArancelariaAsync
ÎÎ3 V
(
ÎÎV W
Guid
ÎÎW [
	arancelId
ÎÎ\ e
,
ÎÎe f
Guid
ÎÎg k
jerarquiaId
ÎÎl w
,
ÎÎw x5
&CrearActualizarJerarquiaArancelariaDtoÎÎy ü
inputÎÎ† •
)ÎÎ• ¶
{
ÏÏ 	
await
ÓÓ $
CheckUpdatePolicyAsync
ÓÓ (
(
ÓÓ( )
)
ÓÓ) *
;
ÓÓ* +
var
 
	queryable
 
=
 
await
 !

Repository
" ,
.
ÒÒ 
WithDetailsAsync
ÒÒ )
(
ÒÒ) *
p
ÒÒ* +
=>
ÒÒ, .
p
ÒÒ/ 0
.
ÒÒ0 1

Jerarquias
ÒÒ1 ;
)
ÒÒ; <
;
ÒÒ< =
	queryable
ÛÛ 
=
ÛÛ 
	queryable
ÛÛ !
.
ÛÛ! "
Where
ÛÛ" '
(
ÛÛ' (
p
ÛÛ( )
=>
ÛÛ* ,
p
ÛÛ- .
.
ÛÛ. /
Id
ÛÛ/ 1
==
ÛÛ2 4
	arancelId
ÛÛ5 >
)
ÛÛ> ?
;
ÛÛ? @
var
ıı 
arancel
ıı 
=
ıı 
await
ıı 
AsyncExecuter
ıı  -
.
ıı- ."
SingleOrDefaultAsync
ıı. B
(
ııB C
	queryable
ııC L
)
ııL M
;
ııM N
if
ˆˆ 
(
ˆˆ 
arancel
ˆˆ 
==
ˆˆ 
null
ˆˆ 
)
ˆˆ  
{
˜˜ 
throw
¯¯ 
new
¯¯ %
EntityNotFoundException
¯¯ 1
(
¯¯1 2
typeof
¯¯2 8
(
¯¯8 9
Mre
¯¯9 <
.
¯¯< =
Sb
¯¯= ?
.
¯¯? @"
UnidadAdministrativa
¯¯@ T
.
¯¯T U
Dominio
¯¯U \
.
¯¯\ ]
Arancel
¯¯] d
)
¯¯d e
,
¯¯e f
	arancelId
¯¯g p
)
¯¯p q
;
¯¯q r
}
˘˘ 
var
˚˚ 
	jerarquia
˚˚ 
=
˚˚ 
arancel
˚˚ #
.
˚˚# $

Jerarquias
˚˚$ .
.
˚˚. /
SingleOrDefault
˚˚/ >
(
˚˚> ?
p
˚˚? @
=>
˚˚A C
p
˚˚D E
.
˚˚E F
Id
˚˚F H
==
˚˚I K
jerarquiaId
˚˚L W
)
˚˚W X
;
˚˚X Y
if
¸¸ 
(
¸¸ 
	jerarquia
¸¸ 
==
¸¸ 
null
¸¸ !
)
¸¸! "
{
˝˝ 
throw
˛˛ 
new
˛˛ %
EntityNotFoundException
˛˛ 1
(
˛˛1 2
typeof
˛˛2 8
(
˛˛8 9
Mre
˛˛9 <
.
˛˛< =
Sb
˛˛= ?
.
˛˛? @"
UnidadAdministrativa
˛˛@ T
.
˛˛T U
Dominio
˛˛U \
.
˛˛\ ]"
JerarquiaArancelaria
˛˛] q
)
˛˛q r
,
˛˛r s
jerarquiaId
˛˛t 
)˛˛ Ä
;˛˛Ä Å
}
ˇˇ 
	jerarquia
ÅÅ 
.
ÅÅ 
TipoArancelId
ÅÅ #
=
ÅÅ$ %
input
ÅÅ& +
.
ÅÅ+ ,
TipoArancelId
ÅÅ, 9
;
ÅÅ9 :
	jerarquia
ÇÇ 
.
ÇÇ 
Descripcion
ÇÇ !
=
ÇÇ" #
input
ÇÇ$ )
.
ÇÇ) *
Descripcion
ÇÇ* 5
;
ÇÇ5 6
	jerarquia
ÉÉ 
.
ÉÉ 
Orden
ÉÉ 
=
ÉÉ 
input
ÉÉ #
.
ÉÉ# $
Orden
ÉÉ$ )
;
ÉÉ) *
	jerarquia
ÑÑ 
.
ÑÑ 
NumeroJerarquia
ÑÑ %
=
ÑÑ& '
input
ÑÑ( -
.
ÑÑ- .
NumeroJerarquia
ÑÑ. =
;
ÑÑ= >
await
ÜÜ 

Repository
ÜÜ 
.
ÜÜ 
UpdateAsync
ÜÜ (
(
ÜÜ( )
arancel
ÜÜ) 0
,
ÜÜ0 1
autoSave
ÜÜ2 :
:
ÜÜ: ;
true
ÜÜ< @
)
ÜÜ@ A
;
ÜÜA B
return
ââ 
await
ââ .
 ObtenerJerarquiaArancelariaAsync
ââ 9
(
ââ9 :
	arancelId
ââ: C
,
ââC D
jerarquiaId
ââE P
)
ââP Q
;
ââQ R
}
ãã 	
public
çç 
async
çç 
Task
çç -
QuitarJerarquiaArancelariaAsync
çç 9
(
çç9 :
Guid
çç: >
	arancelId
çç? H
,
ççH I
Guid
ççJ N
jerarquiaId
ççO Z
)
ççZ [
{
éé 	
await
èè $
CheckUpdatePolicyAsync
èè (
(
èè( )
)
èè) *
;
èè* +
var
ëë 
arancel
ëë 
=
ëë 
await
ëë 
TariffManager
ëë  -
.
ëë- .-
QuitarJerarquiaArancelariaAsync
ëë. M
(
ëëM N
	arancelId
ëëN W
,
ëëW X
jerarquiaId
ëëY d
)
ëëd e
;
ëëe f
await
ìì 

Repository
ìì 
.
ìì 
UpdateAsync
ìì (
(
ìì( )
arancel
ìì) 0
,
ìì0 1
autoSave
ìì2 :
:
ìì: ;
true
ìì< @
)
ìì@ A
;
ììA B
await
ïï 
CurrentUnitOfWork
ïï #
.
ïï# $
SaveChangesAsync
ïï$ 4
(
ïï4 5
)
ïï5 6
;
ïï6 7
}
ññ 	
}
öö 
}úú êy
uD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Arancel\JerarquiaArancelariaAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% &
Servicio& .
{ 
public 

class *
JerarquiaArancelariaAppService /
:0 1
CrudAppService 
<  
JerarquiaArancelaria
 
, #
JerarquiaArancelariaDto
 !
,! "
Guid
 
, (
GetJerarquiaArancelariaInput
 &
,& '2
&CrearActualizarJerarquiaArancelariaDto
 0
>0 1
,1 2+
IJerarquiaArancelariaAppService %
{ 
private 
readonly 
IRepository $
<$ %
PartidaArancelaria% 7
>7 8
PartidaRepository9 J
;J K
private 
readonly '
JerarquiaArancelariaManager 4'
JerarquiaArancelariaManager5 P
;P Q
public *
JerarquiaArancelariaAppService -
(- .
IRepository 
<  
JerarquiaArancelaria ,
,, -
Guid. 2
>2 3

repository4 >
,> ?
IRepository 
< 
PartidaArancelaria *
>* +
partidaRepository, =
,= >'
JerarquiaArancelariaManager ''
jerarquiaArancelariaManager( C
)C D
: 
base 
( 

repository 
) 
{ 	
this   
.   
PartidaRepository   "
=  # $
partidaRepository  % 6
;  6 7
this!! 
.!! '
JerarquiaArancelariaManager!! ,
=!!- .'
jerarquiaArancelariaManager!!/ J
;!!J K
}(( 	
public** 
async** 
Task** 
<** 
ListResultDto** '
<**' ()
JerarquiaArancelariaLookupDto**( E
>**E F
>**F G
GetLookupAsync**H V
(**V W
)**W X
{++ 	
await,, #
CheckGetListPolicyAsync,, )
(,,) *
),,* +
;,,+ ,
var.. 
list.. 
=.. 
await.. 

Repository.. '
...' (
GetListAsync..( 4
(..4 5
)..5 6
;..6 7
return00 
new00 
ListResultDto00 $
<00$ %)
JerarquiaArancelariaLookupDto00% B
>00B C
(00C D
ObjectMapper11 
.11 
Map11  
<11  !
List11! %
<11% & 
JerarquiaArancelaria11& :
>11: ;
,11; <
List11= A
<11A B)
JerarquiaArancelariaLookupDto11B _
>11_ `
>11` a
(11a b
list11b f
)11f g
)22 
;22 
}33 	
public99 
async99 
Task99 
<99 !
PartidaArancelariaDto99 /
>99/ 0-
!ActualizarPartidaArancelariaAsync991 R
(99R S
Guid99S W"
jerarquiaArancelariaId99X n
,99n o
Guid99p t!
partidaArancelariaId	99u â
,
99â ä2
$CrearActualizarPartidaArancelariaDto
99ã Ø
input
99∞ µ
)
99µ ∂
{:: 	
await;; "
CheckUpdatePolicyAsync;; (
(;;( )
);;) *
;;;* +
var== 
	queryable== 
=== 
await== !

Repository==" ,
.>> 
WithDetailsAsync>> )
(>>) *
p>>* +
=>>>, .
p>>/ 0
.>>0 1
Partidas>>1 9
)>>9 :
;>>: ;
	queryable@@ 
=@@ 
	queryable@@ !
.@@! "
Where@@" '
(@@' (
p@@( )
=>@@* ,
p@@- .
.@@. /
Id@@/ 1
==@@2 4"
jerarquiaArancelariaId@@5 K
)@@K L
;@@L M
varBB 
	jerarquiaBB 
=BB 
awaitBB !
AsyncExecuterBB" /
.BB/ 0 
SingleOrDefaultAsyncBB0 D
(BBD E
	queryableBBE N
)BBN O
;BBO P
ifCC 
(CC 
	jerarquiaCC 
==CC 
nullCC !
)CC! "
{DD 
throwEE 
newEE #
EntityNotFoundExceptionEE 1
(EE1 2
typeofEE2 8
(EE8 9
MreEE9 <
.EE< =
SbEE= ?
.EE? @ 
UnidadAdministrativaEE@ T
.EET U
DominioEEU \
.EE\ ] 
JerarquiaArancelariaEE] q
)EEq r
,EEr s#
jerarquiaArancelariaId	EEt ä
)
EEä ã
;
EEã å
}FF 
varHH 
partidaHH 
=HH 
	jerarquiaHH #
.HH# $
PartidasHH$ ,
.HH, -
SingleOrDefaultHH- <
(HH< =
pHH= >
=>HH? A
pHHB C
.HHC D
IdHHD F
==HHG I 
partidaArancelariaIdHHJ ^
)HH^ _
;HH_ `
ifII 
(II 
partidaII 
==II 
nullII 
)II  
{JJ 
throwKK 
newKK #
EntityNotFoundExceptionKK 1
(KK1 2
typeofKK2 8
(KK8 9
MreKK9 <
.KK< =
SbKK= ?
.KK? @ 
UnidadAdministrativaKK@ T
.KKT U
DominioKKU \
.KK\ ]
PartidaArancelariaKK] o
)KKo p
,KKp q!
partidaArancelariaId	KKr Ü
)
KKÜ á
;
KKá à
}LL 
partidaOO 
.OO 
DescripcionOO 
=OO  !
inputOO" '
.OO' (
DescripcionOO( 3
;OO3 4
partidaPP 
.PP 
NumeroPartidaPP !
=PP" #
inputPP$ )
.PP) *
NumeroPartidaPP* 7
;PP7 8
partidaQQ 
.QQ 
ValorQQ 
=QQ 
inputQQ !
.QQ! "
ValorQQ" '
;QQ' (
awaitSS 

RepositorySS 
.SS 
UpdateAsyncSS (
(SS( )
	jerarquiaSS) 2
,SS2 3
autoSaveSS4 <
:SS< =
trueSS> B
)SSB C
;SSC D
returnVV 
awaitVV *
ObtenerPartidaArancelariaAsyncVV 7
(VV7 8"
jerarquiaArancelariaIdVV8 N
,VVN O 
partidaArancelariaIdVVP d
)VVd e
;VVe f
}WW 	
publicYY 
asyncYY 
TaskYY 
<YY !
PartidaArancelariaDtoYY /
>YY/ 0*
AgregarPartidaArancelariaAsyncYY1 O
(YYO P
GuidYYP T"
jerarquiaArancelariaIdYYU k
,YYk l1
$CrearActualizarPartidaArancelariaDto	YYm ë
input
YYí ó
)
YYó ò
{ZZ 	
await[[ "
CheckUpdatePolicyAsync[[ (
([[( )
)[[) *
;[[* +
var]] 
partida]] 
=]] 
await]] '
JerarquiaArancelariaManager]]  ;
.]]; <(
CrearPartidaArancelariaAsync]]< X
(]]X Y
id^^ 
:^^ 
GuidGenerator^^ !
.^^! "
Create^^" (
(^^( )
)^^) *
,^^* +"
jerarquiaArancelariaId__ &
:__& '"
jerarquiaArancelariaId__( >
,__> ?
descripcion`` 
:`` 
input`` "
.``" #
Descripcion``# .
,``. /
numeroPartidaaa 
:aa 
inputaa $
.aa$ %
NumeroPartidaaa% 2
,aa2 3
valorbb 
:bb 
inputbb 
.bb 
Valorbb "
)bb" #
;bb# $
vardd 
	jerarquiadd 
=dd 
awaitdd !'
JerarquiaArancelariaManagerdd" =
.dd= >*
AgregarPartidaArancelariaAsyncdd> \
(dd\ ]
partidadd] d
)ddd e
;dde f
awaitff 

Repositoryff 
.ff 
UpdateAsyncff (
(ff( )
	jerarquiaff) 2
,ff2 3
autoSaveff4 <
:ff< =
trueff> B
)ffB C
;ffC D
returnhh 
awaithh *
ObtenerPartidaArancelariaAsynchh 7
(hh7 8"
jerarquiaArancelariaIdhh8 N
,hhN O
partidahhP W
.hhW X
IdhhX Z
)hhZ [
;hh[ \
}ii 	
publickk 
asynckk 
Taskkk 
<kk !
PartidaArancelariaDtokk /
>kk/ 0*
ObtenerPartidaArancelariaAsynckk1 O
(kkO P
GuidkkP T"
jerarquiaArancelariaIdkkU k
,kkk l
Guidkkm q!
partidaArancelariaId	kkr Ü
)
kkÜ á
{ll 	
awaitmm 
CheckGetPolicyAsyncmm %
(mm% &
)mm& '
;mm' (
varoo 
	queryableoo 
=oo 
awaitoo !

Repositoryoo" ,
.oo, -
WithDetailsAsyncoo- =
(oo= >
poo> ?
=>oo@ B
pooC D
.ooD E
PartidasooE M
)ooM N
;ooN O
	queryablepp 
=pp 
	queryablepp !
.pp! "
Wherepp" '
(pp' (
app( )
=>pp* ,
app- .
.pp. /
Idpp/ 1
==pp2 4"
jerarquiaArancelariaIdpp5 K
)ppK L
;ppL M
varqq 
queryablePartidaqq  
=qq! "
	queryableqq# ,
.qq, -

SelectManyqq- 7
(qq7 8
entityqq8 >
=>qq? A
entityqqB H
.qqH I
PartidasqqI Q
)qqQ R
.rr 
Whererr 
(rr 
jrr 
=>rr 
jrr  !
.rr! "
Idrr" $
==rr% ' 
partidaArancelariaIdrr( <
)rr< =
;rr= >
vartt 

partidaDtott 
=tt 
queryablePartidatt -
.tt- .
Selecttt. 4
(tt4 5
entitytt5 ;
=>tt< >
newtt? B!
PartidaArancelariaDtottC X
(ttX Y
)ttY Z
{uu 
Idvv 
=vv 
entityvv 
.vv 
Idvv 
,vv 
Descripcionww 
=ww 
entityww $
.ww$ %
Descripcionww% 0
,ww0 1
NumeroPartidaxx 
=xx 
entityxx  &
.xx& '
NumeroPartidaxx' 4
,xx4 5
Valoryy 
=yy 
entityyy 
.yy 
Valoryy $
,yy$ %"
JerarquiaArancelariaIdzz &
=zz' (
entityzz) /
.zz/ 0"
JerarquiaArancelariaIdzz0 F
}{{ 
){{ 
;{{ 
var}} 
	resultado}} 
=}} 
await}} !
AsyncExecuter}}" /
.}}/ 0 
SingleOrDefaultAsync}}0 D
(}}D E

partidaDto}}E O
)}}O P
;}}P Q
return 
	resultado 
; 
}
ÄÄ 	
public
ÇÇ 
async
ÇÇ 
Task
ÇÇ 
<
ÇÇ 
PagedResultDto
ÇÇ (
<
ÇÇ( )#
PartidaArancelariaDto
ÇÇ) >
>
ÇÇ> ?
>
ÇÇ? @.
 ObtenerPartidasArancelariasAsync
ÇÇA a
(
ÇÇa b
Guid
ÇÇb f$
jerarquiaArancelariaId
ÇÇg }
,
ÇÇ} ~)
GetPartidaArancelariaInputÇÇ ô
inputÇÇö ü
)ÇÇü †
{
ÉÉ 	
await
ÑÑ !
CheckGetPolicyAsync
ÑÑ %
(
ÑÑ% &
)
ÑÑ& '
;
ÑÑ' (
var
ÜÜ 
	queryable
ÜÜ 
=
ÜÜ 
await
ÜÜ !

Repository
ÜÜ" ,
.
ÜÜ, -
GetQueryableAsync
ÜÜ- >
(
ÜÜ> ?
)
ÜÜ? @
;
ÜÜ@ A
var
áá 
queryablePartida
áá  
=
áá! "
await
áá# (
PartidaRepository
áá) :
.
áá: ;
GetQueryableAsync
áá; L
(
ááL M
)
ááM N
;
ááN O
	queryable
ââ 
=
ââ 
	queryable
ââ !
.
ââ! "
Where
ââ" '
(
ââ' (
p
ââ( )
=>
ââ* ,
p
ââ- .
.
ââ. /
Id
ââ/ 1
==
ââ2 4$
jerarquiaArancelariaId
ââ5 K
)
ââK L
;
ââL M
var
ãã 
queryableDto
ãã 
=
ãã 
from
ãã #
entity
ãã$ *
in
ãã+ -
	queryable
ãã. 7
join
åå #
partida
åå$ +
in
åå, .
queryablePartida
åå/ ?
on
åå@ B
entity
ååC I
.
ååI J
Id
ååJ L
equals
ååM S
partida
ååT [
.
åå[ \$
JerarquiaArancelariaId
åå\ r
select
çç %
new
çç& )#
PartidaArancelariaDto
çç* ?
(
çç? @
)
çç@ A
{
éé  
Id
èè# %
=
èè& '
partida
èè( /
.
èè/ 0
Id
èè0 2
,
èè2 3
Descripcion
êê# .
=
êê/ 0
partida
êê1 8
.
êê8 9
Descripcion
êê9 D
,
êêD E
NumeroPartida
ëë# 0
=
ëë1 2
partida
ëë3 :
.
ëë: ;
NumeroPartida
ëë; H
,
ëëH I
Valor
íí# (
=
íí) *
partida
íí+ 2
.
íí2 3
Valor
íí3 8
,
íí8 9$
JerarquiaArancelariaId
ìì# 9
=
ìì: ;
partida
ìì< C
.
ììC D$
JerarquiaArancelariaId
ììD Z
}
îî  
;
îî  !
var
ññ 

totalCount
ññ 
=
ññ 
await
ññ "
AsyncExecuter
ññ# 0
.
ññ0 1

CountAsync
ññ1 ;
(
ññ; <
queryableDto
ññ< H
)
ññH I
;
ññI J
var
òò 

entityDtos
òò 
=
òò 
await
òò "
AsyncExecuter
òò# 0
.
òò0 1
ToListAsync
òò1 <
(
òò< =
queryableDto
òò= I
)
òòI J
;
òòJ K
return
öö 
new
öö 
PagedResultDto
öö %
<
öö% &#
PartidaArancelariaDto
öö& ;
>
öö; <
(
öö< =

totalCount
õõ 
,
õõ 

entityDtos
úú 
)
ùù 
;
ùù 
}
ûû 	
public
†† 
async
†† 
Task
†† +
QuitarPartidaArancelariaAsync
†† 7
(
††7 8
Guid
††8 <$
jerarquiaArancelariaId
††= S
,
††S T
Guid
††U Y"
partidaArancelariaId
††Z n
)
††n o
{
°° 	
await
¢¢ $
CheckUpdatePolicyAsync
¢¢ (
(
¢¢( )
)
¢¢) *
;
¢¢* +
var
§§ 
	jerarquia
§§ 
=
§§ 
await
§§ !)
JerarquiaArancelariaManager
§§" =
.
§§= >+
QuitarPartidaArancelariaAsync
§§> [
(
§§[ \$
jerarquiaArancelariaId
§§\ r
,
§§r s#
partidaArancelariaId§§t à
)§§à â
;§§â ä
await
¶¶ 

Repository
¶¶ 
.
¶¶ 
UpdateAsync
¶¶ (
(
¶¶( )
	jerarquia
¶¶) 2
,
¶¶2 3
autoSave
¶¶4 <
:
¶¶< =
true
¶¶> B
)
¶¶B C
;
¶¶C D
await
®® 
CurrentUnitOfWork
®® #
.
®®# $
SaveChangesAsync
®®$ 4
(
®®4 5
)
®®5 6
;
®®6 7
}
©© 	
}
ØØ 
}±± ÷õ
sD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Arancel\PartidaArancelariaAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% &
Servicio& .
{ 
public 

class (
PartidaArancelariaAppService -
:. /
CrudAppService 
< 
PartidaArancelaria
 
, !
PartidaArancelariaDto
 
,  
Guid
 
, &
GetPartidaArancelariaInput
 $
,$ %0
$CrearActualizarPartidaArancelariaDto
 .
>. /
,/ 0)
IPartidaArancelariaAppService #
{ 
private 
readonly %
PartidaArancelariaManager 2 
tariffHeadingManager3 G
;G H
private 
readonly 
IRepository $
<$ %&
PartidaArancelariaServicio% ?
>? @+
tariffHeadingServiceRespositoryA `
;` a
private 
readonly 
IRepository $
<$ %
Dominio% ,
., -
Servicio- 5
>5 6
serviceRepository7 H
;H I
public (
PartidaArancelariaAppService +
(+ ,
IRepository, 7
<7 8
PartidaArancelaria8 J
,J K
GuidL P
>P Q

repositoryR \
,\ ]%
PartidaArancelariaManager ! 
tariffHeadingManager" 6
,6 7
IRepository   
<   &
PartidaArancelariaServicio   .
>  . /+
tariffHeadingServiceRespository  0 O
,  O P
IRepository!! 
<!! 
Dominio!! 
.!! 
Servicio!! $
>!!$ %
serviceRepository!!& 7
)!!7 8
:"" 
base"" 
("" 

repository"" 
)"" 
{## 	
this$$ 
.$$  
tariffHeadingManager$$ %
=$$& ' 
tariffHeadingManager$$( <
;$$< =
this%% 
.%% +
tariffHeadingServiceRespository%% 0
=%%1 2+
tariffHeadingServiceRespository%%3 R
;%%R S
this&& 
.&& 
serviceRepository&& "
=&&# $
serviceRepository&&% 6
;&&6 7
},, 	
public.. 
override.. 
async.. 
Task.. "
<.." #!
PartidaArancelariaDto..# 8
>..8 9
GetAsync..: B
(..B C
Guid..C G
id..H J
)..J K
{// 	
await00 
CheckGetPolicyAsync00 %
(00% &
)00& '
;00' (
var22 
	queryable22 
=22 
await22 !

Repository22" ,
.22, -
GetQueryableAsync22- >
(22> ?
)22? @
;22@ A
	queryable33 
=33 
	queryable33 !
.33! "
Where33" '
(33' (
a33( )
=>33* ,
a33- .
.33. /
Id33/ 1
==332 4
id335 7
)337 8
;338 9
var55 
queryableDto55 
=55 
	queryable55 (
.55( )
Select55) /
(55/ 0
entity550 6
=>557 9
new55: =!
PartidaArancelariaDto55> S
(55S T
)55T U
{66 
Id77 
=77 
entity77 
.77 
Id77 
,77 
Descripcion88 
=88 
entity88 $
.88$ %
Descripcion88% 0
,880 1
NumeroPartida99 
=99 
entity99  &
.99& '
NumeroPartida99' 4
,994 5
Valor:: 
=:: 
entity:: 
.:: 
Valor:: $
,::$ %"
JerarquiaArancelariaId;; &
=;;' (
entity;;) /
.;;/ 0"
JerarquiaArancelariaId;;0 F
}<< 
)<< 
;<< 
var>> 
	entityDto>> 
=>> 
await>> !
AsyncExecuter>>" /
.>>/ 0
FirstOrDefaultAsync>>0 C
(>>C D
queryableDto>>D P
)>>P Q
;>>Q R
return@@ 
	entityDto@@ 
;@@ 
}AA 	
publicCC 
overrideCC 
asyncCC 
TaskCC "
<CC" #
PagedResultDtoCC# 1
<CC1 2!
PartidaArancelariaDtoCC2 G
>CCG H
>CCH I
GetListAsyncCCJ V
(CCV W&
GetPartidaArancelariaInputCCW q
inputCCr w
)CCw x
{DD 	
awaitFF #
CheckGetListPolicyAsyncFF )
(FF) *
)FF* +
;FF+ ,
varHH 
	queryableHH 
=HH 
awaitHH !$
CreateFilteredQueryAsyncHH" :
(HH: ;
inputHH; @
)HH@ A
;HHA B
	queryableJJ 
=JJ 
	queryableJJ !
.JJ! "
WhereIfJJ" )
(JJ) *
!KK 
inputKK 
.KK 
FilterKK !
.KK! "
IsNullOrWhiteSpaceKK" 4
(KK4 5
)KK5 6
,KK6 7
uLL 
=>LL 
uLL 
.LL 
DescripcionLL &
.LL& '
ContainsLL' /
(LL/ 0
inputLL0 5
.LL5 6
FilterLL6 <
)LL< =
)MM 
;MM 
varOO 

totalCountOO 
=OO 
awaitOO "
AsyncExecuterOO# 0
.OO0 1

CountAsyncOO1 ;
(OO; <
	queryableOO< E
)OOE F
;OOF G
	queryableQQ 
=QQ 
ApplySortingQQ $
(QQ$ %
	queryableQQ% .
,QQ. /
inputQQ0 5
)QQ5 6
;QQ6 7
	queryableRR 
=RR 
ApplyPagingRR #
(RR# $
	queryableRR$ -
,RR- .
inputRR/ 4
)RR4 5
;RR5 6
varTT 
queryableDtoTT 
=TT 
	queryableTT (
.TT( )
SelectTT) /
(TT/ 0
entityTT0 6
=>TT7 9
newTT: =!
PartidaArancelariaDtoTT> S
(TTS T
)TTT U
{UU 
IdVV 
=VV 
entityVV 
.VV 
IdVV 
,VV 
DescripcionWW 
=WW 
entityWW $
.WW$ %
DescripcionWW% 0
,WW0 1
NumeroPartidaXX 
=XX 
entityXX  &
.XX& '
NumeroPartidaXX' 4
,XX4 5
ValorYY 
=YY 
entityYY 
.YY 
ValorYY $
,YY$ %"
JerarquiaArancelariaIdZZ &
=ZZ' (
entityZZ) /
.ZZ/ 0"
JerarquiaArancelariaIdZZ0 F
}[[ 
)[[ 
;[[ 
var]] 

entityDtos]] 
=]] 
await]] "
AsyncExecuter]]# 0
.]]0 1
ToListAsync]]1 <
(]]< =
queryableDto]]= I
)]]I J
;]]J K
return__ 
new__ 
PagedResultDto__ %
<__% &!
PartidaArancelariaDto__& ;
>__; <
(__< =

totalCount`` 
,`` 

entityDtosaa 
)bb 
;bb 
}cc 	
publicee 
overrideee 
asyncee 
Taskee "
<ee" #!
PartidaArancelariaDtoee# 8
>ee8 9
CreateAsyncee: E
(eeE F0
$CrearActualizarPartidaArancelariaDtoeeF j
inputeek p
)eep q
{ff 	
awaitgg "
CheckCreatePolicyAsyncgg (
(gg( )
)gg) *
;gg* +
varii 
entityii 
=ii 
awaitii  
tariffHeadingManagerii 3
.ii3 4
CreateAsyncii4 ?
(ii? @
idjj 
:jj 
GuidGeneratorjj !
.jj! "
Createjj" (
(jj( )
)jj) *
,jj* +
descriptionkk 
:kk 
inputkk "
.kk" #
Descripcionkk# .
,kk. /
headingNumberll 
:ll 
inputll $
.ll$ %
NumeroPartidall% 2
,ll2 3
valuemm 
:mm 
inputmm 
.mm 
Valormm "
,mm" #
tariffHierarchyIdnn !
:nn! "
inputnn# (
.nn( )"
JerarquiaArancelariaIdnn) ?
)oo 
;oo 
TryToSetTenantIdqq 
(qq 
entityqq #
)qq# $
;qq$ %
awaitss 

Repositoryss 
.ss 
InsertAsyncss (
(ss( )
entityss) /
,ss/ 0
autoSavess1 9
:ss9 :
truess; ?
)ss? @
;ss@ A
returnuu 
awaituu 
GetAsyncuu !
(uu! "
entityuu" (
.uu( )
Iduu) +
)uu+ ,
;uu, -
}vv 	
publicxx 
asyncxx 
Taskxx 
<xx 
ListResultDtoxx '
<xx' ('
PartidaArancelariaLookupDtoxx( C
>xxC D
>xxD E
GetLookupAsyncxxF T
(xxT U
)xxU V
{yy 	
awaitzz #
CheckGetListPolicyAsynczz )
(zz) *
)zz* +
;zz+ ,
var|| 
list|| 
=|| 
await|| 

Repository|| '
.||' (
GetListAsync||( 4
(||4 5
)||5 6
;||6 7
return~~ 
new~~ 
ListResultDto~~ $
<~~$ %'
PartidaArancelariaLookupDto~~% @
>~~@ A
(~~A B
ObjectMapper 
. 
Map  
<  !
List! %
<% &
PartidaArancelaria& 8
>8 9
,9 :
List; ?
<? @'
PartidaArancelariaLookupDto@ [
>[ \
>\ ]
(] ^
list^ b
)b c
)
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
public
ÑÑ 
async
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
PagedResultDto
ÑÑ (
<
ÑÑ( )/
!PartidaArancelariaServicioInfoDto
ÑÑ) J
>
ÑÑJ K
>
ÑÑK L
GetServicesAsync
ÑÑM ]
(
ÑÑ] ^
Guid
ÑÑ^ b
tariffHeadingId
ÑÑc r
,
ÑÑr s8
)ObtenerPartidaArancelariaServicioInputDtoÑÑt ù
inputÑÑû £
)ÑÑ£ §
{
ÖÖ 	
await
ÜÜ !
CheckGetPolicyAsync
ÜÜ %
(
ÜÜ% &
)
ÜÜ& '
;
ÜÜ' (
var
àà 
	queryable
àà 
=
àà 
await
àà !-
tariffHeadingServiceRespository
àà" A
.
ààA B
GetQueryableAsync
ààB S
(
ààS T
)
ààT U
;
ààU V
var
ââ 
queryableService
ââ  
=
ââ! "
await
ââ# (
serviceRepository
ââ) :
.
ââ: ;
GetQueryableAsync
ââ; L
(
ââL M
)
ââM N
;
ââN O
	queryable
ãã 
=
ãã 
	queryable
ãã !
.
ãã! "
Where
ãã" '
(
ãã' (
t
ãã( )
=>
ãã* ,
t
ãã- .
.
ãã. /"
PartidaArancelariaId
ãã/ C
==
ããD F
tariffHeadingId
ããG V
)
ããV W
;
ããW X
var
éé 

totalCount
éé 
=
éé 
await
éé "
AsyncExecuter
éé# 0
.
éé0 1

CountAsync
éé1 ;
(
éé; <
	queryable
éé< E
)
ééE F
;
ééF G
	queryable
êê 
=
êê 
ApplySorting
êê $
(
êê$ %
	queryable
êê% .
,
êê. /
input
êê0 5
)
êê5 6
;
êê6 7
	queryable
ëë 
=
ëë 
ApplyPaging
ëë #
(
ëë# $
	queryable
ëë$ -
,
ëë- .
input
ëë/ 4
)
ëë4 5
;
ëë5 6
var
îî 
queryableDto
îî 
=
îî 
from
îî #
entity
îî$ *
in
îî+ -
	queryable
îî. 7
join
ïï #
service
ïï$ +
in
ïï, .
queryableService
ïï/ ?
on
ïï@ B
entity
ïïC I
.
ïïI J

ServicioId
ïïJ T
equals
ïïU [
service
ïï\ c
.
ïïc d
Id
ïïd f
select
ññ %
new
ññ& )/
!PartidaArancelariaServicioInfoDto
ññ* K
(
ññK L
)
ññL M
{
óó  

ServicioId
òò# -
=
òò. /
entity
òò0 6
.
òò6 7

ServicioId
òò7 A
,
òòA B
Servicio
ôô# +
=
ôô, -
service
ôô. 5
.
ôô5 6
Nombre
ôô6 <
,
ôô< =
TipoServicio
öö# /
=
öö0 1
service
öö2 9
.
öö9 :
TipoServicio
öö: F
.
ööF G
Nombre
ööG M
,
ööM N 
AtencionPresencial
õõ# 5
=
õõ6 7
service
õõ8 ?
.
õõ? @ 
AtencionPresencial
õõ@ R
,
õõR S$
AtencionSemiPresencial
úú# 9
=
úú: ;
service
úú< C
.
úúC D$
AtencionSemiPresencial
úúD Z
,
úúZ [
AtencionVirtual
ùù# 2
=
ùù3 4
service
ùù5 <
.
ùù< =
AtencionVirtual
ùù= L
,
ùùL M
Activo
ûû# )
=
ûû* +
service
ûû, 3
.
ûû3 4
Activo
ûû4 :
}
üü  
;
üü  !
var
°° 

entityDtos
°° 
=
°° 
await
°° "
AsyncExecuter
°°# 0
.
°°0 1
ToListAsync
°°1 <
(
°°< =
queryableDto
°°= I
)
°°I J
;
°°J K
return
££ 
new
££ 
PagedResultDto
££ %
<
££% &/
!PartidaArancelariaServicioInfoDto
££& G
>
££G H
(
££H I

totalCount
§§ 
,
§§ 

entityDtos
•• 
)
¶¶ 
;
¶¶ 
}
®® 	
public
™™ 
async
™™ 
Task
™™ 
AddServiceAsync
™™ )
(
™™) *
Guid
™™* .
tariffHeadingId
™™/ >
,
™™> ?0
"CrearPartidaArancelariaServicioDto
™™@ b
input
™™c h
)
™™h i
{
´´ 	
await
¨¨ $
CheckUpdatePolicyAsync
¨¨ (
(
¨¨( )
)
¨¨) *
;
¨¨* +
var
ÆÆ 
tariffHeading
ÆÆ 
=
ÆÆ 
await
ÆÆ $"
tariffHeadingManager
ÆÆ% 9
.
ÆÆ9 :
AddServiceAsync
ÆÆ: I
(
ÆÆI J
tariffHeadingId
ÆÆJ Y
,
ÆÆY Z
input
ÆÆ[ `
.
ÆÆ` a

ServicioId
ÆÆa k
)
ÆÆk l
;
ÆÆl m
await
∞∞ 

Repository
∞∞ 
.
∞∞ 
UpdateAsync
∞∞ (
(
∞∞( )
tariffHeading
∞∞) 6
,
∞∞6 7
autoSave
∞∞8 @
:
∞∞@ A
true
∞∞B F
)
∞∞F G
;
∞∞G H
}
≤≤ 	
public
¥¥ 
async
¥¥ 
Task
¥¥  
RemoveServiceAsync
¥¥ ,
(
¥¥, -
Guid
¥¥- 1
tariffHeadingId
¥¥2 A
,
¥¥A B
Guid
¥¥C G
	serviceId
¥¥H Q
)
¥¥Q R
{
µµ 	
await
∂∂ $
CheckUpdatePolicyAsync
∂∂ (
(
∂∂( )
)
∂∂) *
;
∂∂* +
var
∏∏ 
tariffHeading
∏∏ 
=
∏∏ 
await
∏∏  %"
tariffHeadingManager
∏∏& :
.
∏∏: ; 
RemoveServiceAsync
∏∏; M
(
∏∏M N
tariffHeadingId
∏∏N ]
,
∏∏] ^
	serviceId
∏∏_ h
)
∏∏h i
;
∏∏i j
await
∫∫ 

Repository
∫∫ 
.
∫∫ 
UpdateAsync
∫∫ (
(
∫∫( )
tariffHeading
∫∫) 6
,
∫∫6 7
autoSave
∫∫8 @
:
∫∫@ A
true
∫∫B F
)
∫∫F G
;
∫∫G H
}
ºº 	
	protected
¿¿ 
virtual
¿¿ 

IQueryable
¿¿ $
<
¿¿$ %
TEntity
¿¿% ,
>
¿¿, -
ApplySorting
¿¿. :
<
¿¿: ;
TEntity
¿¿; B
>
¿¿B C
(
¿¿C D

IQueryable
¿¿D N
<
¿¿N O
TEntity
¿¿O V
>
¿¿V W
query
¿¿X ]
,
¿¿] ^,
PagedAndSortedResultRequestDto
¿¿_ }
input¿¿~ É
)¿¿É Ñ
{
¡¡ 	
if
√√ 
(
√√ 
input
√√ 
is
√√ "
ISortedResultRequest
√√ -
	sortInput
√√. 7
)
√√7 8
{
ƒƒ 
if
≈≈ 
(
≈≈ 
!
≈≈ 
	sortInput
≈≈ 
.
≈≈ 
Sorting
≈≈ &
.
≈≈& ' 
IsNullOrWhiteSpace
≈≈' 9
(
≈≈9 :
)
≈≈: ;
)
≈≈; <
{
∆∆ 
return
«« 
query
««  
.
««  !
OrderBy
««! (
(
««( )
	sortInput
««) 2
.
««2 3
Sorting
««3 :
)
««: ;
;
««; <
}
»» 
}
…… 
if
ÃÃ 
(
ÃÃ 
input
ÃÃ 
is
ÃÃ #
ILimitedResultRequest
ÃÃ .
)
ÃÃ. /
{
ÕÕ 
return
ŒŒ !
ApplyDefaultSorting
ŒŒ *
(
ŒŒ* +
query
ŒŒ+ 0
)
ŒŒ0 1
;
ŒŒ1 2
}
œœ 
return
““ 
query
““ 
;
““ 
}
”” 	
	protected
’’ 
virtual
’’ 

IQueryable
’’ $
<
’’$ %
TEntity
’’% ,
>
’’, -!
ApplyDefaultSorting
’’. A
<
’’A B
TEntity
’’B I
>
’’I J
(
’’J K

IQueryable
’’K U
<
’’U V
TEntity
’’V ]
>
’’] ^
query
’’_ d
)
’’d e
{
÷÷ 	
if
◊◊ 
(
◊◊ 
typeof
◊◊ 
(
◊◊ 
TEntity
◊◊ 
)
◊◊ 
.
◊◊  
IsAssignableTo
◊◊  .
<
◊◊. /
IHasCreationTime
◊◊/ ?
>
◊◊? @
(
◊◊@ A
)
◊◊A B
)
◊◊B C
{
ÿÿ 
return
ŸŸ 
query
ŸŸ 
.
ŸŸ 
OrderByDescending
ŸŸ .
(
ŸŸ. /
e
ŸŸ/ 0
=>
ŸŸ1 3
(
ŸŸ4 5
(
ŸŸ5 6
IHasCreationTime
ŸŸ6 F
)
ŸŸF G
e
ŸŸG H
)
ŸŸH I
.
ŸŸI J
CreationTime
ŸŸJ V
)
ŸŸV W
;
ŸŸW X
}
⁄⁄ 
throw
ﬁﬁ 
new
ﬁﬁ 
AbpException
ﬁﬁ "
(
ﬁﬁ" #
$strﬁﬁ# À
)ﬁﬁÀ Ã
;ﬁﬁÃ Õ
}
ﬂﬂ 	
	protected
·· 
virtual
·· 

IQueryable
·· $
<
··$ %
TEntity
··% ,
>
··, -
ApplyPaging
··. 9
<
··9 :
TEntity
··: A
>
··A B
(
··B C

IQueryable
··C M
<
··M N
TEntity
··N U
>
··U V
query
··W \
,
··\ ],
PagedAndSortedResultRequestDto
··^ |
input··} Ç
)··Ç É
{
‚‚ 	
if
‰‰ 
(
‰‰ 
input
‰‰ 
is
‰‰ !
IPagedResultRequest
‰‰ ,

pagedInput
‰‰- 7
)
‰‰7 8
{
ÂÂ 
return
ÊÊ 
query
ÊÊ 
.
ÊÊ 
PageBy
ÊÊ #
(
ÊÊ# $

pagedInput
ÊÊ$ .
)
ÊÊ. /
;
ÊÊ/ 0
}
ÁÁ 
if
ÍÍ 
(
ÍÍ 
input
ÍÍ 
is
ÍÍ #
ILimitedResultRequest
ÍÍ .
limitedInput
ÍÍ/ ;
)
ÍÍ; <
{
ÎÎ 
return
ÏÏ 
query
ÏÏ 
.
ÏÏ 
Take
ÏÏ !
(
ÏÏ! "
limitedInput
ÏÏ" .
.
ÏÏ. /
MaxResultCount
ÏÏ/ =
)
ÏÏ= >
;
ÏÏ> ?
}
ÌÌ 
return
 
query
 
;
 
}
ÒÒ 	
}
ÛÛ 
}ıı á<
{D:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Arancel\PartidaArancelariaServicioAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% &
Servicio& .
{ 
public 

class 0
$PartidaArancelariaServicioAppService 5
:6 7
ApplicationService8 J
,J K1
%IPartidaArancelariaServicioAppServiceL q
{ 
private 
readonly 
IRepository $
<$ %&
PartidaArancelariaServicio% ?
>? @&
_partidaServicioRepositoryA [
;[ \
private 
readonly 
IRepository $
<$ %
PartidaArancelaria% 7
>7 8
_partidaRepository9 K
;K L
private 
readonly 
IRepository $
<$ % 
JerarquiaArancelaria% 9
>9 : 
_jerarquiaRepository; O
;O P
private 
readonly 
IRepository $
<$ %
Arancel% ,
>, -
_arancelRepository. @
;@ A
private 
readonly 
IRepository $
<$ %
Dominio% ,
., -
Servicio- 5
>5 6
_servicioRepository7 J
;J K
public 0
$PartidaArancelariaServicioAppService 3
(3 4
IRepository 
< &
PartidaArancelariaServicio 2
>2 3%
partidaServicioRepository4 M
,M N
IRepository 
< 
PartidaArancelaria *
>* +
partidaRepository, =
,= >
IRepository 
<  
JerarquiaArancelaria ,
>, -
jerarquiaRepository. A
,A B
IRepository 
< 
Arancel 
>  
arancelRepository! 2
,2 3
IRepository 
< 
Dominio 
.  
Servicio  (
>( )
servicioRepository* <
)   
{!! 	&
_partidaServicioRepository"" &
=""' (%
partidaServicioRepository"") B
;""B C
_partidaRepository## 
=##  
partidaRepository##! 2
;##2 3 
_jerarquiaRepository$$  
=$$! "
jerarquiaRepository$$# 6
;$$6 7
_arancelRepository%% 
=%%  
arancelRepository%%! 2
;%%2 3
_servicioRepository&& 
=&&  !
servicioRepository&&" 4
;&&4 5
}'' 	
public)) 
async)) 
Task)) 
<)) 
ListResultDto)) '
<))' ()
PartidaArancelariaServicioDto))( E
>))E F
>))F G5
)ObtenerPartidaArancelariaPorServicioAsync))H q
())q r
Guid))r v

servicioId	))w Å
)
))Å Ç
{** 	
var++  
queryPartidaServicio++ $
=++% &
await++' ,&
_partidaServicioRepository++- G
.++G H
GetQueryableAsync++H Y
(++Y Z
)++Z [
;++[ \ 
queryPartidaServicio,,  
=,,! " 
queryPartidaServicio,,# 7
.,,7 8
Where,,8 =
(,,= >
a,,> ?
=>,,@ B
a,,C D
.,,D E

ServicioId,,E O
==,,P R

servicioId,,S ]
),,] ^
;,,^ _
var.. 
queryServicio.. 
=.. 
await..  %
_servicioRepository..& 9
...9 :
GetQueryableAsync..: K
(..K L
)..L M
;..M N
queryServicio// 
=// 
queryServicio// )
.//) *
Where//* /
(/// 0
a//0 1
=>//2 4
a//5 6
.//6 7
Id//7 9
==//: <

servicioId//= G
)//G H
;//H I
var11 
queryPartida11 
=11 
await11 $
_partidaRepository11% 7
.117 8
GetQueryableAsync118 I
(11I J
)11J K
;11K L
var33 
queryJerarquia33 
=33  
await33! & 
_jerarquiaRepository33' ;
.33; <
GetQueryableAsync33< M
(33M N
)33N O
;33O P
var55 
queryArancel55 
=55 
await55 $
_arancelRepository55% 7
.557 8
GetQueryableAsync558 I
(55I J
)55J K
;55K L
queryArancel66 
=66 
queryArancel66 '
.66' (
Where66( -
(66- .
x66. /
=>660 2
x663 4
.664 5
Activo665 ;
)66; <
;66< =
var88 
queryDto88 
=88 
from88 
entity88  &
in88' ) 
queryPartidaServicio88* >
join99 
servicio99  (
in99) +
queryServicio99, 9
on:: 
entity:: $
.::$ %

ServicioId::% /
equals::0 6
servicio::7 ?
.::? @
Id::@ B
join;; 
partida;;  '
in;;( *
queryPartida;;+ 7
on<< 
entity<< $
.<<$ % 
PartidaArancelariaId<<% 9
equals<<: @
partida<<A H
.<<H I
Id<<I K
join== 
	jerarquia==  )
in==* ,
queryJerarquia==- ;
on>> 
partida>> %
.>>% &"
JerarquiaArancelariaId>>& <
equals>>= C
	jerarquia>>D M
.>>M N
Id>>N P
join?? 
arancel??  '
in??( *
queryArancel??+ 7
on@@ 
	jerarquia@@ '
.@@' (
	ArancelId@@( 1
equals@@2 8
arancel@@9 @
.@@@ A
Id@@A C
selectAA !
newAA" %)
PartidaArancelariaServicioDtoAA& C
{BB 

ServicioIdCC )
=CC* +
servicioCC, 4
.CC4 5
IdCC5 7
,CC7 8
ServicioDD '
=DD( )
servicioDD* 2
.DD2 3
NombreDD3 9
,DD9 : 
PartidaArancelariaIdEE 3
=EE4 5
entityEE6 <
.EE< = 
PartidaArancelariaIdEE= Q
,EEQ R
PartidaArancelariaFF 1
=FF2 3
partidaFF4 ;
.FF; <
DescripcionFF< G
,FFG H
NumeroPartidaGG ,
=GG- .
partidaGG/ 6
.GG6 7
NumeroPartidaGG7 D
,GGD E
ValorHH $
=HH% &
partidaHH' .
.HH. /
ValorHH/ 4
,HH4 5"
JerarquiaArancelariaIdII 5
=II6 7
	jerarquiaII8 A
.IIA B
IdIIB D
,IID E 
JerarquiaArancelariaJJ 3
=JJ4 5
	jerarquiaJJ6 ?
.JJ? @
DescripcionJJ@ K
,JJK L
	ArancelIdKK (
=KK) *
arancelKK+ 2
.KK2 3
IdKK3 5
,KK5 6
ArancelLL &
=LL' (
arancelLL) 0
.LL0 1
DescripcionLL1 <
}MM 
;MM 
varPP 
resultadoDtoPP 
=PP 
awaitPP $
AsyncExecuterPP% 2
.PP2 3
ToListAsyncPP3 >
(PP> ?
queryDtoPP? G
)PPG H
;PPH I
returnRR 
newRR 
ListResultDtoRR $
<RR$ %)
PartidaArancelariaServicioDtoRR% B
>RRB C
(RRC D
resultadoDtoRRD P
)RRP Q
;RRQ R
}TT 	
}VV 
}XX §
lD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Arancel\TipoArancelAppService.cs
	namespace		 	
Mre		
 
.		 
Sb		 
.		  
UnidadAdministrativa		 %
.		% &
Servicio		& .
{

 
public 

class !
TipoArancelAppService &
:' (
CrudAppService 
< 
TipoArancel 
, 
TipoArancelDto 
, 
string 
> 
, "
ITipoArancelAppService 
{ 
private 
readonly 
TipoArancelManager +
TariffTypeManager, =
;= >
public !
TipoArancelAppService $
($ %
IRepository% 0
<0 1
TipoArancel1 <
,< =
string> D
>D E

repositoryF P
,P Q
TipoArancelManager 
tariffTypeManager ,
), -
: 
base 
( 

repository 
) 
{ 	
this 
. 
TariffTypeManager "
=# $
tariffTypeManager% 6
;6 7
}!! 	
public## 
override## 
async## 
Task## "
<##" #
TipoArancelDto### 1
>##1 2
CreateAsync##3 >
(##> ?
TipoArancelDto##? M
input##N S
)##S T
{$$ 	
await%% "
CheckCreatePolicyAsync%% (
(%%( )
)%%) *
;%%* +
await'' 
TariffTypeManager'' #
.''# $
ValidateCreateAsync''$ 7
(''7 8
input''8 =
.''= >
Id''> @
)''@ A
;''A B
var)) 
entity)) 
=)) 
await)) 
MapToEntityAsync)) /
())/ 0
input))0 5
)))5 6
;))6 7
TryToSetTenantId++ 
(++ 
entity++ #
)++# $
;++$ %
await-- 

Repository-- 
.-- 
InsertAsync-- (
(--( )
entity--) /
,--/ 0
autoSave--1 9
:--9 :
true--; ?
)--? @
;--@ A
return// 
await// "
MapToGetOutputDtoAsync// /
(/// 0
entity//0 6
)//6 7
;//7 8
}00 	
public22 
async22 
Task22 
<22 
ListResultDto22 '
<22' ( 
TipoArancelLookupDto22( <
>22< =
>22= >
GetLookupAsync22? M
(22M N
)22N O
{33 	
await44 #
CheckGetListPolicyAsync44 )
(44) *
)44* +
;44+ ,
var66 
list66 
=66 
await66 

Repository66 '
.66' (
GetListAsync66( 4
(664 5
)665 6
;666 7
return88 
new88 
ListResultDto88 $
<88$ % 
TipoArancelLookupDto88% 9
>889 :
(88: ;
ObjectMapper99 
.99 
Map99  
<99  !
List99! %
<99% &
TipoArancel99& 1
>991 2
,992 3
List994 8
<998 9 
TipoArancelLookupDto999 M
>99M N
>99N O
(99O P
list99P T
)99T U
):: 
;:: 
};; 	
}== 
}?? ˛È
jD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Convenio\ConvenioAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% &
Servicio& .
{ 
public 

class 
ConvenioAppService #
:$ %
CrudAppService 
< 
Convenio
 
, 
ConvenioDto
 
, 
Guid
 
, 
GetConvenioInput
 
, &
CrearActualizarConvenioDto
 $
>$ %
,% &
IConvenioAppService 
{ 
private 
readonly 
IRepository $
<$ %
Exoneracion% 0
>0 1!
exonerationRepository2 G
;G H
private 
readonly 
IRepository $
<$ %
Dominio% ,
., -
Servicio- 5
>5 6
serviceRepository7 H
;H I
private 
readonly 
ConvenioManager (
AgreementManager) 9
;9 :
private 
readonly 
IStringLocalizer )
<) *&
AdministrativeUnitResource* D
>D E
	localizerF O
;O P
public!! 
ConvenioAppService!! !
(!!! "
IRepository!!" -
<!!- .
Convenio!!. 6
,!!6 7
Guid!!8 <
>!!< =

repository!!> H
,!!H I
IRepository"" 
<"" 
Exoneracion"" #
>""# $!
exonerationRepository""% :
,"": ;
IRepository## 
<## 
Dominio## 
.##  
Servicio##  (
>##( )
serviceRepository##* ;
,##; <
ConvenioManager$$ 
AgreementManager$$ (
,$$( )
IStringLocalizer%% 
<%% &
AdministrativeUnitResource%% 3
>%%3 4
	localizer%%5 >
)%%> ?
:&& 
base&& 
(&& 

repository&& 
)&& 
{'' 	
this(( 
.(( !
exonerationRepository(( &
=((' (!
exonerationRepository(() >
;((> ?
this)) 
.)) 
serviceRepository)) "
=))# $
serviceRepository))% 6
;))6 7
this** 
.** 
AgreementManager** !
=**" #
AgreementManager**$ 4
;**4 5
this++ 
.++ 
	localizer++ 
=++ 
	localizer++ &
;++& '
}22 	
public44 
override44 
async44 
Task44 "
<44" #
ConvenioDto44# .
>44. /
GetAsync440 8
(448 9
Guid449 =
id44> @
)44@ A
{55 	
await66 
CheckGetPolicyAsync66 %
(66% &
)66& '
;66' (
var88 
	queryable88 
=88 
await88 !

Repository88" ,
.88, -
GetQueryableAsync88- >
(88> ?
)88? @
;88@ A
	queryable99 
=99 
	queryable99 !
.99! "
Where99" '
(99' (
a99( )
=>99* ,
a99- .
.99. /
Id99/ 1
==992 4
id995 7
)997 8
;998 9
var;; 
queryableDto;; 
=;; 
	queryable;; (
.;;( )
Select;;) /
(;;/ 0
entity;;0 6
=>;;7 9
new;;: =
ConvenioDto;;> I
(;;I J
);;J K
{<< 
Id== 
=== 
entity== 
.== 
Id== 
,== 
Descripcion>> 
=>> 
entity>> $
.>>$ %
Descripcion>>% 0
,>>0 1
FechaCreacion?? 
=?? 
entity??  &
.??& '
FechaCreacion??' 4
,??4 5
FechaExpiracion@@ 
=@@  !
entity@@" (
.@@( )
FechaExpiracion@@) 8
}AA 
)AA 
;AA 
varCC 
	entityDtoCC 
=CC 
awaitCC !
AsyncExecuterCC" /
.CC/ 0
FirstOrDefaultAsyncCC0 C
(CCC D
queryableDtoCCD P
)CCP Q
;CCQ R
returnEE 
	entityDtoEE 
;EE 
}FF 	
publicHH 
overrideHH 
asyncHH 
TaskHH "
<HH" #
PagedResultDtoHH# 1
<HH1 2
ConvenioDtoHH2 =
>HH= >
>HH> ?
GetListAsyncHH@ L
(HHL M
GetConvenioInputHHM ]
inputHH^ c
)HHc d
{II 	
awaitKK #
CheckGetListPolicyAsyncKK )
(KK) *
)KK* +
;KK+ ,
varMM 
	queryableMM 
=MM 
awaitMM !$
CreateFilteredQueryAsyncMM" :
(MM: ;
inputMM; @
)MM@ A
;MMA B
	queryableOO 
=OO 
	queryableOO !
.OO! "
WhereIfOO" )
(OO) *
!PP 
inputPP 
.PP 
FilterPP !
.PP! "
IsNullOrWhiteSpacePP" 4
(PP4 5
)PP5 6
,PP6 7
uQQ 
=>QQ 
uQQ 
.QQ 
DescripcionQQ &
.QQ& '
ContainsQQ' /
(QQ/ 0
inputQQ0 5
.QQ5 6
FilterQQ6 <
)QQ< =
)RR 
;RR 
varTT 

totalCountTT 
=TT 
awaitTT "
AsyncExecuterTT# 0
.TT0 1

CountAsyncTT1 ;
(TT; <
	queryableTT< E
)TTE F
;TTF G
	queryableVV 
=VV 
ApplySortingVV $
(VV$ %
	queryableVV% .
,VV. /
inputVV0 5
)VV5 6
;VV6 7
	queryableWW 
=WW 
ApplyPagingWW #
(WW# $
	queryableWW$ -
,WW- .
inputWW/ 4
)WW4 5
;WW5 6
varYY 
queryableDtoYY 
=YY 
	queryableYY (
.YY( )
SelectYY) /
(YY/ 0
entityYY0 6
=>YY7 9
newYY: =
ConvenioDtoYY> I
(YYI J
)YYJ K
{ZZ 
Id[[ 
=[[ 
entity[[ 
.[[ 
Id[[ 
,[[ 
Descripcion\\ 
=\\ 
entity\\ $
.\\$ %
Descripcion\\% 0
,\\0 1
FechaCreacion]] 
=]] 
entity]]  &
.]]& '
FechaCreacion]]' 4
,]]4 5
FechaExpiracion^^ 
=^^  !
entity^^" (
.^^( )
FechaExpiracion^^) 8
}__ 
)__ 
;__ 
varaa 

entityDtosaa 
=aa 
awaitaa "
AsyncExecuteraa# 0
.aa0 1
ToListAsyncaa1 <
(aa< =
queryableDtoaa= I
)aaI J
;aaJ K
returncc 
newcc 
PagedResultDtocc %
<cc% &
ConvenioDtocc& 1
>cc1 2
(cc2 3

totalCountdd 
,dd 

entityDtosee 
)ff 
;ff 
}gg 	
publicii 
overrideii 
asyncii 
Taskii "
<ii" #
ConvenioDtoii# .
>ii. /
CreateAsyncii0 ;
(ii; <&
CrearActualizarConvenioDtoii< V
inputiiW \
)ii\ ]
{jj 	
awaitkk "
CheckCreatePolicyAsynckk (
(kk( )
)kk) *
;kk* +
varmm 
entitymm 
=mm 
awaitmm 
AgreementManagermm /
.mm/ 0
CreateAsyncmm0 ;
(mm; <
idnn 
:nn 
GuidGeneratornn !
.nn! "
Createnn" (
(nn( )
)nn) *
,nn* +
descriptionoo 
:oo 
inputoo "
.oo" #
Descripcionoo# .
,oo. /
creationDatepp 
:pp 
inputpp #
.pp# $
FechaCreacionpp$ 1
,pp1 2
expirationDateqq 
:qq 
inputqq  %
.qq% &
FechaExpiracionqq& 5
)rr 
;rr 
TryToSetTenantIdtt 
(tt 
entitytt #
)tt# $
;tt$ %
awaitvv 

Repositoryvv 
.vv 
InsertAsyncvv (
(vv( )
entityvv) /
,vv/ 0
autoSavevv1 9
:vv9 :
truevv; ?
)vv? @
;vv@ A
returnxx 
awaitxx 
GetAsyncxx !
(xx! "
entityxx" (
.xx( )
Idxx) +
)xx+ ,
;xx, -
}yy 	
public{{ 
async{{ 
Task{{ 
<{{ 
ListResultDto{{ '
<{{' (
ConvenioLookupDto{{( 9
>{{9 :
>{{: ;
GetLookupAsync{{< J
({{J K
){{K L
{|| 	
await}} #
CheckGetListPolicyAsync}} )
(}}) *
)}}* +
;}}+ ,
var 
list 
= 
await 

Repository '
.' (
GetListAsync( 4
(4 5
)5 6
;6 7
return
ÅÅ 
new
ÅÅ 
ListResultDto
ÅÅ $
<
ÅÅ$ %
ConvenioLookupDto
ÅÅ% 6
>
ÅÅ6 7
(
ÅÅ7 8
ObjectMapper
ÇÇ 
.
ÇÇ 
Map
ÇÇ  
<
ÇÇ  !
List
ÇÇ! %
<
ÇÇ% &
Convenio
ÇÇ& .
>
ÇÇ. /
,
ÇÇ/ 0
List
ÇÇ1 5
<
ÇÇ5 6
ConvenioLookupDto
ÇÇ6 G
>
ÇÇG H
>
ÇÇH I
(
ÇÇI J
list
ÇÇJ N
)
ÇÇN O
)
ÉÉ 
;
ÉÉ 
}
ÑÑ 	
public
ââ 
async
ââ 
Task
ââ 
<
ââ 
ExonerationDto
ââ (
>
ââ( )!
AddExonerationAsync
ââ* =
(
ââ= >
Guid
ââ> B
agreementId
ââC N
,
ââN O!
CrearExoneracionDto
ââP c
input
ââd i
)
ââi j
{
ää 	
await
ãã $
CheckUpdatePolicyAsync
ãã (
(
ãã( )
)
ãã) *
;
ãã* +
var
çç 
	agreement
çç 
=
çç 
await
çç !
AgreementManager
çç" 2
.
çç2 3!
AddExonerationAsync
çç3 F
(
ççF G
agreementId
éé 
,
éé 
input
èè 
.
èè 

ServicioId
èè  
,
èè  !
input
êê 
.
êê 
Valor
êê 
,
êê 
input
ëë 
.
ëë 
TipoExoneracionId
ëë '
,
ëë' (
input
íí 
.
íí "
EntidadAuspicianteId
íí *
,
íí* +
input
ìì 
.
ìì 
PaisId
ìì 
,
ìì 
input
îî 
.
îî 
EdadInicial
îî !
,
îî! "
input
ïï 
.
ïï 
	EdadFinal
ïï 
,
ïï  
input
ññ 
.
ññ 
Discapacitado
ññ #
)
ññ# $
;
ññ$ %
await
òò 

Repository
òò 
.
òò 
UpdateAsync
òò (
(
òò( )
	agreement
òò) 2
,
òò2 3
autoSave
òò4 <
:
òò< =
true
òò> B
)
òòB C
;
òòC D
return
õõ 
await
õõ !
GetExonerationAsync
õõ ,
(
õõ, -
agreementId
õõ- 8
,
õõ8 9
input
õõ: ?
.
õõ? @

ServicioId
õõ@ J
)
õõJ K
;
õõK L
}
úú 	
public
ûû 
async
ûû 
Task
ûû 
<
ûû 
ExonerationDto
ûû (
>
ûû( )$
UpdateExonerationAsync
ûû* @
(
ûû@ A
Guid
ûûA E
agreementId
ûûF Q
,
ûûQ R
Guid
ûûS W
	serviceId
ûûX a
,
ûûa b&
ActualizarExoneracionDto
ûûc {
inputûû| Å
)ûûÅ Ç
{
üü 	
await
°° $
CheckUpdatePolicyAsync
°° (
(
°°( )
)
°°) *
;
°°* +
var
££ 
	queryable
££ 
=
££ 
await
££ !

Repository
££" ,
.
§§ 
WithDetailsAsync
§§ )
(
§§) *
p
§§* +
=>
§§, .
p
§§/ 0
.
§§0 1
Exoneraciones
§§1 >
)
§§> ?
;
•• 
	queryable
ßß 
=
ßß 
	queryable
ßß !
.
ßß! "
Where
ßß" '
(
ßß' (
p
ßß( )
=>
ßß* ,
p
ßß- .
.
ßß. /
Id
ßß/ 1
==
ßß2 4
agreementId
ßß5 @
)
ßß@ A
;
ßßA B
var
©© 
	agreement
©© 
=
©© 
await
©© !
AsyncExecuter
©©" /
.
©©/ 0"
SingleOrDefaultAsync
©©0 D
(
©©D E
	queryable
©©E N
)
©©N O
;
©©O P
if
™™ 
(
™™ 
	agreement
™™ 
==
™™ 
null
™™ !
)
™™! "
{
´´ 
throw
¨¨ 
new
¨¨ %
EntityNotFoundException
¨¨ 1
(
¨¨1 2
typeof
¨¨2 8
(
¨¨8 9
Mre
¨¨9 <
.
¨¨< =
Sb
¨¨= ?
.
¨¨? @"
UnidadAdministrativa
¨¨@ T
.
¨¨T U
Dominio
¨¨U \
.
¨¨\ ]
Convenio
¨¨] e
)
¨¨e f
,
¨¨f g
agreementId
¨¨h s
)
¨¨s t
;
¨¨t u
}
≠≠ 
var
ØØ 
exoneration
ØØ 
=
ØØ 
	agreement
ØØ '
.
ØØ' (
Exoneraciones
ØØ( 5
.
ØØ5 6
SingleOrDefault
ØØ6 E
(
ØØE F
p
ØØF G
=>
ØØH J
p
ØØK L
.
ØØL M

ServicioId
ØØM W
==
ØØX Z
	serviceId
ØØ[ d
)
ØØd e
;
ØØe f
if
∞∞ 
(
∞∞ 
exoneration
∞∞ 
==
∞∞ 
null
∞∞ #
)
∞∞# $
{
±± 
throw
≤≤ 
new
≤≤ %
EntityNotFoundException
≤≤ 1
(
≤≤1 2
typeof
≤≤2 8
(
≤≤8 9
Mre
≤≤9 <
.
≤≤< =
Sb
≤≤= ?
.
≤≤? @"
UnidadAdministrativa
≤≤@ T
.
≤≤T U
Dominio
≤≤U \
.
≤≤\ ]
Exoneracion
≤≤] h
)
≤≤h i
,
≤≤i j
	serviceId
≤≤k t
)
≤≤t u
;
≤≤u v
}
≥≥ 
exoneration
∂∂ 
.
∂∂ 
Valor
∂∂ 
=
∂∂ 
input
∂∂  %
.
∂∂% &
Valor
∂∂& +
;
∂∂+ ,
exoneration
∑∑ 
.
∑∑ 
TipoExoneracionId
∑∑ )
=
∑∑* +
input
∑∑, 1
.
∑∑1 2
TipoExoneracionId
∑∑2 C
;
∑∑C D
exoneration
∏∏ 
.
∏∏ "
EntidadAuspicianteId
∏∏ ,
=
∏∏- .
input
∏∏/ 4
.
∏∏4 5"
EntidadAuspicianteId
∏∏5 I
;
∏∏I J
exoneration
ππ 
.
ππ 
PaisId
ππ 
=
ππ  
input
ππ! &
.
ππ& '
PaisId
ππ' -
;
ππ- .
exoneration
∫∫ 
.
∫∫ 
EdadInicial
∫∫ #
=
∫∫$ %
input
∫∫& +
.
∫∫+ ,
EdadInicial
∫∫, 7
;
∫∫7 8
exoneration
ªª 
.
ªª 
	EdadFinal
ªª !
=
ªª" #
input
ªª$ )
.
ªª) *
	EdadFinal
ªª* 3
;
ªª3 4
exoneration
ºº 
.
ºº 
Discapacitado
ºº %
=
ºº& '
input
ºº( -
.
ºº- .
Discapacitado
ºº. ;
;
ºº; <
await
ææ 

Repository
ææ 
.
ææ 
UpdateAsync
ææ (
(
ææ( )
	agreement
ææ) 2
,
ææ2 3
autoSave
ææ4 <
:
ææ< =
true
ææ> B
)
ææB C
;
ææC D
return
¡¡ 
await
¡¡ !
GetExonerationAsync
¡¡ ,
(
¡¡, -
agreementId
¡¡- 8
,
¡¡8 9
	serviceId
¡¡: C
)
¡¡C D
;
¡¡D E
}
√√ 	
public
≈≈ 
async
≈≈ 
Task
≈≈ $
RemoveExonerationAsync
≈≈ 0
(
≈≈0 1
Guid
≈≈1 5
id
≈≈6 8
,
≈≈8 9
Guid
≈≈: >
	serviceId
≈≈? H
)
≈≈H I
{
∆∆ 	
await
«« $
CheckUpdatePolicyAsync
«« (
(
««( )
)
««) *
;
««* +
var
ÀÀ 
exoneration
ÀÀ 
=
ÀÀ 
await
ÀÀ #
AgreementManager
ÀÀ$ 4
.
ÀÀ4 5$
RemoveExonerationAsync
ÀÀ5 K
(
ÀÀK L
id
ÀÀL N
,
ÀÀN O
	serviceId
ÀÀP Y
)
ÀÀY Z
;
ÀÀZ [
await
ÕÕ 

Repository
ÕÕ 
.
ÕÕ 
UpdateAsync
ÕÕ (
(
ÕÕ( )
exoneration
ÕÕ) 4
,
ÕÕ4 5
autoSave
ÕÕ6 >
:
ÕÕ> ?
true
ÕÕ@ D
)
ÕÕD E
;
ÕÕE F
await
œœ 
CurrentUnitOfWork
œœ #
.
œœ# $
SaveChangesAsync
œœ$ 4
(
œœ4 5
)
œœ5 6
;
œœ6 7
}
—— 	
public
”” 
async
”” 
Task
”” 
<
”” 
ExonerationDto
”” (
>
””( )!
GetExonerationAsync
””* =
(
””= >
Guid
””> B
agreementId
””C N
,
””N O
Guid
””P T
	serviceId
””U ^
)
””^ _
{
‘‘ 	
await
÷÷ !
CheckGetPolicyAsync
÷÷ %
(
÷÷% &
)
÷÷& '
;
÷÷' (
var
ÿÿ 
	queryable
ÿÿ 
=
ÿÿ 
await
ÿÿ !#
exonerationRepository
ÿÿ" 7
.
ÿÿ7 8
GetQueryableAsync
ÿÿ8 I
(
ÿÿI J
)
ÿÿJ K
;
ÿÿK L
var
ŸŸ 
queryableService
ŸŸ  
=
ŸŸ! "
await
ŸŸ# (
serviceRepository
ŸŸ) :
.
ŸŸ: ;
GetQueryableAsync
ŸŸ; L
(
ŸŸL M
)
ŸŸM N
;
ŸŸN O
	queryable
€€ 
=
€€ 
	queryable
€€ !
.
€€! "
Where
€€" '
(
€€' (
p
€€( )
=>
€€* ,
p
€€- .
.
€€. /

ConvenioId
€€/ 9
==
€€: <
agreementId
€€= H
)
€€H I
;
€€I J
	queryable
‹‹ 
=
‹‹ 
	queryable
‹‹ !
.
‹‹! "
Where
‹‹" '
(
‹‹' (
p
‹‹( )
=>
‹‹* ,
p
‹‹- .
.
‹‹. /

ServicioId
‹‹/ 9
==
‹‹: <
	serviceId
‹‹= F
)
‹‹F G
;
‹‹G H
var
ﬁﬁ 
queryableDto
ﬁﬁ 
=
ﬁﬁ 
from
ﬁﬁ #
entity
ﬁﬁ$ *
in
ﬁﬁ+ -
	queryable
ﬁﬁ. 7
join
ﬂﬂ #
service
ﬂﬂ$ +
in
ﬂﬂ, .
queryableService
ﬂﬂ/ ?
on
ﬂﬂ@ B
entity
ﬂﬂC I
.
ﬂﬂI J

ServicioId
ﬂﬂJ T
equals
ﬂﬂU [
service
ﬂﬂ\ c
.
ﬂﬂc d
Id
ﬂﬂd f
select
‡‡ %
new
‡‡& )
ExonerationDto
‡‡* 8
(
‡‡8 9
)
‡‡9 :
{
··  

ConvenioId
‚‚# -
=
‚‚. /
entity
‚‚0 6
.
‚‚6 7

ConvenioId
‚‚7 A
,
‚‚A B

ServicioId
„„# -
=
„„. /
entity
„„0 6
.
„„6 7

ServicioId
„„7 A
,
„„A B
Servicio
‰‰# +
=
‰‰, -
service
‰‰. 5
.
‰‰5 6
Nombre
‰‰6 <
,
‰‰< =
TipoServicio
ÂÂ# /
=
ÂÂ0 1
service
ÂÂ2 9
.
ÂÂ9 :
TipoServicio
ÂÂ: F
.
ÂÂF G
Nombre
ÂÂG M
,
ÂÂM N
Valor
ÊÊ# (
=
ÊÊ) *
entity
ÊÊ+ 1
.
ÊÊ1 2
Valor
ÊÊ2 7
,
ÊÊ7 8
TipoExoneracionId
ÁÁ# 4
=
ÁÁ5 6
entity
ÁÁ7 =
.
ÁÁ= >
TipoExoneracionId
ÁÁ> O
,
ÁÁO P
TipoExoneracion
ËË# 2
=
ËË3 4
entity
ËË5 ;
.
ËË; <
TipoExoneracion
ËË< K
.
ËËK L
Nombre
ËËL R
,
ËËR S"
EntidadAuspicianteId
ÈÈ# 7
=
ÈÈ8 9
entity
ÈÈ: @
.
ÈÈ@ A"
EntidadAuspicianteId
ÈÈA U
,
ÈÈU V 
EntidadAuspiciante
ÍÍ# 5
=
ÍÍ6 7
entity
ÍÍ8 >
.
ÍÍ> ? 
EntidadAuspiciante
ÍÍ? Q
.
ÍÍQ R
Nombre
ÍÍR X
,
ÍÍX Y
PaisId
ÎÎ# )
=
ÎÎ* +
entity
ÎÎ, 2
.
ÎÎ2 3
PaisId
ÎÎ3 9
,
ÎÎ9 :
EdadInicial
ÏÏ# .
=
ÏÏ/ 0
entity
ÏÏ1 7
.
ÏÏ7 8
EdadInicial
ÏÏ8 C
,
ÏÏC D
	EdadFinal
ÌÌ# ,
=
ÌÌ- .
entity
ÌÌ/ 5
.
ÌÌ5 6
	EdadFinal
ÌÌ6 ?
,
ÌÌ? @
Discapacitado
ÓÓ# 0
=
ÓÓ1 2
entity
ÓÓ3 9
.
ÓÓ9 :
Discapacitado
ÓÓ: G
}
ÔÔ  
;
 
var
ÚÚ 
	entityDto
ÚÚ 
=
ÚÚ 
await
ÚÚ !
AsyncExecuter
ÚÚ" /
.
ÚÚ/ 0"
SingleOrDefaultAsync
ÚÚ0 D
(
ÚÚD E
queryableDto
ÚÚE Q
)
ÚÚQ R
;
ÚÚR S
return
ÙÙ 
	entityDto
ÙÙ 
;
ÙÙ 
}
ıı 	
public
˜˜ 
async
˜˜ 
Task
˜˜ 
<
˜˜ 
PagedResultDto
˜˜ (
<
˜˜( )
ExonerationDto
˜˜) 7
>
˜˜7 8
>
˜˜8 9"
GetExonerationsAsync
˜˜: N
(
˜˜N O
Guid
˜˜O S
agreementId
˜˜T _
,
˜˜_ `!
GetExoneracionInput
˜˜a t
input
˜˜u z
)
˜˜z {
{
¯¯ 	
await
˘˘ !
CheckGetPolicyAsync
˘˘ %
(
˘˘% &
)
˘˘& '
;
˘˘' (
var
˚˚ 
	queryable
˚˚ 
=
˚˚ 
await
˚˚ !#
exonerationRepository
˚˚" 7
.
˚˚7 8
GetQueryableAsync
˚˚8 I
(
˚˚I J
)
˚˚J K
;
˚˚K L
var
¸¸ 
queryableService
¸¸  
=
¸¸! "
await
¸¸# (
serviceRepository
¸¸) :
.
¸¸: ;
GetQueryableAsync
¸¸; L
(
¸¸L M
)
¸¸M N
;
¸¸N O
	queryable
˛˛ 
=
˛˛ 
	queryable
˛˛ !
.
˛˛! "
Where
˛˛" '
(
˛˛' (
p
˛˛( )
=>
˛˛* ,
p
˛˛- .
.
˛˛. /

ConvenioId
˛˛/ 9
==
˛˛: <
agreementId
˛˛= H
)
˛˛H I
;
˛˛I J
var
ÅÅ 

totalCount
ÅÅ 
=
ÅÅ 
await
ÅÅ "
AsyncExecuter
ÅÅ# 0
.
ÅÅ0 1

CountAsync
ÅÅ1 ;
(
ÅÅ; <
	queryable
ÅÅ< E
)
ÅÅE F
;
ÅÅF G
var
ÑÑ 
queryableDto
ÑÑ 
=
ÑÑ 
from
ÑÑ #
entity
ÑÑ$ *
in
ÑÑ+ -
	queryable
ÑÑ. 7
join
ÖÖ #
service
ÖÖ$ +
in
ÖÖ, .
queryableService
ÖÖ/ ?
on
ÖÖ@ B
entity
ÖÖC I
.
ÖÖI J

ServicioId
ÖÖJ T
equals
ÖÖU [
service
ÖÖ\ c
.
ÖÖc d
Id
ÖÖd f
select
ÜÜ %
new
ÜÜ& )
ExonerationDto
ÜÜ* 8
(
ÜÜ8 9
)
ÜÜ9 :
{
áá  

ConvenioId
àà# -
=
àà. /
entity
àà0 6
.
àà6 7

ConvenioId
àà7 A
,
ààA B

ServicioId
ââ# -
=
ââ. /
entity
ââ0 6
.
ââ6 7

ServicioId
ââ7 A
,
ââA B
Servicio
ää# +
=
ää, -
service
ää. 5
.
ää5 6
Nombre
ää6 <
,
ää< =
TipoServicio
ãã# /
=
ãã0 1
service
ãã2 9
.
ãã9 :
TipoServicio
ãã: F
.
ããF G
Nombre
ããG M
,
ããM N
Valor
åå# (
=
åå) *
entity
åå+ 1
.
åå1 2
Valor
åå2 7
,
åå7 8
TipoExoneracionId
çç# 4
=
çç5 6
entity
çç7 =
.
çç= >
TipoExoneracionId
çç> O
,
ççO P
TipoExoneracion
éé# 2
=
éé3 4
entity
éé5 ;
.
éé; <
TipoExoneracion
éé< K
.
ééK L
Nombre
ééL R
,
ééR S"
EntidadAuspicianteId
èè# 7
=
èè8 9
entity
èè: @
.
èè@ A"
EntidadAuspicianteId
èèA U
,
èèU V 
EntidadAuspiciante
êê# 5
=
êê6 7
entity
êê8 >
.
êê> ? 
EntidadAuspiciante
êê? Q
.
êêQ R
Nombre
êêR X
,
êêX Y
PaisId
ëë# )
=
ëë* +
entity
ëë, 2
.
ëë2 3
PaisId
ëë3 9
,
ëë9 :
EdadInicial
íí# .
=
íí/ 0
entity
íí1 7
.
íí7 8
EdadInicial
íí8 C
,
ííC D
	EdadFinal
ìì# ,
=
ìì- .
entity
ìì/ 5
.
ìì5 6
	EdadFinal
ìì6 ?
,
ìì? @
Discapacitado
îî# 0
=
îî1 2
entity
îî3 9
.
îî9 :
Discapacitado
îî: G
}
ïï  
;
ññ 
var
òò 

entityDtos
òò 
=
òò 
await
òò "
AsyncExecuter
òò# 0
.
òò0 1
ToListAsync
òò1 <
(
òò< =
queryableDto
òò= I
)
òòI J
;
òòJ K
return
öö 
new
öö 
PagedResultDto
öö %
<
öö% &
ExonerationDto
öö& 4
>
öö4 5
(
öö5 6

totalCount
õõ 
,
õõ 

entityDtos
úú 
)
ùù 
;
ùù 
}
ûû 	
public
†† 
async
†† 
Task
†† 
<
†† 
ListResultDto
†† '
<
††' (
ExonerationDto
††( 6
>
††6 7
>
††7 80
"ObtenerExoneracionPorServicioAsync
††9 [
(
††[ \
Guid
††\ `
	serviceId
††a j
)
††j k
{
††l m
var
°° 
	queryable
°° 
=
°° 
await
°° !#
exonerationRepository
°°" 7
.
°°7 8
GetQueryableAsync
°°8 I
(
°°I J
)
°°J K
;
°°K L
	queryable
¢¢ 
=
¢¢ 
	queryable
¢¢ !
.
¢¢! "
Where
¢¢" '
(
¢¢' (
x
¢¢( )
=>
¢¢* ,
x
¢¢- .
.
¢¢. /

ServicioId
¢¢/ 9
==
¢¢: <
	serviceId
¢¢= F
)
¢¢F G
;
¢¢G H
var
§§ 
queryableService
§§  
=
§§! "
await
§§# (
serviceRepository
§§) :
.
§§: ;
GetQueryableAsync
§§; L
(
§§L M
)
§§M N
;
§§N O
queryableService
•• 
=
•• 
queryableService
•• /
.
••/ 0
Where
••0 5
(
••5 6
x
••6 7
=>
••8 :
x
••; <
.
••< =
Id
••= ?
==
••@ B
	serviceId
••C L
)
••L M
;
••M N
var
ßß 
queryableDto
ßß 
=
ßß 
from
ßß #
entity
ßß$ *
in
ßß+ -
	queryable
ßß. 7
join
®® #
service
®®$ +
in
®®, .
queryableService
®®/ ?
on
®®@ B
entity
®®C I
.
®®I J

ServicioId
®®J T
equals
®®U [
service
®®\ c
.
®®c d
Id
®®d f
select
©© %
new
©©& )
ExonerationDto
©©* 8
(
©©8 9
)
©©9 :
{
™™  

ConvenioId
´´# -
=
´´. /
entity
´´0 6
.
´´6 7

ConvenioId
´´7 A
,
´´A B

ServicioId
¨¨# -
=
¨¨. /
entity
¨¨0 6
.
¨¨6 7

ServicioId
¨¨7 A
,
¨¨A B
Servicio
≠≠# +
=
≠≠, -
service
≠≠. 5
.
≠≠5 6
Nombre
≠≠6 <
,
≠≠< =
TipoServicio
ÆÆ# /
=
ÆÆ0 1
service
ÆÆ2 9
.
ÆÆ9 :
TipoServicio
ÆÆ: F
.
ÆÆF G
Nombre
ÆÆG M
,
ÆÆM N
Valor
ØØ# (
=
ØØ) *
entity
ØØ+ 1
.
ØØ1 2
Valor
ØØ2 7
,
ØØ7 8
TipoExoneracionId
∞∞# 4
=
∞∞5 6
entity
∞∞7 =
.
∞∞= >
TipoExoneracionId
∞∞> O
,
∞∞O P
TipoExoneracion
±±# 2
=
±±3 4
entity
±±5 ;
.
±±; <
TipoExoneracion
±±< K
.
±±K L
Nombre
±±L R
,
±±R S"
EntidadAuspicianteId
≤≤# 7
=
≤≤8 9
entity
≤≤: @
.
≤≤@ A"
EntidadAuspicianteId
≤≤A U
,
≤≤U V 
EntidadAuspiciante
≥≥# 5
=
≥≥6 7
entity
≥≥8 >
.
≥≥> ? 
EntidadAuspiciante
≥≥? Q
.
≥≥Q R
Nombre
≥≥R X
,
≥≥X Y
PaisId
¥¥# )
=
¥¥* +
entity
¥¥, 2
.
¥¥2 3
PaisId
¥¥3 9
,
¥¥9 :
EdadInicial
µµ# .
=
µµ/ 0
entity
µµ1 7
.
µµ7 8
EdadInicial
µµ8 C
,
µµC D
	EdadFinal
∂∂# ,
=
∂∂- .
entity
∂∂/ 5
.
∂∂5 6
	EdadFinal
∂∂6 ?
,
∂∂? @
Discapacitado
∑∑# 0
=
∑∑1 2
entity
∑∑3 9
.
∑∑9 :
Discapacitado
∑∑: G
}
∏∏  
;
∏∏  !
var
∫∫ 
resultadoDto
∫∫ 
=
∫∫ 
await
∫∫ #
AsyncExecuter
∫∫$ 1
.
∫∫1 2
ToListAsync
∫∫2 =
(
∫∫= >
queryableDto
∫∫> J
)
∫∫J K
;
∫∫K L
return
ºº 
new
ºº 
ListResultDto
ºº $
<
ºº$ %
ExonerationDto
ºº% 3
>
ºº3 4
(
ºº4 5
resultadoDto
ºº5 A
)
ººA B
;
ººB C
}
ΩΩ 	
}
ƒƒ 
}∆∆ ∂
tD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Convenio\EntidadAuspicianteAppService.cs
	namespace		 	
Mre		
 
.		 
Sb		 
.		  
UnidadAdministrativa		 %
.		% &
Servicio		& .
{

 
public 

class (
EntidadAuspicianteAppService -
:. /
CrudAppService 
< 
EntidadAuspiciante 
, !
EntidadAuspicianteDto 
, 
string 
> 
, )
IEntidadAuspicianteAppService !
{ 
private 
readonly %
EntidadAuspicianteManager 2%
EntidadAuspicianteManager3 L
;L M
public (
EntidadAuspicianteAppService +
(+ ,
IRepository, 7
<7 8
EntidadAuspiciante8 J
,J K
stringL R
>R S

repositoryT ^
,^ _%
EntidadAuspicianteManager !%
entidadAuspicianteManager" ;
); <
: 
base 
( 

repository 
) 
{ 	
this 
. %
EntidadAuspicianteManager *
=+ ,%
entidadAuspicianteManager- F
;F G
}!! 	
public## 
override## 
async## 
Task## "
<##" #!
EntidadAuspicianteDto### 8
>##8 9
CreateAsync##: E
(##E F!
EntidadAuspicianteDto##F [
input##\ a
)##a b
{$$ 	
await%% "
CheckCreatePolicyAsync%% (
(%%( )
)%%) *
;%%* +
await'' %
EntidadAuspicianteManager'' +
.''+ ,
ValidateCreateAsync'', ?
(''? @
input''@ E
.''E F
Id''F H
)''H I
;''I J
var)) 
entity)) 
=)) 
await)) 
MapToEntityAsync)) /
())/ 0
input))0 5
)))5 6
;))6 7
TryToSetTenantId++ 
(++ 
entity++ #
)++# $
;++$ %
await-- 

Repository-- 
.-- 
InsertAsync-- (
(--( )
entity--) /
,--/ 0
autoSave--1 9
:--9 :
true--; ?
)--? @
;--@ A
return// 
await// "
MapToGetOutputDtoAsync// /
(/// 0
entity//0 6
)//6 7
;//7 8
}00 	
public22 
async22 
Task22 
<22 
ListResultDto22 '
<22' ('
EntidadAuspicianteLookupDto22( C
>22C D
>22D E
GetLookupAsync22F T
(22T U
)22U V
{33 	
await44 #
CheckGetListPolicyAsync44 )
(44) *
)44* +
;44+ ,
var66 
list66 
=66 
await66 

Repository66 '
.66' (
GetListAsync66( 4
(664 5
)665 6
;666 7
return88 
new88 
ListResultDto88 $
<88$ %'
EntidadAuspicianteLookupDto88% @
>88@ A
(88A B
ObjectMapper99 
.99 
Map99  
<99  !
List99! %
<99% &
EntidadAuspiciante99& 8
>998 9
,999 :
List99; ?
<99? @'
EntidadAuspicianteLookupDto99@ [
>99[ \
>99\ ]
(99] ^
list99^ b
)99b c
):: 
;:: 
};; 	
}== 
}?? ˙
qD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Convenio\TipoExoneracionAppService.cs
	namespace		 	
Mre		
 
.		 
Sb		 
.		  
UnidadAdministrativa		 %
.		% &
Servicio		& .
{

 
public 

class %
TipoExoneracionAppService *
:+ ,
CrudAppService 
< 
TipoExoneracion 
, 
TipoExoneracionDto 
, 
string 
> 
, &
ITipoExoneracionAppService 
{ 
private 
readonly "
TipoExoneracionManager /"
TipoExoneracionManager0 F
;F G
public %
TipoExoneracionAppService (
(( )
IRepository) 4
<4 5
TipoExoneracion5 D
,D E
stringF L
>L M

repositoryN X
,X Y"
TipoExoneracionManager "
tipoExoneracionManager 5
)5 6
: 
base 
( 

repository 
) 
{ 	
this 
. "
TipoExoneracionManager '
=( )"
tipoExoneracionManager* @
;@ A
}!! 	
public## 
override## 
async## 
Task## "
<##" #
TipoExoneracionDto### 5
>##5 6
CreateAsync##7 B
(##B C
TipoExoneracionDto##C U
input##V [
)##[ \
{$$ 	
await%% "
CheckCreatePolicyAsync%% (
(%%( )
)%%) *
;%%* +
await'' "
TipoExoneracionManager'' (
.''( )
ValidateCreateAsync'') <
(''< =
input''= B
.''B C
Id''C E
)''E F
;''F G
var)) 
entity)) 
=)) 
await)) 
MapToEntityAsync)) /
())/ 0
input))0 5
)))5 6
;))6 7
TryToSetTenantId++ 
(++ 
entity++ #
)++# $
;++$ %
await-- 

Repository-- 
.-- 
InsertAsync-- (
(--( )
entity--) /
,--/ 0
autoSave--1 9
:--9 :
true--; ?
)--? @
;--@ A
return// 
await// "
MapToGetOutputDtoAsync// /
(/// 0
entity//0 6
)//6 7
;//7 8
}00 	
public22 
async22 
Task22 
<22 
ListResultDto22 '
<22' ($
TipoExoneracionLookupDto22( @
>22@ A
>22A B
GetLookupAsync22C Q
(22Q R
)22R S
{33 	
await44 #
CheckGetListPolicyAsync44 )
(44) *
)44* +
;44+ ,
var66 
list66 
=66 
await66 

Repository66 '
.66' (
GetListAsync66( 4
(664 5
)665 6
;666 7
return88 
new88 
ListResultDto88 $
<88$ %$
TipoExoneracionLookupDto88% =
>88= >
(88> ?
ObjectMapper99 
.99 
Map99  
<99  !
List99! %
<99% &
TipoExoneracion99& 5
>995 6
,996 7
List998 <
<99< =$
TipoExoneracionLookupDto99= U
>99U V
>99V W
(99W X
list99X \
)99\ ]
):: 
;:: 
};; 	
}== 
}?? ˇ~
ÑD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\FirmaElectronica\ConfigurarFirmaElectronicaAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% &
FirmaElectronica& 6
{ 
[ 
RemoteService 
( 
false 
) 
] 
[ 
	Authorize 
] 
public 

class 0
$ConfigurarFirmaElectronicaAppService 5
:6 7
ApplicationService8 J
,J K1
%IConfigurarFirmaElectronicaAppServiceL q
{ 
private 
const 
string  
TipoContenidoDefecto 1
=2 3
$str4 J
;J K
private 
const 
string 
ExtensionDefecto -
=. /
$str0 5
;5 6
private 
readonly 
string 
[  
]  !!
ExtensionesPermitidas" 7
=8 9
{: ;
$str< B
}B C
;C D
private 
readonly .
"IConfiguracionSignatarioAppService ;-
!configuracionSignatarioAppService< ]
;] ^
private   
readonly   '
UnidadAdministrativaManager   4%
administrativeUnitManager  5 N
;  N O
private!! 
readonly!! 
ICurrentUser!! %
currentUser!!& 1
;!!1 2
private"" 
readonly"" 
IStringLocalizer"" )
<"") *&
AdministrativeUnitResource""* D
>""D E
	localizer""F O
;""O P
private## 
readonly## $
IStringEncryptionService## 1
encryptionService##2 C
;##C D
public%% 0
$ConfigurarFirmaElectronicaAppService%% 3
(%%3 4.
"IConfiguracionSignatarioAppService&& .-
!configuracionSignatarioAppService&&/ P
,&&P Q'
UnidadAdministrativaManager'' '%
administrativeUnitManager''( A
,''A B
ICurrentUser(( 
currentUser(( %
,((% &
IStringLocalizer)) 
<)) &
AdministrativeUnitResource)) 7
>))7 8
	localizer))9 B
,))B C$
IStringEncryptionService** $
encryptionService**% 6
)**7 8
{++ 	
this,, 
.,, -
!configuracionSignatarioAppService,, 2
=,,3 4-
!configuracionSignatarioAppService,,5 V
;,,V W
this-- 
.-- %
administrativeUnitManager-- *
=--+ ,%
administrativeUnitManager--- F
;--F G
this.. 
... 
currentUser.. 
=.. 
currentUser.. *
;..* +
this// 
.// 
	localizer// 
=// 
	localizer// &
;//& '
this00 
.00 
encryptionService00 "
=00# $
encryptionService00% 6
;006 7
}11 	
public44 
async44 
Task44 
<44 
bool44 
>44 
EsPermitidaAsync44  0
(440 1
)441 2
{55 	
var77 
	resultado77 
=77 
false77 !
;77! "
Guid99 
?99 
	usuarioId99 
=99 
currentUser99 )
.99) *
Id99* ,
;99, -
if:: 
(:: 
!:: 
	usuarioId:: 
.:: 
HasValue:: #
)::# $
{;; 
throw<< 
new<< %
AbpAuthorizationException<< 3
(<<3 4
	localizer<<4 =
[<<= >
$str<<> t
]<<t u
)<<u v
;<<v w
}== 
	resultado?? 
=?? 
await?? %
administrativeUnitManager?? 7
.??7 8
EsSignatario??8 D
(??D E
	usuarioId??E N
.??N O
Value??O T
)??T U
;??U V
returnAA 
	resultadoAA 
;AA 
}BB 	
publicDD 
asyncDD 
TaskDD 
<DD 
boolDD 
>DD 
ExisteAsyncDD  +
(DD+ ,
)DD, -
{EE 	
varFF 
	resultadoFF 
=FF 
falseFF !
;FF! "
varHH 
esPermitidoHH 
=HH 
awaitHH #
EsPermitidaAsyncHH$ 4
(HH4 5
)HH5 6
;HH6 7
ifII 
(II 
esPermitidoII 
)II 
{JJ 
GuidKK 
?KK 
	usuarioIdKK 
=KK  !
currentUserKK" -
.KK- .
IdKK. 0
;KK0 1
varMM #
configuracionSignatarioMM +
=MM, -
awaitMM. 3-
!configuracionSignatarioAppServiceMM4 U
.MMU V
GetAsyncMMV ^
(MM^ _
	usuarioIdMM_ h
.MMh i
ValueMMi n
)MMn o
;MMo p
ifOO 
(OO #
configuracionSignatarioOO +
!=OO, .
nullOO/ 3
)OO3 4
{PP 
	resultadoQQ 
=QQ 
trueQQ  $
;QQ$ %
}RR 
}SS 
returnVV 
	resultadoVV 
;VV 
}WW 	
public\\ 
async\\ 
Task\\ 
<\\ 
bool\\ 
>\\ 
AgregarAsync\\  ,
(\\, -
	IFormFile\\- 6
archivoFirma\\7 C
,\\C D
string\\E K

claveFirma\\L V
)\\V W
{]] 	
var__ 
esPermitido__ 
=__ 
await__ #
EsPermitidaAsync__$ 4
(__4 5
)__5 6
;__6 7
if`` 
(`` 
!`` 
esPermitido`` 
)`` 
{aa 
throwbb 
newbb !
UserFriendlyExceptionbb .
(bb. /
	localizerbb/ 8
[bb8 9
$strbb9 Z
]bbZ [
)bb[ \
;bb\ ]
}cc 
ifff 
(ff 
archivoFirmaff 
==ff 
nullff  $
||ff% '
archivoFirmaff( 4
.ff4 5
Lengthff5 ;
==ff< >
$numff? @
)ff@ A
{gg 
throwhh 
newhh !
UserFriendlyExceptionhh /
(hh/ 0
	localizerhh0 9
[hh9 :
$strhh: d
]hhd e
)hhe f
;hhf g
}ii 
varkk 
	extensionkk 
=kk 
Pathkk  
.kk  !
GetExtensionkk! -
(kk- .
archivoFirmakk. :
.kk: ;
FileNamekk; C
)kkC D
.kkD E
ToLowerInvariantkkE U
(kkU V
)kkV W
;kkW X
ifmm 
(mm 
stringmm 
.mm 
IsNullOrEmptymm $
(mm$ %
	extensionmm% .
)mm. /
||mm0 2
!mm3 4!
ExtensionesPermitidasmm4 I
.mmI J
ContainsmmJ R
(mmR S
	extensionmmS \
)mm\ ]
)mm] ^
{nn 
throwoo 
newoo !
UserFriendlyExceptionoo /
(oo/ 0
	localizeroo0 9
[oo9 :
$stroo: n
,oon o
	extensionoop y
]ooy z
)ooz {
;oo{ |
}pp 
Guidss 
?ss 
	usuarioIdss 
=ss 
currentUserss )
.ss) *
Idss* ,
;ss, -
varvv 
nuevoRegistrovv 
=vv 
falsevv  %
;vv% &
varww #
configuracionSignatarioww '
=ww( )
awaitww* /-
!configuracionSignatarioAppServiceww0 Q
.wwQ R
GetAsyncwwR Z
(wwZ [
	usuarioIdww[ d
.wwd e
Valuewwe j
)wwj k
;wwk l
ifxx 
(xx #
configuracionSignatarioxx '
==xx( *
nullxx+ /
)xx/ 0
{yy #
configuracionSignatariozz '
=zz( )
newzz* -&
ConfiguracionSignatarioDtozz. H
(zzH I
)zzI J
;zzJ K
nuevoRegistro{{ 
={{ 
true{{  $
;{{$ %
}|| #
configuracionSignatario~~ #
.~~# $
	UsuarioId~~$ -
=~~. /
	usuarioId~~0 9
.~~9 :
Value~~: ?
;~~? @%
configuracionSignatario
ÄÄ #
.
ÄÄ# $
Clave
ÄÄ$ )
=
ÄÄ* +
encryptionService
ÄÄ, =
.
ÄÄ= >
Encrypt
ÄÄ> E
(
ÄÄE F

claveFirma
ÄÄF P
)
ÄÄP Q
;
ÄÄQ R%
configuracionSignatario
ÇÇ #
.
ÇÇ# $
NombreArchivo
ÇÇ$ 1
=
ÇÇ2 3
archivoFirma
ÇÇ4 @
.
ÇÇ@ A
FileName
ÇÇA I
;
ÇÇI J
using
ÑÑ 
(
ÑÑ 
var
ÑÑ 
memoryStream
ÑÑ #
=
ÑÑ$ %
new
ÑÑ& )
MemoryStream
ÑÑ* 6
(
ÑÑ6 7
)
ÑÑ7 8
)
ÑÑ8 9
{
ÖÖ 
archivoFirma
ÜÜ 
.
ÜÜ 
CopyTo
ÜÜ #
(
ÜÜ# $
memoryStream
ÜÜ$ 0
)
ÜÜ0 1
;
ÜÜ1 2%
configuracionSignatario
áá '
.
áá' (
Data
áá( ,
=
áá- .
memoryStream
áá/ ;
.
áá; <
ToArray
áá< C
(
ááC D
)
ááD E
;
ááE F
}
àà %
configuracionSignatario
ää #
.
ää# $
TipoContenido
ää$ 1
=
ää2 3"
TipoContenidoDefecto
ää4 H
;
ääH I%
configuracionSignatario
ãã #
.
ãã# $
	Extension
ãã$ -
=
ãã. /
ExtensionDefecto
ãã0 @
;
ãã@ A
if
éé 
(
éé 
nuevoRegistro
éé 
)
éé 
{
èè 
await
êê /
!configuracionSignatarioAppService
êê 7
.
êê7 8
CreateAsync
êê8 C
(
êêC D%
configuracionSignatario
êêD [
)
êê[ \
;
êê\ ]
}
ëë 
else
íí 
{
íí 
await
ìì /
!configuracionSignatarioAppService
ìì 7
.
ìì7 8
UpdateAsync
ìì8 C
(
ììC D%
configuracionSignatario
ììD [
.
ìì[ \
Id
ìì\ ^
,
ìì^ _%
configuracionSignatario
ìì` w
)
ììw x
;
ììx y
}
îî 
return
óó 
true
óó 
;
óó 
}
òò 	
public
öö 
Task
öö 
<
öö 
List
öö 
<
öö 
Guid
öö 
>
öö 
>
öö &
PoseenConfiguracionAsync
öö  8
(
öö8 9
List
öö9 =
<
öö= >
Guid
öö> B
>
ööB C
usuariosIds
ööD O
)
ööO P
{
õõ 	
throw
úú 
new
úú %
NotImplementedException
úú -
(
úú- .
)
úú. /
;
úú/ 0
}
ùù 	
public
üü 
async
üü 
Task
üü 
<
üü 
bool
üü 
>
üü 
EliminarAsync
üü  -
(
üü- .
)
üü. /
{
†† 	
var
¢¢ 
esPermitido
¢¢ 
=
¢¢ 
await
¢¢ #
EsPermitidaAsync
¢¢$ 4
(
¢¢4 5
)
¢¢5 6
;
¢¢6 7
if
££ 
(
££ 
!
££ 
esPermitido
££ 
)
££ 
{
§§ 
throw
•• 
new
•• #
UserFriendlyException
•• /
(
••/ 0
	localizer
••0 9
[
••9 :
$str
••: [
]
••[ \
)
••\ ]
;
••] ^
}
¶¶ 
Guid
®® 
?
®® 
	usuarioId
®® 
=
®® 
currentUser
®® )
.
®®) *
Id
®®* ,
;
®®, -
await
™™ /
!configuracionSignatarioAppService
™™ 3
.
™™3 4
DeleteAsync
™™4 ?
(
™™? @
	usuarioId
™™@ I
.
™™I J
Value
™™J O
)
™™O P
;
™™P Q
return
¨¨ 
true
¨¨ 
;
¨¨ 
}
≠≠ 	
public
±± 
async
±± 
Task
±± 
<
±± 
bool
±± 
>
±± *
EliminarFirmaSignatarioAsync
±±  <
(
±±< =(
EliminarFirmaSignatarioDto
±±= W
input
±±X ]
)
±±] ^
{
≤≤ 	
await
≥≥ 
CheckPolicyAsync
≥≥ "
(
≥≥" #+
AdministrativeUnitPermissions
≥≥# @
.
≥≥@ A%
SignatarioConfiguracion
≥≥A X
.
≥≥X Y
Delete
≥≥Y _
)
≥≥_ `
;
≥≥` a
Guid
µµ 
	usuarioId
µµ 
=
µµ 
input
µµ "
.
µµ" #
	UsuarioId
µµ# ,
;
µµ, -
var
∂∂ %
configuracionSignatario
∂∂ '
=
∂∂( )
await
∂∂* //
!configuracionSignatarioAppService
∂∂0 Q
.
∂∂Q R
GetAsync
∂∂R Z
(
∂∂Z [
	usuarioId
∂∂[ d
)
∂∂d e
;
∂∂e f
if
∑∑ 
(
∑∑ %
configuracionSignatario
∑∑ '
==
∑∑( *
null
∑∑+ /
)
∑∑/ 0
{
∏∏ 
throw
ππ 
new
ππ #
UserFriendlyException
ππ /
(
ππ/ 0
	localizer
ππ0 9
[
ππ9 :
$str
ππ: q
]
ππq r
)
ππr s
;
ππs t
}
∫∫ 
await
ΩΩ /
!configuracionSignatarioAppService
ΩΩ 3
.
ΩΩ3 4
DeleteAsync
ΩΩ4 ?
(
ΩΩ? @
	usuarioId
ΩΩ@ I
)
ΩΩI J
;
ΩΩJ K
return
ææ 
true
ææ 
;
ææ 
}
øø 	
public
¡¡ 
async
¡¡ 
Task
¡¡ 
<
¡¡ +
ConfigurarFirmaElectronicaDto
¡¡ 7
>
¡¡7 8
ObtenerAsync
¡¡9 E
(
¡¡E F-
ConfigurarFirmaElectronicaInput
¡¡F e
input
¡¡f k
)
¡¡k l
{
¬¬ 	
await
√√ 
CheckPolicyAsync
√√ "
(
√√" #+
AdministrativeUnitPermissions
√√# @
.
√√@ A%
SignatarioConfiguracion
√√A X
.
√√X Y
Default
√√Y `
)
√√` a
;
√√a b
Guid
≈≈ 
	usuarioId
≈≈ 
=
≈≈ 
input
≈≈ "
.
≈≈" #
	UsuarioId
≈≈# ,
;
≈≈, -
var
∆∆ %
configuracionSignatario
∆∆ '
=
∆∆( )
await
∆∆* //
!configuracionSignatarioAppService
∆∆0 Q
.
∆∆Q R
GetAsync
∆∆R Z
(
∆∆Z [
	usuarioId
∆∆[ d
)
∆∆d e
;
∆∆e f
if
«« 
(
«« %
configuracionSignatario
«« '
==
««( *
null
««+ /
)
««/ 0
{
»» 
return
…… 
null
…… 
;
…… 
}
   
var
ÕÕ 
	resultado
ÕÕ 
=
ÕÕ 
new
ÕÕ +
ConfigurarFirmaElectronicaDto
ÕÕ  =
(
ÕÕ= >
)
ÕÕ> ?
;
ÕÕ? @
	resultado
œœ 
.
œœ 
Clave
œœ 
=
œœ 
encryptionService
œœ /
.
œœ/ 0
Decrypt
œœ0 7
(
œœ7 8%
configuracionSignatario
œœ8 O
.
œœO P
Clave
œœP U
)
œœU V
;
œœV W
	resultado
–– 
.
–– 
Data
–– 
=
–– %
configuracionSignatario
–– 4
.
––4 5
Data
––5 9
;
––9 :
	resultado
—— 
.
—— 
NombreArchivo
—— #
=
——$ %%
configuracionSignatario
——& =
.
——= >
NombreArchivo
——> K
;
——K L
	resultado
““ 
.
““ 
TipoContenido
““ #
=
““$ %%
configuracionSignatario
““& =
.
““= >
TipoContenido
““> K
;
““K L
	resultado
”” 
.
”” 
	UsuarioId
”” 
=
””  !%
configuracionSignatario
””" 9
.
””9 :
	UsuarioId
””: C
;
””C D
return
’’ 
	resultado
’’ 
;
’’ 
}
÷÷ 	
}
◊◊ 
}ÿÿ Œ
nD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Geografica\GeograficaAppService.cs
	namespace

 	
Mre


 
.

 
Sb

 
.

  
UnidadAdministrativa

 %
.

% &

Geografica

& 0
{ 
public 

class  
GeograficaAppService %
:& '
ApplicationService( :
,: ;!
IGeograficaAppService< Q
{ 
private 
readonly 
CountryData $
countryData% 0
;0 1
public  
GeograficaAppService #
(# $
CountryData$ /
countryData0 ;
); <
{ 	
this 
. 
countryData 
= 
countryData *
;* +
} 	
public 
async 
Task 
< 
ListResultDto '
<' (

CountryDto( 2
>2 3
>3 4
GetCountriesAsync5 F
(F G
)G H
{ 	
var 
	countries 
= 
countryData '
.' (
GetAllCountry( 5
(5 6
)6 7
;7 8
return 
new 
ListResultDto $
<$ %

CountryDto% /
>/ 0
(0 1
ObjectMapper 
. 
Map  
<  !
IEnumerable! ,
<, -
Country- 4
>4 5
,5 6
List7 ;
<; <

CountryDto< F
>F G
>G H
(H I
	countriesI R
)R S
) 
; 
} 	
public 
async 
Task 
< 

CountryDto $
>$ %
GetCountryAsync& 5
(5 6
string6 <
countryCode= H
)H I
{ 	
var 
country 
= 
countryData %
.% &

GetCountry& 0
(0 1
countryCode1 <
)< =
;= >
return   
ObjectMapper   
.    
Map    #
<  # $
Country  $ +
,  + ,

CountryDto  - 7
>  7 8
(  8 9
country  9 @
)  @ A
;  A B
}!! 	
public## 
async## 
Task## 
<## 
ListResultDto## '
<##' (
	RegionDto##( 1
>##1 2
>##2 3'
GetRegionByCountryCodeAsync##4 O
(##O P
string##P V
countryCode##W b
)##b c
{$$ 	
var%% 
regions%% 
=%% 
countryData%% %
.%%% &"
GetRegionByCountryCode%%& <
(%%< =
countryCode%%= H
)%%H I
;%%I J
return'' 
new'' 
ListResultDto'' $
<''$ %
	RegionDto''% .
>''. /
(''/ 0
ObjectMapper(( 
.(( 
Map(( !
<((! "
List((" &
<((& '
Region((' -
>((- .
,((. /
List((0 4
<((4 5
	RegionDto((5 >
>((> ?
>((? @
(((@ A
regions((A H
)((H I
))) 
;)) 
}++ 	
},, 
}// ÷2
kD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Permiso\LimpiarCachePermisos.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% &'
UnidadAdministrativaPermiso& A
{ 
public 

class  
LimpiarCachePermisos %
:& '$
IDistributedEventHandler( @
<@ A
EntityCreatedEtoA Q
<Q R
PermissionGrantEtoR d
>d e
>e f
, $
IDistributedEventHandler &
<& '
EntityDeletedEto' 7
<7 8
PermissionGrantEto8 J
>J K
>K L
, $
IDistributedEventHandler &
<& '
EntityUpdatedEto' 7
<7 8
PermissionGrantEto8 J
>J K
>K L
,  
ITransientDependency "
{ 
	protected 
ICurrentTenant  
CurrentTenant! .
{/ 0
get1 4
;4 5
}6 7
	protected 
ILogger 
<  
LimpiarCachePermisos .
>. /
Logger0 6
{7 8
get9 <
;< =
}> ?
	protected 
IDistributedCache #
<# $$
PermissionGrantCacheItem$ <
>< =
Cache> C
{D E
getF I
;I J
}K L
public  
LimpiarCachePermisos #
(# $
IDistributedCache 
< $
PermissionGrantCacheItem 6
>6 7
cache8 =
,= >
ICurrentTenant 
currentTenant (
,( )
ILogger 
<  
LimpiarCachePermisos (
>( )
logger* 0
)0 1
{ 	
Cache 
= 
cache 
; 
CurrentTenant   
=   
currentTenant   )
;  ) *
Logger!! 
=!! 
logger!! 
;!! 
}"" 	
public%% 
async%% 
Task%% 
HandleEventAsync%% *
(%%* +
EntityCreatedEto%%+ ;
<%%; <
PermissionGrantEto%%< N
>%%N O
	eventData%%P Y
)%%Y Z
{&& 	
Logger'' 
.'' 
LogDebug'' 
('' 
$str'' U
,''U V
nameof(( 
((( 
PermissionGrantEto(( )
)(() *
,((* +
$")) 
{)) 
	eventData))  
.))  !
Entity))! '
.))' (
Name))( ,
})), -
$str))- .
{)). /
	eventData))/ 8
.))8 9
Entity))9 ?
.))? @
ProviderKey))@ K
}))K L
"))L M
)))M N
;))N O
await++ 
LimpiarAsync++ 
(++ 
	eventData++ (
.++( )
Entity++) /
)++/ 0
;++0 1
}-- 	
public11 
async11 
Task11 
HandleEventAsync11 *
(11* +
EntityDeletedEto11+ ;
<11; <
PermissionGrantEto11< N
>11N O
	eventData11P Y
)11Y Z
{22 	
Logger33 
.33 
LogDebug33 
(33 
$str33 U
,33U V
nameof44 
(44 
PermissionGrantEto44 (
)44( )
,44) *
$"55 
{55 
	eventData55 
.55  
Entity55  &
.55& '
Name55' +
}55+ ,
$str55, -
{55- .
	eventData55. 7
.557 8
Entity558 >
.55> ?
ProviderKey55? J
}55J K
"55K L
)55L M
;55M N
await77 
LimpiarAsync77 
(77 
	eventData77 (
.77( )
Entity77) /
)77/ 0
;770 1
}88 	
public:: 
async:: 
Task:: 
HandleEventAsync:: *
(::* +
EntityUpdatedEto::+ ;
<::; <
PermissionGrantEto::< N
>::N O
	eventData::P Y
)::Y Z
{;; 	
Logger<< 
.<< 
LogDebug<< 
(<< 
$str<< U
,<<U V
nameof== 
(== 
PermissionGrantEto== '
)==' (
,==( )
$">> 
{>> 
	eventData>> 
.>> 
Entity>> %
.>>% &
Name>>& *
}>>* +
$str>>+ ,
{>>, -
	eventData>>- 6
.>>6 7
Entity>>7 =
.>>= >
ProviderKey>>> I
}>>I J
">>J K
)>>K L
;>>L M
await@@ 
LimpiarAsync@@ 
(@@ 
	eventData@@ (
.@@( )
Entity@@) /
)@@/ 0
;@@0 1
}AA 	
	protectedDD 
virtualDD 
asyncDD 
TaskDD  $
LimpiarAsyncDD% 1
(DD1 2
PermissionGrantEtoDD2 D
	eventDataDDE N
)DDN O
{EE 	
varGG 
cacheKeyGG 
=GG 
CalculateCacheKeyGG ,
(GG, -
	eventDataHH 
.HH 
NameHH  
,HH  !
	eventDataII 
.II 
ProviderNameII (
,II( )
	eventDataJJ 
.JJ 
ProviderKeyJJ '
)KK 
;KK 
usingNN 
(NN 
CurrentTenantNN  
.NN  !
ChangeNN! '
(NN' (
	eventDataNN( 1
.NN1 2
TenantIdNN2 :
)NN: ;
)NN; <
{OO 
awaitPP 
CachePP 
.PP 
RemoveAsyncPP '
(PP' (
cacheKeyPP( 0
)PP0 1
;PP1 2
}QQ 
}RR 	
	protectedTT 
virtualTT 
stringTT  
CalculateCacheKeyTT! 2
(TT2 3
stringTT3 9
nameTT: >
,TT> ?
stringTT@ F
providerNameTTG S
,TTS T
stringTTU [
providerKeyTT\ g
)TTg h
{UU 	
returnVV $
PermissionGrantCacheItemVV +
.VV+ ,
CalculateCacheKeyVV, =
(VV= >
nameVV> B
,VVB C
providerNameVVD P
,VVP Q
providerKeyVVR ]
)VV] ^
;VV^ _
}WW 	
}XX 
}YY Ù
iD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Permiso\PermissionGrantEto.cs
	namespace 	
Mre
 
. 
Sb 
. 
Base 
. 
Permiso 
{ 
public 

class 
PermissionGrantEto #
{ 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ProviderName		 "
{		# $
get		% (
;		( )
set		* -
;		- .
}		/ 0
public 
string 
ProviderKey !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
Guid 
? 
TenantId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} 
gD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Servicio\CargoAppService.cs
	namespace		 	
Mre		
 
.		 
Sb		 
.		  
UnidadAdministrativa		 %
.		% &
Servicio		& .
{

 
public 

class 
CargoAppService  
:! "
CrudAppService 
< 
Cargo 
, 
CargoDto 
, 
string 
> 
, 
ICargoAppService 
{ 
private 
readonly 
CargoManager %
PositionManager& 5
;5 6
public 
CargoAppService 
( 
IRepository *
<* +
Cargo+ 0
,0 1
string2 8
>8 9

repository: D
,D E
CargoManager 
positionManager $
)$ %
: 
base 
( 

repository 
) 
{ 	
this 
. 
PositionManager  
=! "
positionManager# 2
;2 3
DeletePolicyName 
= )
AdministrativeUnitPermissions <
.< =
Position= E
.E F
DeleteF L
;L M
} 	
public!! 
override!! 
async!! 
Task!! "
<!!" #
CargoDto!!# +
>!!+ ,
CreateAsync!!- 8
(!!8 9
CargoDto!!9 A
input!!B G
)!!G H
{"" 	
await## "
CheckCreatePolicyAsync## (
(##( )
)##) *
;##* +
await%% 
PositionManager%% !
.%%! "
ValidateCreateAsync%%" 5
(%%5 6
input%%6 ;
.%%; <
Id%%< >
)%%> ?
;%%? @
var'' 
entity'' 
='' 
await'' 
MapToEntityAsync'' /
(''/ 0
input''0 5
)''5 6
;''6 7
TryToSetTenantId)) 
()) 
entity)) #
)))# $
;))$ %
await++ 

Repository++ 
.++ 
InsertAsync++ (
(++( )
entity++) /
,++/ 0
autoSave++1 9
:++9 :
true++; ?
)++? @
;++@ A
return-- 
await-- "
MapToGetOutputDtoAsync-- /
(--/ 0
entity--0 6
)--6 7
;--7 8
}.. 	
public00 
async00 
Task00 
<00 
ListResultDto00 '
<00' (
CargoLookupDto00( 6
>006 7
>007 8
GetLookupAsync009 G
(00G H
)00H I
{11 	
await22 #
CheckGetListPolicyAsync22 )
(22) *
)22* +
;22+ ,
var44 
list44 
=44 
await44 

Repository44 '
.44' (
GetListAsync44( 4
(444 5
)445 6
;446 7
return66 
new66 
ListResultDto66 $
<66$ %
CargoLookupDto66% 3
>663 4
(664 5
ObjectMapper77 
.77 
Map77  
<77  !
List77! %
<77% &
Cargo77& +
>77+ ,
,77, -
List77. 2
<772 3
CargoLookupDto773 A
>77A B
>77B C
(77C D
list77D H
)77H I
)88 
;88 
}99 	
};; 
}== π
gD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Servicio\LibroAppService.cs
	namespace		 	
Mre		
 
.		 
Sb		 
.		  
UnidadAdministrativa		 %
.		% & 
UnidadAdministrativa		& :
{

 
public 

class 
LibroAppService  
:! "
CrudAppService 
< 
Libro 
, 
LibroDto 
, 
string 
> 
, 
ILibroAppService 
{ 
private 
readonly 
LibroManager %
BookManager& 1
;1 2
public 
LibroAppService 
( 
IRepository *
<* +
Libro+ 0
,0 1
string2 8
>8 9

repository: D
,D E
LibroManager 
BookManager  
)  !
: 
base 
( 

repository 
) 
{ 	
this 
. 
BookManager 
= 
BookManager *
;* +
} 	
public!! 
override!! 
async!! 
Task!! "
<!!" #
LibroDto!!# +
>!!+ ,
CreateAsync!!- 8
(!!8 9
LibroDto!!9 A
input!!B G
)!!G H
{"" 	
await## "
CheckCreatePolicyAsync## (
(##( )
)##) *
;##* +
await%% 
BookManager%% 
.%% 
ValidateCreateAsync%% 1
(%%1 2
input%%2 7
.%%7 8
Id%%8 :
)%%: ;
;%%; <
var'' 
entity'' 
='' 
await'' 
MapToEntityAsync'' /
(''/ 0
input''0 5
)''5 6
;''6 7
TryToSetTenantId)) 
()) 
entity)) #
)))# $
;))$ %
await++ 

Repository++ 
.++ 
InsertAsync++ (
(++( )
entity++) /
,++/ 0
autoSave++1 9
:++9 :
true++; ?
)++? @
;++@ A
return-- 
await-- "
MapToGetOutputDtoAsync-- /
(--/ 0
entity--0 6
)--6 7
;--7 8
}.. 	
public00 
async00 
Task00 
<00 
ListResultDto00 '
<00' (
LibroLookupDto00( 6
>006 7
>007 8
GetLookupAsync009 G
(00G H
)00H I
{11 	
await22 #
CheckGetListPolicyAsync22 )
(22) *
)22* +
;22+ ,
var44 
list44 
=44 
await44 

Repository44 '
.44' (
GetListAsync44( 4
(444 5
)445 6
;446 7
return66 
new66 
ListResultDto66 $
<66$ %
LibroLookupDto66% 3
>663 4
(664 5
ObjectMapper77 
.77 
Map77  
<77  !
List77! %
<77% &
Libro77& +
>77+ ,
,77, -
List77. 2
<772 3
LibroLookupDto773 A
>77A B
>77B C
(77C D
list77D H
)77H I
)88 
;88 
}99 	
};; 
}== ∆i
qD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Servicio\SecuencialLibroAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% &
Servicio& .
{ 
public 

class %
SecuencialLibroAppService *
:+ ,
CrudAppService 
< 
SecuencialLibro
 
, 
SecuencialLibroDto
 
, 
Guid
 
, *
PagedAndSortedResultRequestDto
 (
,( )-
!CrearActualizarSecuencialLibroDto
 +
>+ ,
,, -&
ISecuencialLibroAppService  
{ 
private 
readonly "
SecuencialLibroManager /!
sequentialBookManager0 E
;E F
public %
SecuencialLibroAppService (
(( )
IRepository) 4
<4 5
SecuencialLibro5 D
,D E
GuidF J
>J K

repositoryL V
,V W"
SecuencialLibroManager !
sequentialBookManager 4
)4 5
: 
base 
( 

repository 
) 
{ 	
this 
. !
sequentialBookManager &
=' (!
sequentialBookManager) >
;> ?
}## 	
public%% 
override%% 
async%% 
Task%% "
<%%" #
SecuencialLibroDto%%# 5
>%%5 6
GetAsync%%7 ?
(%%? @
Guid%%@ D
id%%E G
)%%G H
{&& 	
await'' 
CheckGetPolicyAsync'' %
(''% &
)''& '
;''' (
var)) 
	queryable)) 
=)) 
await)) !

Repository))" ,
.)), -
GetQueryableAsync))- >
())> ?
)))? @
;))@ A
	queryable** 
=** 
	queryable** !
.**! "
Where**" '
(**' (
a**( )
=>*** ,
a**- .
.**. /
Id**/ 1
==**2 4
id**5 7
)**7 8
;**8 9
var,, 
queryableDto,, 
=,, 
	queryable,, (
.,,( )
Select,,) /
(,,/ 0
entity,,0 6
=>,,7 9
new,,: =
SecuencialLibroDto,,> P
(,,P Q
),,Q R
{-- 
Id.. 
=.. 
entity.. 
... 
Id.. 
,.. 

ServicioId// 
=// 
entity// #
.//# $

ServicioId//$ .
,//. /"
UnidadAdministrativaId00 &
=00' (
entity00) /
.00/ 0"
UnidadAdministrativaId000 F
,00F G
LibroId11 
=11 
entity11  
.11  !
LibroId11! (
,11( )
Libro22 
=22 
entity22 
.22 
Libro22 $
.22$ %
Nombre22% +
,22+ ,"
NumeroPaginaPorVolumen33 &
=33' (
entity33) /
.33/ 0"
NumeroPaginaPorVolumen330 F
,33F G
VolumenActual44 
=44 
entity44  &
.44& '
VolumenActual44' 4
,444 5
SiguientePagina55 
=55  !
entity55" (
.55( )
SiguientePagina55) 8
,558 9
Anio66 
=66 
entity66 
.66 
Anio66 "
}77 
)77 
;77 
var99 
	entityDto99 
=99 
await99 !
AsyncExecuter99" /
.99/ 0
FirstOrDefaultAsync990 C
(99C D
queryableDto99D P
)99P Q
;99Q R
return;; 
	entityDto;; 
;;; 
}<< 	
public>> 
override>> 
async>> 
Task>> "
<>>" #
PagedResultDto>># 1
<>>1 2
SecuencialLibroDto>>2 D
>>>D E
>>>E F
GetListAsync>>G S
(>>S T*
PagedAndSortedResultRequestDto>>T r
input>>s x
)>>x y
{?? 	
awaitAA #
CheckGetListPolicyAsyncAA )
(AA) *
)AA* +
;AA+ ,
varCC 
	queryableCC 
=CC 
awaitCC !$
CreateFilteredQueryAsyncCC" :
(CC: ;
inputCC; @
)CC@ A
;CCA B
varEE 

totalCountEE 
=EE 
awaitEE "
AsyncExecuterEE# 0
.EE0 1

CountAsyncEE1 ;
(EE; <
	queryableEE< E
)EEE F
;EEF G
	queryableGG 
=GG 
ApplySortingGG $
(GG$ %
	queryableGG% .
,GG. /
inputGG0 5
)GG5 6
;GG6 7
	queryableHH 
=HH 
ApplyPagingHH #
(HH# $
	queryableHH$ -
,HH- .
inputHH/ 4
)HH4 5
;HH5 6
varJJ 
queryableDtoJJ 
=JJ 
	queryableJJ (
.JJ( )
SelectJJ) /
(JJ/ 0
entityJJ0 6
=>JJ7 9
newJJ: =
SecuencialLibroDtoJJ> P
(JJP Q
)JJQ R
{KK 
IdLL 
=LL 
entityLL 
.LL 
IdLL 
,LL 

ServicioIdMM 
=MM 
entityMM #
.MM# $

ServicioIdMM$ .
,MM. /"
UnidadAdministrativaIdNN &
=NN' (
entityNN) /
.NN/ 0"
UnidadAdministrativaIdNN0 F
,NNF G
LibroIdOO 
=OO 
entityOO  
.OO  !
LibroIdOO! (
,OO( )
LibroPP 
=PP 
entityPP 
.PP 
LibroPP $
.PP$ %
NombrePP% +
,PP+ ,"
NumeroPaginaPorVolumenQQ &
=QQ' (
entityQQ) /
.QQ/ 0"
NumeroPaginaPorVolumenQQ0 F
,QQF G
VolumenActualRR 
=RR 
entityRR  &
.RR& '
VolumenActualRR' 4
,RR4 5
SiguientePaginaSS 
=SS  !
entitySS" (
.SS( )
SiguientePaginaSS) 8
,SS8 9
AnioTT 
=TT 
entityTT 
.TT 
AnioTT "
}UU 
)UU 
;UU 
varWW 

entityDtosWW 
=WW 
awaitWW "
AsyncExecuterWW# 0
.WW0 1
ToListAsyncWW1 <
(WW< =
queryableDtoWW= I
)WWI J
;WWJ K
returnYY 
newYY 
PagedResultDtoYY %
<YY% &
SecuencialLibroDtoYY& 8
>YY8 9
(YY9 :

totalCountZZ 
,ZZ 

entityDtos[[ 
)\\ 
;\\ 
}]] 	
public__ 
async__ 
Task__ 
<__ 
PagedResultDto__ (
<__( )
SecuencialLibroDto__) ;
>__; <
>__< =/
#GetByAdministrativeUnitServiceAsync__> a
(__a b
Guid__b f
	serviceId__g p
,__p q
Guid__r v!
administrativeUnitId	__w ã
)
__ã å
{`` 	
awaitaa 
CheckGetPolicyAsyncaa %
(aa% &
)aa& '
;aa' (
varcc 
	queryablecc 
=cc 
awaitcc !

Repositorycc" ,
.cc, -
GetQueryableAsynccc- >
(cc> ?
)cc? @
;cc@ A
	queryabledd 
=dd 
	queryabledd !
.dd! "
Wheredd" '
(dd' (
add( )
=>dd* ,
add- .
.dd. /

ServicioIddd/ 9
==dd: <
	serviceIddd= F
)ddF G
;ddG H
	queryableee 
=ee 
	queryableee !
.ee! "
Whereee" '
(ee' (
aee( )
=>ee* ,
aee- .
.ee. /"
UnidadAdministrativaIdee/ E
==eeF H 
administrativeUnitIdeeI ]
)ee] ^
;ee^ _
vargg 

totalCountgg 
=gg 
awaitgg "
AsyncExecutergg# 0
.gg0 1

CountAsyncgg1 ;
(gg; <
	queryablegg< E
)ggE F
;ggF G
varii 
queryableDtoii 
=ii 
	queryableii (
.ii( )
Selectii) /
(ii/ 0
entityii0 6
=>ii7 9
newii: =
SecuencialLibroDtoii> P
(iiP Q
)iiQ R
{jj 
Idkk 
=kk 
entitykk 
.kk 
Idkk 
,kk 

ServicioIdll 
=ll 
entityll #
.ll# $

ServicioIdll$ .
,ll. /"
UnidadAdministrativaIdmm &
=mm' (
entitymm) /
.mm/ 0"
UnidadAdministrativaIdmm0 F
,mmF G
LibroIdnn 
=nn 
entitynn  
.nn  !
LibroIdnn! (
,nn( )
Librooo 
=oo 
entityoo 
.oo 
Librooo $
.oo$ %
Nombreoo% +
,oo+ ,"
NumeroPaginaPorVolumenpp &
=pp' (
entitypp) /
.pp/ 0"
NumeroPaginaPorVolumenpp0 F
,ppF G
VolumenActualqq 
=qq 
entityqq  &
.qq& '
VolumenActualqq' 4
,qq4 5
SiguientePaginarr 
=rr  !
entityrr" (
.rr( )
SiguientePaginarr) 8
,rr8 9
Anioss 
=ss 
entityss 
.ss 
Anioss "
}tt 
)tt 
;tt 
varvv 

entityDtosvv 
=vv 
awaitvv "
AsyncExecutervv# 0
.vv0 1
ToListAsyncvv1 <
(vv< =
queryableDtovv= I
)vvI J
;vvJ K
returnxx 
newxx 
PagedResultDtoxx %
<xx% &
SecuencialLibroDtoxx& 8
>xx8 9
(xx9 :

totalCountyy 
,yy 

entityDtoszz 
){{ 
;{{ 
}|| 	
public~~ 
override~~ 
async~~ 
Task~~ "
<~~" #
SecuencialLibroDto~~# 5
>~~5 6
CreateAsync~~7 B
(~~B C-
!CrearActualizarSecuencialLibroDto~~C d
input~~e j
)~~j k
{ 	
await
ÄÄ $
CheckCreatePolicyAsync
ÄÄ (
(
ÄÄ( )
)
ÄÄ) *
;
ÄÄ* +
var
ÇÇ 
entity
ÇÇ 
=
ÇÇ 
await
ÇÇ #
sequentialBookManager
ÇÇ 4
.
ÇÇ4 5
CreateAsync
ÇÇ5 @
(
ÇÇ@ A
GuidGenerator
ÇÇA N
.
ÇÇN O
Create
ÇÇO U
(
ÇÇU V
)
ÇÇV W
,
ÇÇW X
	serviceId
ÉÉ 
:
ÉÉ 
input
ÉÉ  
.
ÉÉ  !

ServicioId
ÉÉ! +
,
ÉÉ+ ,"
administrativeUnitId
ÑÑ $
:
ÑÑ$ %
input
ÑÑ& +
.
ÑÑ+ ,$
UnidadAdministrativaId
ÑÑ, B
,
ÑÑB C
bookId
ÖÖ 
:
ÖÖ 
input
ÖÖ 
.
ÖÖ 
LibroId
ÖÖ %
,
ÖÖ% & 
numberPageByVolume
ÜÜ "
:
ÜÜ" #
input
ÜÜ$ )
.
ÜÜ) *$
NumeroPaginaPorVolumen
ÜÜ* @
,
ÜÜ@ A
currentVolume
áá 
:
áá 
input
áá $
.
áá$ %
VolumenActual
áá% 2
,
áá2 3
nextPage
àà 
:
àà 
input
àà 
.
àà  
SiguientePagina
àà  /
,
àà/ 0
year
ââ 
:
ââ 
input
ââ 
.
ââ 
Anio
ââ  
)
ââ  !
;
ââ! "
TryToSetTenantId
ãã 
(
ãã 
entity
ãã #
)
ãã# $
;
ãã$ %
await
çç 

Repository
çç 
.
çç 
InsertAsync
çç (
(
çç( )
entity
çç) /
,
çç/ 0
autoSave
çç1 9
:
çç9 :
true
çç; ?
)
çç? @
;
çç@ A
return
èè 
await
èè 
GetAsync
èè !
(
èè! "
entity
èè" (
.
èè( )
Id
èè) +
)
èè+ ,
;
èè, -
}
êê 	
public
íí 
override
íí 
async
íí 
Task
íí "
<
íí" # 
SecuencialLibroDto
íí# 5
>
íí5 6
UpdateAsync
íí7 B
(
ííB C
Guid
ííC G
id
ííH J
,
ííJ K/
!CrearActualizarSecuencialLibroDto
ííL m
input
íín s
)
íís t
{
ìì 	
await
îî $
CheckUpdatePolicyAsync
îî (
(
îî( )
)
îî) *
;
îî* +
var
ññ 
entity
ññ 
=
ññ 
await
ññ  
GetEntityByIdAsync
ññ 1
(
ññ1 2
id
ññ2 4
)
ññ4 5
;
ññ5 6
await
ôô 
MapToEntityAsync
ôô "
(
ôô" #
input
ôô# (
,
ôô( )
entity
ôô* 0
)
ôô0 1
;
ôô1 2
await
öö 

Repository
öö 
.
öö 
UpdateAsync
öö (
(
öö( )
entity
öö) /
,
öö/ 0
autoSave
öö1 9
:
öö9 :
true
öö; ?
)
öö? @
;
öö@ A
return
úú 
await
úú 
GetAsync
úú !
(
úú! "
entity
úú" (
.
úú( )
Id
úú) +
)
úú+ ,
;
úú, -
}
ùù 	
}
ûû 
}üü Æ{
jD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Servicio\ServicioAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% &
Servicio& .
{ 
public 

class 
ServicioAppService #
:$ %
CrudAppService 
< 
Dominio
 
. 
Servicio 
, 
ServicioDto
 
, 
Guid
 
, 
GetServicioInput
 
, &
CrearActualizarServicioDto
 $
>$ %
,% &
IServicioAppService 
{ 
private 
readonly 
IStringLocalizer )
<) *&
AdministrativeUnitResource* D
>D E
	localizerF O
;O P
public 
ServicioManager 
ServiceManager -
{. /
get0 3
;3 4
}5 6
public 
ServicioAppService !
(! "
IRepository" -
<- .
Dominio. 5
.5 6
Servicio6 >
,> ?
Guid@ D
>D E

repositoryF P
,P Q
ServicioManager 
serviceManager *
,* +
IStringLocalizer   
<   &
AdministrativeUnitResource   7
>  7 8
	localizer  9 B
)  B C
:!! 
base!! 
(!! 

repository!! 
)!! 
{"" 	
ServiceManager## 
=## 
serviceManager## +
;##+ ,
this$$ 
.$$ 
	localizer$$ 
=$$ 
	localizer$$ &
;$$& '
CreatePolicyName** 
=** )
AdministrativeUnitPermissions** <
.**< =
Service**= D
.**D E
Create**E K
;**K L
UpdatePolicyName++ 
=++ )
AdministrativeUnitPermissions++ <
.++< =
Service++= D
.++D E
Update++E K
;++K L
DeletePolicyName,, 
=,, )
AdministrativeUnitPermissions,, <
.,,< =
Service,,= D
.,,D E
Delete,,E K
;,,K L
}.. 	
public00 
override00 
async00 
Task00 "
<00" #
ServicioDto00# .
>00. /
GetAsync000 8
(008 9
Guid009 =
id00> @
)00@ A
{11 	
await22 
CheckGetPolicyAsync22 %
(22% &
)22& '
;22' (
var44 
	queryable44 
=44 
await44 !

Repository44" ,
.44, -
GetQueryableAsync44- >
(44> ?
)44? @
;44@ A
	queryable55 
=55 
	queryable55 !
.55! "
Where55" '
(55' (
a55( )
=>55* ,
a55- .
.55. /
Id55/ 1
==552 4
id555 7
)557 8
;558 9
var88 
queryableDto88 
=88 
	queryable88 (
.88( )
Select88) /
(88/ 0
entity880 6
=>887 9
new88: =
ServicioDto88> I
(88I J
)88J K
{99 
Id:: 
=:: 
entity:: 
.:: 
Id:: 
,:: 
Nombre;; 
=;; 
entity;; 
.;;  
Nombre;;  &
,;;& '
TipoServicioId<< 
=<<  
entity<<! '
.<<' (
TipoServicioId<<( 6
,<<6 7
TipoServicio== 
=== 
entity== %
.==% &
TipoServicio==& 2
.==2 3
Nombre==3 9
,==9 :
AtencionPresencial>> "
=>># $
entity>>% +
.>>+ ,
AtencionPresencial>>, >
,>>> ?"
AtencionSemiPresencial?? &
=??' (
entity??) /
.??/ 0"
AtencionSemiPresencial??0 F
,??F G
AtencionVirtual@@ 
=@@  !
entity@@" (
.@@( )
AtencionVirtual@@) 8
,@@8 9
ActivoAA 
=AA 
entityAA 
.AA  
ActivoAA  &
}BB 
)BB 
;BB 
varDD 
	entityDtoDD 
=DD 
awaitDD !
AsyncExecuterDD" /
.DD/ 0 
SingleOrDefaultAsyncDD0 D
(DDD E
queryableDtoDDE Q
)DDQ R
;DDR S
returnFF 
	entityDtoFF 
;FF 
}GG 	
publicII 
overrideII 
asyncII 
TaskII "
<II" #
PagedResultDtoII# 1
<II1 2
ServicioDtoII2 =
>II= >
>II> ?
GetListAsyncII@ L
(IIL M
GetServicioInputIIM ]
inputII^ c
)IIc d
{JJ 	
awaitLL #
CheckGetListPolicyAsyncLL )
(LL) *
)LL* +
;LL+ ,
varNN 
	queryableNN 
=NN 
awaitNN !$
CreateFilteredQueryAsyncNN" :
(NN: ;
inputNN; @
)NN@ A
;NNA B
	queryablePP 
=PP 
	queryablePP !
.PP! "
WhereIfPP" )
(PP) *
!QQ 
inputQQ 
.QQ 
FilterQQ !
.QQ! "
IsNullOrWhiteSpaceQQ" 4
(QQ4 5
)QQ5 6
,QQ6 7
uRR 
=>RR 
uSS 
.SS 
NombreSS  
.SS  !
ContainsSS! )
(SS) *
inputSS* /
.SS/ 0
FilterSS0 6
)SS6 7
)TT 
;TT 
varVV 

totalCountVV 
=VV 
awaitVV "
AsyncExecuterVV# 0
.VV0 1

CountAsyncVV1 ;
(VV; <
	queryableVV< E
)VVE F
;VVF G
	queryableXX 
=XX 
ApplySortingXX $
(XX$ %
	queryableXX% .
,XX. /
inputXX0 5
)XX5 6
;XX6 7
	queryableYY 
=YY 
ApplyPagingYY #
(YY# $
	queryableYY$ -
,YY- .
inputYY/ 4
)YY4 5
;YY5 6
var\\ 
queryableDto\\ 
=\\ 
	queryable\\ (
.\\( )
Select\\) /
(\\/ 0
entity\\0 6
=>\\7 9
new\\: =
ServicioDto\\> I
(\\I J
)\\J K
{]] 
Id^^ 
=^^ 
entity^^ 
.^^ 
Id^^ 
,^^ 
Nombre__ 
=__ 
entity__ 
.__  
Nombre__  &
,__& '
TipoServicioId`` 
=``  
entity``! '
.``' (
TipoServicioId``( 6
,``6 7
TipoServicioaa 
=aa 
entityaa %
.aa% &
TipoServicioaa& 2
.aa2 3
Nombreaa3 9
,aa9 :
AtencionPresencialbb "
=bb# $
entitybb% +
.bb+ ,
AtencionPresencialbb, >
,bb> ?"
AtencionSemiPresencialcc &
=cc' (
entitycc) /
.cc/ 0"
AtencionSemiPresencialcc0 F
,ccF G
AtencionVirtualdd 
=dd  !
entitydd" (
.dd( )
AtencionVirtualdd) 8
,dd8 9
Activoee 
=ee 
entityee 
.ee  
Activoee  &
}gg 
)gg 
;gg 
varii 

entityDtosii 
=ii 
awaitii "
AsyncExecuterii# 0
.ii0 1
ToListAsyncii1 <
(ii< =
queryableDtoii= I
)iiI J
;iiJ K
returnkk 
newkk 
PagedResultDtokk %
<kk% &
ServicioDtokk& 1
>kk1 2
(kk2 3

totalCountll 
,ll 

entityDtosmm 
)nn 
;nn 
}oo 	
publicqq 
overrideqq 
asyncqq 
Taskqq "
<qq" #
ServicioDtoqq# .
>qq. /
CreateAsyncqq0 ;
(qq; <&
CrearActualizarServicioDtoqq< V
inputqqW \
)qq\ ]
{rr 	
awaittt "
CheckCreatePolicyAsynctt (
(tt( )
)tt) *
;tt* +
varvv 
entityvv 
=vv 
awaitvv 
ServiceManagervv -
.vv- .
CreateAsyncvv. 9
(vv9 :
GuidGeneratorvv: G
.vvG H
CreatevvH N
(vvN O
)vvO P
,vvP Q
nameww 
:ww 
inputww 
.ww 
Nombreww "
,ww" #
serviceTypeIdxx 
:xx 
inputxx #
.xx# $
TipoServicioIdxx$ 2
,xx2 3!
isPresentialAttentionyy %
:yy% &
inputyy& +
.yy+ ,
AtencionPresencialyy, >
,yy> ?%
isSemipresentialAttentionzz )
:zz) *
inputzz* /
.zz/ 0"
AtencionSemiPresencialzz0 F
,zzF G
isVirtualAttention{{ "
:{{" #
input{{$ )
.{{) *
AtencionVirtual{{* 9
,{{9 :
isActive|| 
:|| 
input|| 
.||  
Activo||  &
)||& '
;||' (
TryToSetTenantId~~ 
(~~ 
entity~~ #
)~~# $
;~~$ %
await
ÄÄ 

Repository
ÄÄ 
.
ÄÄ 
InsertAsync
ÄÄ (
(
ÄÄ( )
entity
ÄÄ) /
,
ÄÄ/ 0
autoSave
ÄÄ1 9
:
ÄÄ9 :
true
ÄÄ; ?
)
ÄÄ? @
;
ÄÄ@ A
return
ÇÇ 
await
ÇÇ 
GetAsync
ÇÇ !
(
ÇÇ! "
entity
ÇÇ" (
.
ÇÇ( )
Id
ÇÇ) +
)
ÇÇ+ ,
;
ÇÇ, -
}
ÉÉ 	
public
ÖÖ 
override
ÖÖ 
async
ÖÖ 
Task
ÖÖ "
<
ÖÖ" #
ServicioDto
ÖÖ# .
>
ÖÖ. /
UpdateAsync
ÖÖ0 ;
(
ÖÖ; <
Guid
ÖÖ< @
id
ÖÖA C
,
ÖÖC D(
CrearActualizarServicioDto
ÖÖE _
input
ÖÖ` e
)
ÖÖe f
{
ÜÜ 	
await
ââ $
CheckUpdatePolicyAsync
ââ (
(
ââ( )
)
ââ) *
;
ââ* +
var
ãã 
entity
ãã 
=
ãã 
await
ãã  
GetEntityByIdAsync
ãã 1
(
ãã1 2
id
ãã2 4
)
ãã4 5
;
ãã5 6
if
çç 
(
çç 
!
çç 
entity
çç 
.
çç 
Nombre
çç 
.
çç 
Equals
çç %
(
çç% &
input
çç& +
.
çç+ ,
Nombre
çç, 2
,
çç2 3
StringComparison
çç4 D
.
ççD E
OrdinalIgnoreCase
ççE V
)
ççV W
)
ççW X
{
ççY Z
await
èè 
ServiceManager
èè #
.
èè# $
ChangeNameAsync
èè$ 3
(
èè3 4
entity
èè4 :
,
èè: ;
input
èè< A
.
èèA B
Nombre
èèB H
)
èèH I
;
èèI J
}
êê 
if
ìì 
(
ìì 
input
ìì 
.
ìì 
Activo
ìì 
.
ìì 
Equals
ìì #
(
ìì# $
false
ìì$ )
)
ìì) *
)
ìì* +
{
îî 
var
öö 
existing
öö 
=
öö 
false
öö $
;
öö$ %
if
úú 
(
úú 
existing
úú 
)
úú 
{
ùù 
throw
ûû 
new
ûû 
AbpException
ûû *
(
ûû* +
string
ûû+ 1
.
ûû1 2
Format
ûû2 8
(
ûû8 9
	localizer
ûû9 B
[
ûûB C
$str
ûûC b
]
ûûb c
,
ûûc d
input
ûûe j
.
ûûj k
Nombre
ûûk q
)
ûûq r
)
ûûr s
;
ûûs t
}
üü 
await
°° 
ServiceManager
°° $
.
°°$ %!
ChangeIsActiveAsync
°°% 8
(
°°8 9
entity
°°9 ?
,
°°? @
input
°°A F
.
°°F G
Activo
°°G M
)
°°M N
;
°°N O
}
¢¢ 
await
•• 
MapToEntityAsync
•• "
(
••" #
input
••# (
,
••( )
entity
••* 0
)
••0 1
;
••1 2
await
¶¶ 

Repository
¶¶ 
.
¶¶ 
UpdateAsync
¶¶ (
(
¶¶( )
entity
¶¶) /
,
¶¶/ 0
autoSave
¶¶1 9
:
¶¶9 :
true
¶¶; ?
)
¶¶? @
;
¶¶@ A
return
®® 
await
®® 
GetAsync
®® !
(
®®! "
entity
®®" (
.
®®( )
Id
®®) +
)
®®+ ,
;
®®, -
}
©© 	
public
´´ 
virtual
´´ 
async
´´ 
Task
´´ !
<
´´! "
ListResultDto
´´" /
<
´´/ 0
ServicioDto
´´0 ;
>
´´; <
>
´´< =
GetLookupAsync
´´> L
(
´´L M
bool
´´M Q
?
´´Q R
isActive
´´S [
)
´´[ \
{
¨¨ 	
await
ÆÆ %
CheckGetListPolicyAsync
ÆÆ )
(
ÆÆ) *
)
ÆÆ* +
;
ÆÆ+ ,
var
∞∞ 
	queryable
∞∞ 
=
∞∞ 
await
∞∞ !

Repository
∞∞" ,
.
∞∞, -
GetQueryableAsync
∞∞- >
(
∞∞> ?
)
∞∞? @
;
∞∞@ A
	queryable
≤≤ 
=
≤≤ 
	queryable
≤≤ !
.
≤≤! "
WhereIf
≤≤" )
(
≤≤) *
isActive
≥≥ 
.
≥≥ 
HasValue
≥≥ %
,
≥≥% &
u
¥¥ 
=>
¥¥ 
u
µµ 
.
µµ 
Activo
µµ  
==
µµ! #
isActive
µµ$ ,
.
µµ, -
Value
µµ- 2
)
∂∂ 
;
∂∂ 
var
ππ 
queryableDto
ππ 
=
ππ 
	queryable
ππ (
.
ππ( )
Select
ππ) /
(
ππ/ 0
entity
ππ0 6
=>
ππ7 9
new
ππ: =
ServicioDto
ππ> I
(
ππI J
)
ππJ K
{
∫∫ 
Id
ªª 
=
ªª 
entity
ªª 
.
ªª 
Id
ªª 
,
ªª 
Nombre
ºº 
=
ºº 
entity
ºº 
.
ºº  
Nombre
ºº  &
,
ºº& '
TipoServicioId
ΩΩ 
=
ΩΩ  
entity
ΩΩ! '
.
ΩΩ' (
TipoServicioId
ΩΩ( 6
,
ΩΩ6 7
TipoServicio
ææ 
=
ææ 
entity
ææ %
.
ææ% &
TipoServicio
ææ& 2
.
ææ2 3
Nombre
ææ3 9
,
ææ9 : 
AtencionPresencial
øø "
=
øø# $
entity
øø% +
.
øø+ , 
AtencionPresencial
øø, >
,
øø> ?$
AtencionSemiPresencial
¿¿ &
=
¿¿' (
entity
¿¿) /
.
¿¿/ 0$
AtencionSemiPresencial
¿¿0 F
,
¿¿F G
AtencionVirtual
¡¡ 
=
¡¡  !
entity
¡¡" (
.
¡¡( )
AtencionVirtual
¡¡) 8
,
¡¡8 9
Activo
¬¬ 
=
¬¬ 
entity
¬¬ 
.
¬¬  
Activo
¬¬  &
}
ƒƒ 
)
ƒƒ 
;
ƒƒ 
var
∆∆ 

entityDtos
∆∆ 
=
∆∆ 
await
∆∆ "
AsyncExecuter
∆∆# 0
.
∆∆0 1
ToListAsync
∆∆1 <
(
∆∆< =
queryableDto
∆∆= I
)
∆∆I J
;
∆∆J K
return
»» 
new
»» 
ListResultDto
»» $
<
»»$ %
ServicioDto
»»% 0
>
»»0 1
(
»»1 2

entityDtos
»»2 <
)
»»< =
;
»»= >
}
   	
}
ÀÀ 
}ÃÃ Å
jD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Servicio\TipoPagoAppService.cs
	namespace		 	
Mre		
 
.		 
Sb		 
.		  
UnidadAdministrativa		 %
.		% &
Servicio		& .
{

 
public 

class 
TipoPagoAppService #
:$ %
CrudAppService 
< 
TipoPago 
, 
TipoPagoDto 
, 
string 
> 
, 
ITipoPagoAppService 
{ 
private 
readonly 
TipoPagoManager (
PaymentTypeManager) ;
;; <
public 
TipoPagoAppService !
(! "
IRepository" -
<- .
TipoPago. 6
,6 7
string8 >
>> ?

repository@ J
,J K
TipoPagoManager 
paymentTypeManager *
)* +
: 
base 
( 

repository 
) 
{ 	
this 
. 
PaymentTypeManager #
=$ %
paymentTypeManager& 8
;8 9
CreatePolicyName 
= )
AdministrativeUnitPermissions <
.< =
PaymentType= H
.H I
CreateI O
;O P
UpdatePolicyName 
= )
AdministrativeUnitPermissions <
.< =
PaymentType= H
.H I
UpdateI O
;O P
DeletePolicyName 
= )
AdministrativeUnitPermissions <
.< =
PaymentType= H
.H I
DeleteI O
;O P
}   	
public"" 
override"" 
async"" 
Task"" "
<""" #
TipoPagoDto""# .
>"". /
CreateAsync""0 ;
(""; <
TipoPagoDto""< G
input""H M
)""M N
{## 	
await$$ "
CheckCreatePolicyAsync$$ (
($$( )
)$$) *
;$$* +
await&& 
PaymentTypeManager&& $
.&&$ %
ValidateCreateAsync&&% 8
(&&8 9
input&&9 >
.&&> ?
Id&&? A
)&&A B
;&&B C
var(( 
entity(( 
=(( 
await(( 
MapToEntityAsync(( /
(((/ 0
input((0 5
)((5 6
;((6 7
TryToSetTenantId** 
(** 
entity** #
)**# $
;**$ %
await,, 

Repository,, 
.,, 
InsertAsync,, (
(,,( )
entity,,) /
,,,/ 0
autoSave,,1 9
:,,9 :
true,,; ?
),,? @
;,,@ A
return.. 
await.. "
MapToGetOutputDtoAsync.. /
(../ 0
entity..0 6
)..6 7
;..7 8
}// 	
public11 
async11 
Task11 
<11 
ListResultDto11 '
<11' (
TipoPagoDto11( 3
>113 4
>114 5
GetLookupAsync116 D
(11D E
)11E F
{22 	
await33 #
CheckGetListPolicyAsync33 )
(33) *
)33* +
;33+ ,
var55 
list55 
=55 
await55 

Repository55 '
.55' (
GetListAsync55( 4
(554 5
)555 6
;556 7
return77 
new77 
ListResultDto77 $
<77$ %
TipoPagoDto77% 0
>770 1
(771 2
ObjectMapper88 
.88 
Map88  
<88  !
List88! %
<88% &
TipoPago88& .
>88. /
,88/ 0
List881 5
<885 6
TipoPagoDto886 A
>88A B
>88B C
(88C D
list88D H
)88H I
)99 
;99 
}:: 	
}<< 
}>> œ
nD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Servicio\TipoServicioAppService.cs
	namespace		 	
Mre		
 
.		 
Sb		 
.		  
UnidadAdministrativa		 %
.		% &
Servicio		& .
{

 
public 

class "
TipoServicioAppService '
:( )
CrudAppService 
< 
TipoServicio 
, 
TipoServicioDto 
, 
string 
> 
, #
ITipoServicioAppService 
{ 
private 
readonly 
TipoServicioManager ,
serviceTypeManager- ?
;? @
public "
TipoServicioAppService %
(% &
IRepository& 1
<1 2
TipoServicio2 >
,> ?
string@ F
>F G

repositoryH R
,R S
TipoServicioManager 
serviceTypeManager .
). /
: 
base 
( 

repository 
) 
{ 	
this 
. 
serviceTypeManager #
=$ %
serviceTypeManager& 8
;8 9
CreatePolicyName 
= )
AdministrativeUnitPermissions <
.< =
ServiceType= H
.H I
CreateI O
;O P
UpdatePolicyName 
= )
AdministrativeUnitPermissions <
.< =
ServiceType= H
.H I
UpdateI O
;O P
DeletePolicyName   
=   )
AdministrativeUnitPermissions   <
.  < =
ServiceType  = H
.  H I
Delete  I O
;  O P
}!! 	
public## 
override## 
async## 
Task## "
<##" #
TipoServicioDto### 2
>##2 3
CreateAsync##4 ?
(##? @
TipoServicioDto##@ O
input##P U
)##U V
{$$ 	
await%% "
CheckCreatePolicyAsync%% (
(%%( )
)%%) *
;%%* +
await'' 
serviceTypeManager'' $
.''$ %
ValidateCreateAsync''% 8
(''8 9
input''9 >
.''> ?
Id''? A
)''A B
;''B C
var)) 
entity)) 
=)) 
await)) 
MapToEntityAsync)) /
())/ 0
input))0 5
)))5 6
;))6 7
TryToSetTenantId++ 
(++ 
entity++ #
)++# $
;++$ %
await-- 

Repository-- 
.-- 
InsertAsync-- (
(--( )
entity--) /
,--/ 0
autoSave--1 9
:--9 :
true--; ?
)--? @
;--@ A
return// 
await// "
MapToGetOutputDtoAsync// /
(/// 0
entity//0 6
)//6 7
;//7 8
}00 	
public22 
async22 
Task22 
<22 
ListResultDto22 '
<22' (!
TipoServicioLookupDto22( =
>22= >
>22> ?
GetLookupAsync22@ N
(22N O
)22O P
{33 	
await44 #
CheckGetListPolicyAsync44 )
(44) *
)44* +
;44+ ,
var66 
list66 
=66 
await66 

Repository66 '
.66' (
GetListAsync66( 4
(664 5
)665 6
;666 7
return88 
new88 
ListResultDto88 $
<88$ %!
TipoServicioLookupDto88% :
>88: ;
(88; <
ObjectMapper99 
.99 
Map99  
<99  !
List99! %
<99% &
TipoServicio99& 2
>992 3
,993 4
List995 9
<999 :!
TipoServicioLookupDto99: O
>99O P
>99P Q
(99Q R
list99R V
)99V W
):: 
;:: 
};; 	
}== 
}@@ ∆
sD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\UnidadAdministrativa\BancoAppService.cs
	namespace		 	
Mre		
 
.		 
Sb		 
.		  
UnidadAdministrativa		 %
.		% & 
UnidadAdministrativa		& :
{

 
public 

class 
BancoAppService  
:! "
CrudAppService 
< 
Banco 
, 
BancoDto 
, 
string 
> 
, 
IBancoAppService 
{ 
private 
readonly 
BancoManager %
BankManager& 1
;1 2
public 
BancoAppService 
( 
IRepository *
<* +
Banco+ 0
,0 1
string2 8
>8 9

repository: D
,D E
BancoManager 
bankManager  
)  !
: 
base 
( 

repository 
) 
{ 	
this 
. 
BankManager 
= 
bankManager *
;* +
CreatePolicyName 
= )
AdministrativeUnitPermissions <
.< =
Bank= A
.A B
CreateB H
;H I
UpdatePolicyName 
= )
AdministrativeUnitPermissions <
.< =
Bank= A
.A B
UpdateB H
;H I
DeletePolicyName   
=   )
AdministrativeUnitPermissions   <
.  < =
Bank  = A
.  A B
Delete  B H
;  H I
}!! 	
public## 
override## 
async## 
Task## "
<##" #
BancoDto### +
>##+ ,
CreateAsync##- 8
(##8 9
BancoDto##9 A
input##B G
)##G H
{$$ 	
await%% "
CheckCreatePolicyAsync%% (
(%%( )
)%%) *
;%%* +
await'' 
BankManager'' 
.'' 
ValidateCreateAsync'' 1
(''1 2
input''2 7
.''7 8
Id''8 :
)'': ;
;''; <
var)) 
entity)) 
=)) 
await)) 
MapToEntityAsync)) /
())/ 0
input))0 5
)))5 6
;))6 7
TryToSetTenantId++ 
(++ 
entity++ #
)++# $
;++$ %
await-- 

Repository-- 
.-- 
InsertAsync-- (
(--( )
entity--) /
,--/ 0
autoSave--1 9
:--9 :
true--; ?
)--? @
;--@ A
return// 
await// "
MapToGetOutputDtoAsync// /
(/// 0
entity//0 6
)//6 7
;//7 8
}00 	
public22 
async22 
Task22 
<22 
ListResultDto22 '
<22' (
BancoLookupDto22( 6
>226 7
>227 8
GetLookupAsync229 G
(22G H
)22H I
{33 	
await44 #
CheckGetListPolicyAsync44 )
(44) *
)44* +
;44+ ,
var66 
list66 
=66 
await66 

Repository66 '
.66' (
GetListAsync66( 4
(664 5
)665 6
;666 7
return88 
new88 
ListResultDto88 $
<88$ %
BancoLookupDto88% 3
>883 4
(884 5
ObjectMapper99 
.99 
Map99  
<99  !
List99! %
<99% &
Banco99& +
>99+ ,
,99, -
List99. 2
<992 3
BancoLookupDto993 A
>99A B
>99B C
(99C D
list99D H
)99H I
):: 
;:: 
};; 	
}== 
}@@ û^
ÖD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\UnidadAdministrativa\ConfiguracionSignatarioAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% & 
UnidadAdministrativa& :
{ 
[ 
RemoteService 
( 
false 
) 
] 
public 

class -
!ConfiguracionSignatarioAppService 2
:3 4
ApplicationService5 G
,G H.
"IConfiguracionSignatarioAppServiceI k
{ 
private 
readonly 
IRepository $
<$ %#
ConfiguracionSignatario% <
,< =
Guid> B
>B C

repositoryD N
;N O
private 
readonly *
ConfiguracionSignatarioManager 7*
configuracionSignatarioManager8 V
;V W
	protected 
virtual 
string  
GetPolicyName! .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
	protected 
virtual 
string  
CreatePolicyName! 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
	protected 
virtual 
string  
UpdatePolicyName! 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
	protected 
virtual 
string  
DeletePolicyName! 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public -
!ConfiguracionSignatarioAppService 0
(0 1
IRepository1 <
<< =#
ConfiguracionSignatario= T
,T U
GuidV Z
>Z [

repository\ f
,f g*
ConfiguracionSignatarioManager **
configuracionSignatarioManager+ I
)I J
{ 	
this 
. 

repository 
= 

repository (
;( )
this   
.   *
configuracionSignatarioManager   /
=  0 1*
configuracionSignatarioManager  2 P
;  P Q
}!! 	
public## 
async## 
Task## 
<## &
ConfiguracionSignatarioDto## 4
>##4 5
GetAsync##6 >
(##> ?
Guid##? C
	usuarioId##D M
)##M N
{$$ 	
await%% 
CheckGetPolicyAsync%% %
(%%% &
)%%& '
;%%' (
var'' 
consulta'' 
='' 
await''  

repository''! +
.''+ ,
GetQueryableAsync'', =
(''= >
)''> ?
;''? @
consulta(( 
=(( 
consulta(( 
.((  
Where((  %
(((% &
a((& '
=>((( *
a((+ ,
.((, -
	UsuarioId((- 6
==((7 9
	usuarioId((: C
)((C D
;((D E
var** 
consultaDto** 
=** 
consulta** &
.**& '
Select**' -
(**- .
entity**. 4
=>**5 7
new**8 ;&
ConfiguracionSignatarioDto**< V
(**V W
)**W X
{++ 
Id,, 
=,, 
entity,, 
.,, 
Id,, 
,,, 
Clave-- 
=-- 
entity-- 
.-- 
Clave-- $
,--$ %
Data.. 
=.. 
entity.. 
... 
Data.. "
,.." #
	Extension// 
=// 
entity// "
.//" #
	Extension//# ,
,//, -
NombreArchivo00 
=00 
entity00  &
.00& '
NombreArchivo00' 4
,004 5
TipoContenido11 
=11 
entity11  &
.11& '
TipoContenido11' 4
,114 5
	UsuarioId22 
=22 
entity22 "
.22" #
	UsuarioId22# ,
}33 
)33 
;33 
var55 
	entityDto55 
=55 
await55 !
AsyncExecuter55" /
.55/ 0 
SingleOrDefaultAsync550 D
(55D E
consultaDto55E P
)55P Q
;55Q R
return88 
	entityDto88 
;88 
}99 	
public;; 
async;; 
Task;; 
<;; &
ConfiguracionSignatarioDto;; 4
>;;4 5
CreateAsync;;6 A
(;;A B&
ConfiguracionSignatarioDto;;B \
input;;] b
);;b c
{<< 	
await== "
CheckCreatePolicyAsync== (
(==( )
)==) *
;==* +
var?? 
entidad?? 
=?? 
new?? #
ConfiguracionSignatario?? 5
(??5 6
id@@ 
:@@ 
GuidGenerator@@ "
.@@" #
Create@@# )
(@@) *
)@@* +
,@@+ ,
	usuarioIdAA 
:AA 
inputAA "
.AA" #
	UsuarioIdAA# ,
,AA- .
nombreArchivoBB 
:BB  
inputBB! &
.BB& '
NombreArchivoBB' 4
,BB4 5
tipoContenidoCC 
:CC  
inputCC! &
.CC& '
TipoContenidoCC' 4
,CC4 5
	extensionDD 
:DD 
inputDD "
.DD" #
	ExtensionDD# ,
,DD, -
dataEE 
:EE 
inputEE 
.EE 
DataEE "
,EE" #
claveFF 
:FF 
inputFF 
.FF 
ClaveFF $
)GG 
;GG 
awaitII 

repositoryII 
.II 
InsertAsyncII (
(II( )
entidadII) 0
)II0 1
;II1 2
returnKK 
awaitKK 
GetAsyncKK !
(KK! "
inputKK" '
.KK' (
	UsuarioIdKK( 1
)KK1 2
;KK2 3
}MM 	
publicPP 
asyncPP 
TaskPP 
<PP &
ConfiguracionSignatarioDtoPP 4
>PP4 5
UpdateAsyncPP6 A
(PPA B
GuidPPB F
idPPG I
,PPI J&
ConfiguracionSignatarioDtoPPK e
inputPPf k
)PPk l
{QQ 	
awaitRR "
CheckUpdatePolicyAsyncRR (
(RR( )
)RR) *
;RR* +
varTT 
consultaTT 
=TT 
awaitTT  

repositoryTT! +
.TT+ ,
GetQueryableAsyncTT, =
(TT= >
)TT> ?
;TT? @
consultaUU 
=UU 
consultaUU 
.UU  
WhereUU  %
(UU% &
aUU& '
=>UU( *
aUU+ ,
.UU, -
	UsuarioIdUU- 6
==UU7 9
inputUU: ?
.UU? @
	UsuarioIdUU@ I
)UUI J
;UUJ K
varWW 
entidadWW 
=WW 
awaitWW 
AsyncExecuterWW  -
.WW- .
SingleAsyncWW. 9
(WW9 :
consultaWW: B
)WWB C
;WWC D
awaitYY 
MapToEntityAsyncYY "
(YY" #
inputYY# (
,YY( )
entidadYY* 1
)YY1 2
;YY2 3
awaitZZ 

repositoryZZ 
.ZZ 
UpdateAsyncZZ (
(ZZ( )
entidadZZ) 0
)ZZ0 1
;ZZ1 2
return\\ 
await\\ 
GetAsync\\ !
(\\! "
input\\" '
.\\' (
	UsuarioId\\( 1
)\\1 2
;\\2 3
}]] 	
public__ 
async__ 
Task__ 
DeleteAsync__ %
(__% &
Guid__& *
	usuarioId__+ 4
)__4 5
{`` 	
awaitaa "
CheckDeletePolicyAsyncaa (
(aa( )
)aa) *
;aa* +
varcc 
consultacc 
=cc 
awaitcc  

repositorycc! +
.cc+ ,
GetQueryableAsynccc, =
(cc= >
)cc> ?
;cc? @
consultadd 
=dd 
consultadd 
.dd  
Wheredd  %
(dd% &
add& '
=>dd( *
add+ ,
.dd, -
	UsuarioIddd- 6
==dd7 9
	usuarioIddd: C
)ddC D
;ddD E
varff 
entidadff 
=ff 
awaitff 
AsyncExecuterff  -
.ff- .
SingleAsyncff. 9
(ff9 :
consultaff: B
)ffB C
;ffC D
awaithh 

repositoryhh 
.hh 
DeleteAsynchh (
(hh( )
entidadhh) 0
)hh0 1
;hh1 2
}ii 	
publicll 
Taskll 
<ll 
Listll 
<ll 
Guidll 
>ll 
>ll  $
PoseenConfiguracionAsyncll! 9
(ll9 :
Listll: >
<ll> ?
Guidll? C
>llC D
usuariosIdsllE P
)llP Q
{mm 	
returnnn *
configuracionSignatarioManagernn 1
.nn1 2$
PoseenConfiguracionAsyncnn2 J
(nnJ K
usuariosIdsnnK V
)nnV W
;nnW X
}oo 	
publicqq 
Taskqq 
<qq 
boolqq 
>qq $
PoseenConfiguracionAsyncqq 2
(qq2 3
Guidqq3 7

usuariosIdqq8 B
)qqB C
{rr 	
returnss *
configuracionSignatarioManagerss 1
.ss1 2$
PoseenConfiguracionAsyncss2 J
(ssJ K

usuariosIdssK U
)ssU V
;ssV W
}tt 	
	protectedyy 
virtualyy 
asyncyy 
Taskyy  $
CheckGetPolicyAsyncyy% 8
(yy8 9
)yy9 :
{zz 	
await{{ 
CheckPolicyAsync{{ "
({{" #
GetPolicyName{{# 0
){{0 1
;{{1 2
}|| 	
	protected~~ 
virtual~~ 
async~~ 
Task~~  $"
CheckCreatePolicyAsync~~% ;
(~~; <
)~~< =
{ 	
await
ÄÄ 
CheckPolicyAsync
ÄÄ "
(
ÄÄ" #
CreatePolicyName
ÄÄ# 3
)
ÄÄ3 4
;
ÄÄ4 5
}
ÅÅ 	
	protected
ÉÉ 
virtual
ÉÉ 
async
ÉÉ 
Task
ÉÉ  $$
CheckUpdatePolicyAsync
ÉÉ% ;
(
ÉÉ; <
)
ÉÉ< =
{
ÑÑ 	
await
ÖÖ 
CheckPolicyAsync
ÖÖ "
(
ÖÖ" #
UpdatePolicyName
ÖÖ# 3
)
ÖÖ3 4
;
ÖÖ4 5
}
ÜÜ 	
	protected
àà 
virtual
àà 
async
àà 
Task
àà  $$
CheckDeletePolicyAsync
àà% ;
(
àà; <
)
àà< =
{
ââ 	
await
ää 
CheckPolicyAsync
ää "
(
ää" #
DeletePolicyName
ää# 3
)
ää3 4
;
ää4 5
}
éé 	
	protected
ññ 
virtual
ññ 
Task
ññ 
MapToEntityAsync
ññ /
(
ññ/ 0(
ConfiguracionSignatarioDto
ññ0 J
updateInput
ññK V
,
ññV W%
ConfiguracionSignatario
ññX o
entity
ññp v
)
ññv w
{
óó 	
MapToEntity
òò 
(
òò 
updateInput
òò #
,
òò# $
entity
òò% +
)
òò+ ,
;
òò, -
return
ôô 
Task
ôô 
.
ôô 
CompletedTask
ôô %
;
ôô% &
}
öö 	
	protected
°° 
virtual
°° 
void
°° 
MapToEntity
°° *
(
°°* +(
ConfiguracionSignatarioDto
°°+ E
updateInput
°°F Q
,
°°Q R%
ConfiguracionSignatario
°°S j
entity
°°k q
)
°°q r
{
¢¢ 	
ObjectMapper
££ 
.
££ 
Map
££ 
(
££ 
updateInput
££ (
,
££( )
entity
££* 0
)
££0 1
;
££1 2
}
§§ 	
}
®® 
}©© ı
tD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\UnidadAdministrativa\MonedaAppService.cs
	namespace		 	
Mre		
 
.		 
Sb		 
.		  
UnidadAdministrativa		 %
.		% & 
UnidadAdministrativa		& :
{

 
public 

class 
MonedaAppService !
:" #
CrudAppService 
< 
Moneda 
, 
	MonedaDto 
, 
string 
> 
, 
IMonedaAppService 
{ 
private 
readonly 
MonedaManager &
CurrencyManager' 6
;6 7
public 
MonedaAppService 
(  
IRepository  +
<+ ,
Moneda, 2
,2 3
string4 :
>: ;

repository< F
,F G
MonedaManager 
currencyManager %
)% &
: 
base 
( 

repository 
) 
{ 	
this 
. 
CurrencyManager  
=! "
currencyManager# 2
;2 3
CreatePolicyName 
= )
AdministrativeUnitPermissions <
.< =
Currency= E
.E F
CreateF L
;L M
UpdatePolicyName 
= )
AdministrativeUnitPermissions <
.< =
Currency= E
.E F
UpdateF L
;L M
DeletePolicyName   
=   )
AdministrativeUnitPermissions   <
.  < =
Currency  = E
.  E F
Delete  F L
;  L M
}!! 	
public## 
override## 
async## 
Task## "
<##" #
	MonedaDto### ,
>##, -
CreateAsync##. 9
(##9 :
	MonedaDto##: C
input##D I
)##I J
{$$ 	
await%% "
CheckCreatePolicyAsync%% (
(%%( )
)%%) *
;%%* +
await'' 
CurrencyManager'' !
.''! "
ValidateCreateAsync''" 5
(''5 6
input''6 ;
.''; <
Id''< >
)''> ?
;''? @
var)) 
entity)) 
=)) 
await)) 
MapToEntityAsync)) /
())/ 0
input))0 5
)))5 6
;))6 7
TryToSetTenantId++ 
(++ 
entity++ #
)++# $
;++$ %
await-- 

Repository-- 
.-- 
InsertAsync-- (
(--( )
entity--) /
,--/ 0
autoSave--1 9
:--9 :
true--; ?
)--? @
;--@ A
return// 
await// "
MapToGetOutputDtoAsync// /
(/// 0
entity//0 6
)//6 7
;//7 8
}00 	
public22 
async22 
Task22 
<22 
ListResultDto22 '
<22' (
MonedaLookupDto22( 7
>227 8
>228 9
GetLookupAsync22: H
(22H I
)22I J
{33 	
await44 #
CheckGetListPolicyAsync44 )
(44) *
)44* +
;44+ ,
var66 
list66 
=66 
await66 

Repository66 '
.66' (
GetListAsync66( 4
(664 5
)665 6
;666 7
return88 
new88 
ListResultDto88 $
<88$ %
MonedaLookupDto88% 4
>884 5
(885 6
ObjectMapper99 
.99 
Map99  
<99  !
List99! %
<99% &
Moneda99& ,
>99, -
,99- .
List99/ 3
<993 4
MonedaLookupDto994 C
>99C D
>99D E
(99E F
list99F J
)99J K
):: 
;:: 
};; 	
}== 
}@@ Œ
sD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\UnidadAdministrativa\NivelAppService.cs
	namespace		 	
Mre		
 
.		 
Sb		 
.		  
UnidadAdministrativa		 %
.		% & 
UnidadAdministrativa		& :
{

 
public 

class 
NivelAppService  
:! "
CrudAppService 
< 
Nivel 
, 
NivelDto 
, 
string 
> 
, 
INivelAppService 
{ 
private 
readonly 
NivelManager %
LevelManager& 2
;2 3
public 
NivelAppService 
( 
IRepository *
<* +
Nivel+ 0
,0 1
string2 8
>8 9

repository: D
,D E
NivelManager 
levelManager !
)! "
: 
base 
( 

repository 
) 
{ 	
this 
. 
LevelManager 
= 
levelManager  ,
;, -
CreatePolicyName 
= )
AdministrativeUnitPermissions <
.< =
Level= B
.B C
CreateC I
;I J
UpdatePolicyName 
= )
AdministrativeUnitPermissions <
.< =
Level= B
.B C
UpdateC I
;I J
DeletePolicyName 
= )
AdministrativeUnitPermissions <
.< =
Level= B
.B C
DeleteC I
;I J
}   	
public"" 
override"" 
async"" 
Task"" "
<""" #
NivelDto""# +
>""+ ,
CreateAsync""- 8
(""8 9
NivelDto""9 A
input""B G
)""G H
{## 	
await$$ "
CheckCreatePolicyAsync$$ (
($$( )
)$$) *
;$$* +
await&& 
LevelManager&& 
.&& 
ValidateCreateAsync&& 2
(&&2 3
input&&3 8
.&&8 9
Id&&9 ;
)&&; <
;&&< =
var(( 
entity(( 
=(( 
await(( 
MapToEntityAsync(( /
(((/ 0
input((0 5
)((5 6
;((6 7
TryToSetTenantId** 
(** 
entity** #
)**# $
;**$ %
await,, 

Repository,, 
.,, 
InsertAsync,, (
(,,( )
entity,,) /
,,,/ 0
autoSave,,1 9
:,,9 :
true,,; ?
),,? @
;,,@ A
return.. 
await.. "
MapToGetOutputDtoAsync.. /
(../ 0
entity..0 6
)..6 7
;..7 8
}// 	
public11 
async11 
Task11 
<11 
ListResultDto11 '
<11' (
NivelLookupDto11( 6
>116 7
>117 8
GetLookupAsync119 G
(11G H
)11H I
{22 	
await33 #
CheckGetListPolicyAsync33 )
(33) *
)33* +
;33+ ,
var55 
list55 
=55 
await55 

Repository55 '
.55' (
GetListAsync55( 4
(554 5
)555 6
;556 7
return77 
new77 
ListResultDto77 $
<77$ %
NivelLookupDto77% 3
>773 4
(774 5
ObjectMapper88 
.88 
Map88  
<88  !
List88! %
<88% &
Nivel88& +
>88+ ,
,88, -
List88. 2
<882 3
NivelLookupDto883 A
>88A B
>88B C
(88C D
list88D H
)88H I
)99 
;99 
}:: 	
}<< 
}?? Ë 
ÄD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\UnidadAdministrativa\TipoCuentaBancariaAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% & 
UnidadAdministrativa& :
{ 
public 

class (
TipoCuentaBancariaAppService -
:. /
CrudAppService 
< 
TipoCuentaBancaria 
, !
TipoCuentaBancariaDto 
, 
string 
> 
, )
ITipoCuentaBancariaAppService !
{ 
private 
readonly %
TipoCuentaBancariaManager 2%
TipoCuentaBancariaManager3 L
;L M
public (
TipoCuentaBancariaAppService +
(+ ,
IRepository, 7
<7 8
TipoCuentaBancaria8 J
,J K
stringL R
>R S

repositoryT ^
,^ _%
TipoCuentaBancariaManager !%
tipoCuentaBancariaManager" ;
); <
: 
base 
( 

repository 
) 
{ 	
this 
. %
TipoCuentaBancariaManager *
=+ ,%
tipoCuentaBancariaManager- F
;F G
CreatePolicyName 
= )
AdministrativeUnitPermissions <
.< =
TipoCuentaBancaria= O
.O P
CreateP V
;V W
UpdatePolicyName   
=   )
AdministrativeUnitPermissions   <
.  < =
TipoCuentaBancaria  = O
.  O P
Update  P V
;  V W
DeletePolicyName!! 
=!! )
AdministrativeUnitPermissions!! <
.!!< =
TipoCuentaBancaria!!= O
.!!O P
Delete!!P V
;!!V W
}"" 	
public$$ 
override$$ 
async$$ 
Task$$ "
<$$" #!
TipoCuentaBancariaDto$$# 8
>$$8 9
CreateAsync$$: E
($$E F!
TipoCuentaBancariaDto$$F [
input$$\ a
)$$a b
{%% 	
await&& "
CheckCreatePolicyAsync&& (
(&&( )
)&&) *
;&&* +
await(( %
TipoCuentaBancariaManager(( +
.((+ ,
ValidateCreateAsync((, ?
(((? @
input((@ E
.((E F
Id((F H
)((H I
;((I J
var** 
entity** 
=** 
await** 
MapToEntityAsync** /
(**/ 0
input**0 5
)**5 6
;**6 7
TryToSetTenantId,, 
(,, 
entity,, #
),,# $
;,,$ %
await.. 

Repository.. 
... 
InsertAsync.. (
(..( )
entity..) /
,../ 0
autoSave..1 9
:..9 :
true..; ?
)..? @
;..@ A
return00 
await00 "
MapToGetOutputDtoAsync00 /
(00/ 0
entity000 6
)006 7
;007 8
}11 	
public33 
async33 
Task33 
<33 
ListResultDto33 '
<33' (!
TipoCuentaBancariaDto33( =
>33= >
>33> ?
GetLookupAsync33@ N
(33N O
)33O P
{44 	
await55 #
CheckGetListPolicyAsync55 )
(55) *
)55* +
;55+ ,
var77 
list77 
=77 
await77 

Repository77 '
.77' (
GetListAsync77( 4
(774 5
)775 6
;776 7
return99 
new99 
ListResultDto99 $
<99$ %!
TipoCuentaBancariaDto99% :
>99: ;
(99; <
ObjectMapper:: 
.:: 
Map::  
<::  !
List::! %
<::% &
TipoCuentaBancaria::& 8
>::8 9
,::9 :
List::; ?
<::? @!
TipoCuentaBancariaDto::@ U
>::U V
>::V W
(::W X
list::X \
)::\ ]
);; 
;;; 
}<< 	
}>> 
}@@ í™
ÇD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\UnidadAdministrativa\UnidadAdministrativaAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% & 
UnidadAdministrativa& :
{ 
public 

class *
UnidadAdministrativaAppService /
:0 1
CrudAppService 
< 
Dominio
 
.  
UnidadAdministrativa &
,& '#
UnidadAdministrativaDto
 !
,! "
Guid
 
, (
GetUnidadAdministrativaInput
 &
,& '2
&CrearActualizarUnidadAdministrativaDto
 0
>0 1
,1 2+
IUnidadAdministrativaAppService %
{   
private!! 
readonly!! 
CountryData!! $
_countryData!!% 1
;!!1 2
public## '
UnidadAdministrativaManager## *'
UnidadAdministrativaManager##+ F
{##G H
get##I L
;##L M
}##N O
private%% 
readonly%% 
IRepository%% $
<%%$ %+
UnidadAdministrativaFuncionario%%% D
>%%D E5
)_administrativeUnitFunctionaryRespository%%F o
;%%o p
private&& 
readonly&& 
IRepository&& $
<&&$ %(
UnidadAdministrativaServicio&&% A
>&&A B1
%_administrativeUnitServiceRespository&&C h
;&&h i
private'' 
readonly'' 
IRepository'' $
<''$ %
Dominio''% ,
.'', -
Servicio''- 5
>''5 6
_serviceRepository''7 I
;''I J
private(( 
readonly(( 
IRepository(( $
<(($ %

Signatario((% /
>((/ 0
_signerRespository((1 C
;((C D
private)) 
readonly)) .
"IConfiguracionSignatarioAppService)) ;.
"_configuracionSignatarioAppService))< ^
;))^ _
private** 
readonly** 
IStringLocalizer** )
<**) *&
AdministrativeUnitResource*** D
>**D E

_localizer**F P
;**P Q
public,, *
UnidadAdministrativaAppService,, -
(,,- .
IRepository-- 
<-- 
Dominio-- 
.--   
UnidadAdministrativa--  4
,--4 5
Guid--5 9
>--9 :

repository--; E
,--E F'
UnidadAdministrativaManager.. '%
administrativeUnitManager..( A
,..A B
CountryData// 
countryData// #
,//# $
IRepository00 
<00 +
UnidadAdministrativaFuncionario00 7
>007 84
(administrativeUnitFunctionaryRespository009 a
,00a b
IRepository11 
<11 (
UnidadAdministrativaServicio11 4
>114 50
$administrativeUnitServiceRespository116 Z
,11Z [
IRepository22 
<22 
Dominio22 
.22  
Servicio22  (
>22( )
serviceRepository22* ;
,22; <
IRepository33 
<33 
Cargo33 
>33 
positionRepository33 1
,331 2
IRepository44 
<44 

Signatario44 "
>44" #
signerRespository44$ 5
,445 6.
"IConfiguracionSignatarioAppService55 .-
!configuracionSignatarioAppService55/ P
,55P Q
IStringLocalizer66 
<66 &
AdministrativeUnitResource66 7
>667 8
	localizer669 B
)66B C
:77 
base77 
(77 

repository77 
)77 
{88 	'
UnidadAdministrativaManager99 '
=99( )%
administrativeUnitManager99* C
;99C D
_countryData:: 
=:: 
countryData:: &
;::& '5
)_administrativeUnitFunctionaryRespository;; 5
=;;6 74
(administrativeUnitFunctionaryRespository;;8 `
;;;` a1
%_administrativeUnitServiceRespository<< 1
=<<2 30
$administrativeUnitServiceRespository<<4 X
;<<X Y
_serviceRepository== 
===  
serviceRepository==! 2
;==2 3
_signerRespository>> 
=>>  
signerRespository>>! 2
;>>2 3
this?? 
.?? .
"_configuracionSignatarioAppService?? 3
=??4 5-
!configuracionSignatarioAppService??6 W
;??W X
this@@ 
.@@ 

_localizer@@ 
=@@ 
	localizer@@ '
;@@' (
CreatePolicyNameDD 
=DD )
AdministrativeUnitPermissionsDD <
.DD< =
AdministrativeUnitDD= O
.DDO P
CreateDDP V
;DDV W
UpdatePolicyNameEE 
=EE )
AdministrativeUnitPermissionsEE <
.EE< =
AdministrativeUnitEE= O
.EEO P
UpdateEEP V
;EEV W
DeletePolicyNameFF 
=FF )
AdministrativeUnitPermissionsFF <
.FF< =
AdministrativeUnitFF= O
.FFO P
DeleteFFP V
;FFV W
}JJ 	
publicOO 
overrideOO 
asyncOO 
TaskOO "
<OO" ##
UnidadAdministrativaDtoOO# :
>OO: ;
GetAsyncOO< D
(OOD E
GuidOOE I
idOOJ L
)OOL M
{PP 	
awaitQQ 
CheckGetPolicyAsyncQQ %
(QQ% &
)QQ& '
;QQ' (
varSS 
	queryableSS 
=SS 
awaitSS !

RepositorySS" ,
.SS, -
GetQueryableAsyncSS- >
(SS> ?
)SS? @
;SS@ A
	queryableTT 
=TT 
	queryableTT !
.TT! "
WhereTT" '
(TT' (
aTT( )
=>TT* ,
aTT- .
.TT. /
IdTT/ 1
==TT2 4
idTT5 7
)TT7 8
;TT8 9
varVV 
queryableDtoVV 
=VV 
	queryableVV (
.VV( )
SelectVV) /
(VV/ 0
entityVV0 6
=>VV7 9
newVV: =#
UnidadAdministrativaDtoVV> U
(VVU V
)VVV W
{WW 
IdXX 
=XX 
entityXX 
.XX 
IdXX 
,XX $
TipoUnidadAdministrativaYY (
=YY) *
entityYY+ 1
.YY1 2$
TipoUnidadAdministrativaYY2 J
.YYJ K
NombreYYK Q
,YYQ R
SiglasZZ 
=ZZ 
entityZZ 
.ZZ  
SiglasZZ  &
,ZZ& '
Codigo[[ 
=[[ 
entity[[ 
.[[  
Codigo[[  &
,[[& '&
TipoUnidadAdministrativaId\\ *
=\\+ ,
entity\\- 3
.\\3 4&
TipoUnidadAdministrativaId\\4 N
,\\N O
Banco]] 
=]] 
entity]] 
.]] 
Banco]] $
.]]$ %
Nombre]]% +
,]]+ ,
BancoId^^ 
=^^ 
entity^^  
.^^  !
BancoId^^! (
,^^( )
PaisId__ 
=__ 
entity__ 
.__  
PaisId__  &
,__& '
Moneda`` 
=`` 
entity`` 
.``  
Moneda``  &
.``& '
Nombre``' -
,``- .
MonedaIdaa 
=aa 
entityaa !
.aa! "
MonedaIdaa" *
,aa* +
Activobb 
=bb 
entitybb 
.bb  
Activobb  &
,bb& '
Nivelcc 
=cc 
entitycc 
.cc 
Nivelcc $
.cc$ %
Nombrecc% +
,cc+ ,
NivelIddd 
=dd 
entitydd  
.dd  !
NivelIddd! (
,dd( )
Nombreee 
=ee 
entityee 
.ee  
Nombreee  &
,ee& '
FechaFinOperacionff !
=ff" #
entityff$ *
.ff* +
FechaFinOperacionff+ <
,ff< = 
FechaInicioOperaciongg $
=gg% &
entitygg' -
.gg- . 
FechaInicioOperaciongg. B
,ggB C
RegionIdhh 
=hh 
entityhh !
.hh! "
RegionIdhh" *
,hh* +
	Direccionii 
=ii 
entityii "
.ii" #
	Direccionii# ,
,ii, -
Ciudadjj 
=jj 
entityjj 
.jj  
Ciudadjj  &
,jj& '
CodigoPostalkk 
=kk 
entitykk %
.kk% &
CodigoPostalkk& 2
,kk2 3
Observacionesll 
=ll 
entityll  &
.ll& '
Observacionesll' 4
,ll4 5'
DependenciaAdministrativaIdmm +
=mm, -
entitymm. 4
.mm4 5'
DependenciaAdministrativaIdmm5 P
,mmP Q%
DependenciaAdministrativann )
=nn* +
entitynn, 2
.nn2 3%
DependenciaAdministrativann3 L
.nnL M
NombrennM S
,nnS T 
TipoCuentaBancariaIdoo $
=oo% &
entityoo' -
.oo- . 
TipoCuentaBancariaIdoo. B
,ooB C
TipoCuentaBancariapp "
=pp# $
entitypp% +
.pp+ ,
TipoCuentaBancariapp, >
.pp> ?
Nombrepp? E
,ppE F!
TitularCuentaBancariaqq %
=qq& '
entityqq( .
.qq. /!
TitularCuentaBancariaqq/ D
,qqD E 
NumeroCuentaBancariarr $
=rr% &
entityrr' -
.rr- . 
NumeroCuentaBancariarr. B
}ss 
)ss 
;ss 
varvv 
	entityDtovv 
=vv 
awaitvv !
AsyncExecutervv" /
.vv/ 0 
SingleOrDefaultAsyncvv0 D
(vvD E
queryableDtovvE Q
)vvQ R
;vvR S
ifxx 
(xx 
	entityDtoxx 
!=xx 
nullxx !
)xx! "
{xx# $
varzz !
queryableJurisdiccionzz )
=zz* +
	queryablezz, 5
.zz5 6

SelectManyzz6 @
(zz@ A
entityzzA G
=>zzH J
entityzzK Q
.zzQ R
JurisdiccionzzR ^
)zz^ _
;zz_ `
var{{ 
jurisdiccionLista{{ %
={{& '
await{{( -
AsyncExecuter{{. ;
.{{; <
ToListAsync{{< G
({{G H!
queryableJurisdiccion{{H ]
){{] ^
;{{^ _
	entityDto}} 
.}} 
Jurisdiccion}} &
=}}' (
jurisdiccionLista}}) :
.}}: ;
Select}}; A
(}}A B
a}}B C
=>}}D F
a}}G H
.}}H I
Ciudad}}I O
)}}O P
;}}P Q
} !
AddDataGeographical
ÅÅ 
(
ÅÅ  
	entityDto
ÅÅ  )
)
ÅÅ) *
;
ÅÅ* +
return
ÑÑ 
	entityDto
ÑÑ 
;
ÑÑ 
}
ÖÖ 	
public
àà 
async
àà 
Task
àà 
<
àà %
UnidadAdministrativaDto
àà 2
>
àà2 3#
ObtenerPorCodigoAsync
àà4 I
(
ààI J
string
ààJ P
codigo
ààQ W
)
ààW X
{
ââ 	
await
ää !
CheckGetPolicyAsync
ää %
(
ää% &
)
ää& '
;
ää' (
var
åå 
	queryable
åå 
=
åå 
await
åå !

Repository
åå" ,
.
åå, -
GetQueryableAsync
åå- >
(
åå> ?
)
åå? @
;
åå@ A
	queryable
çç 
=
çç 
	queryable
çç !
.
çç! "
Where
çç" '
(
çç' (
a
çç( )
=>
çç* ,
a
çç- .
.
çç. /
Codigo
çç/ 5
==
çç6 8
codigo
çç9 ?
.
çç? @
ToUpper
çç@ G
(
ççG H
)
ççH I
)
ççI J
;
ççJ K
var
èè 
queryableDto
èè 
=
èè 
	queryable
èè (
.
èè( )
Select
èè) /
(
èè/ 0
entity
èè0 6
=>
èè7 9
new
èè: =%
UnidadAdministrativaDto
èè> U
(
èèU V
)
èèV W
{
êê 
Id
ëë 
=
ëë 
entity
ëë 
.
ëë 
Id
ëë 
,
ëë &
TipoUnidadAdministrativa
íí (
=
íí) *
entity
íí+ 1
.
íí1 2&
TipoUnidadAdministrativa
íí2 J
.
ííJ K
Nombre
ííK Q
,
ííQ R
Siglas
ìì 
=
ìì 
entity
ìì 
.
ìì  
Siglas
ìì  &
,
ìì& '
Codigo
îî 
=
îî 
entity
îî 
.
îî  
Codigo
îî  &
,
îî& '(
TipoUnidadAdministrativaId
ïï *
=
ïï+ ,
entity
ïï- 3
.
ïï3 4(
TipoUnidadAdministrativaId
ïï4 N
,
ïïN O
Banco
ññ 
=
ññ 
entity
ññ 
.
ññ 
Banco
ññ $
.
ññ$ %
Nombre
ññ% +
,
ññ+ ,
BancoId
óó 
=
óó 
entity
óó  
.
óó  !
BancoId
óó! (
,
óó( )
PaisId
òò 
=
òò 
entity
òò 
.
òò  
PaisId
òò  &
,
òò& '
Moneda
ôô 
=
ôô 
entity
ôô 
.
ôô  
Moneda
ôô  &
.
ôô& '
Nombre
ôô' -
,
ôô- .
MonedaId
öö 
=
öö 
entity
öö !
.
öö! "
MonedaId
öö" *
,
öö* +
Activo
õõ 
=
õõ 
entity
õõ 
.
õõ  
Activo
õõ  &
,
õõ& '
Nivel
úú 
=
úú 
entity
úú 
.
úú 
Nivel
úú $
.
úú$ %
Nombre
úú% +
,
úú+ ,
NivelId
ùù 
=
ùù 
entity
ùù  
.
ùù  !
NivelId
ùù! (
,
ùù( )
Nombre
ûû 
=
ûû 
entity
ûû 
.
ûû  
Nombre
ûû  &
,
ûû& '
FechaFinOperacion
üü !
=
üü" #
entity
üü$ *
.
üü* +
FechaFinOperacion
üü+ <
,
üü< ="
FechaInicioOperacion
†† $
=
††% &
entity
††' -
.
††- ."
FechaInicioOperacion
††. B
,
††B C
RegionId
°° 
=
°° 
entity
°° !
.
°°! "
RegionId
°°" *
,
°°* +
	Direccion
¢¢ 
=
¢¢ 
entity
¢¢ "
.
¢¢" #
	Direccion
¢¢# ,
,
¢¢, -
Ciudad
££ 
=
££ 
entity
££ 
.
££  
Ciudad
££  &
,
££& '
CodigoPostal
§§ 
=
§§ 
entity
§§ %
.
§§% &
CodigoPostal
§§& 2
,
§§2 3
Observaciones
•• 
=
•• 
entity
••  &
.
••& '
Observaciones
••' 4
,
••4 5)
DependenciaAdministrativaId
¶¶ +
=
¶¶, -
entity
¶¶. 4
.
¶¶4 5)
DependenciaAdministrativaId
¶¶5 P
,
¶¶P Q'
DependenciaAdministrativa
ßß )
=
ßß* +
entity
ßß, 2
.
ßß2 3'
DependenciaAdministrativa
ßß3 L
.
ßßL M
Nombre
ßßM S
,
ßßS T"
TipoCuentaBancariaId
®® $
=
®®% &
entity
®®' -
.
®®- ."
TipoCuentaBancariaId
®®. B
,
®®B C 
TipoCuentaBancaria
©© "
=
©©# $
entity
©©% +
.
©©+ , 
TipoCuentaBancaria
©©, >
.
©©> ?
Nombre
©©? E
,
©©E F#
TitularCuentaBancaria
™™ %
=
™™& '
entity
™™( .
.
™™. /#
TitularCuentaBancaria
™™/ D
,
™™D E"
NumeroCuentaBancaria
´´ $
=
´´% &
entity
´´' -
.
´´- ."
NumeroCuentaBancaria
´´. B
}
¨¨ 
)
¨¨ 
;
¨¨ 
var
ØØ 
	entityDto
ØØ 
=
ØØ 
await
ØØ !
AsyncExecuter
ØØ" /
.
ØØ/ 0"
SingleOrDefaultAsync
ØØ0 D
(
ØØD E
queryableDto
ØØE Q
)
ØØQ R
;
ØØR S
if
±± 
(
±± 
	entityDto
±± 
!=
±± 
null
±± !
)
±±! "
{
≤≤ 
var
¥¥ #
queryableJurisdiccion
¥¥ )
=
¥¥* +
	queryable
¥¥, 5
.
¥¥5 6

SelectMany
¥¥6 @
(
¥¥@ A
entity
¥¥A G
=>
¥¥H J
entity
¥¥K Q
.
¥¥Q R
Jurisdiccion
¥¥R ^
)
¥¥^ _
;
¥¥_ `
var
µµ 
jurisdiccionLista
µµ %
=
µµ& '
await
µµ( -
AsyncExecuter
µµ. ;
.
µµ; <
ToListAsync
µµ< G
(
µµG H#
queryableJurisdiccion
µµH ]
)
µµ] ^
;
µµ^ _
	entityDto
∑∑ 
.
∑∑ 
Jurisdiccion
∑∑ &
=
∑∑' (
jurisdiccionLista
∑∑) :
.
∑∑: ;
Select
∑∑; A
(
∑∑A B
a
∑∑B C
=>
∑∑D F
a
∑∑G H
.
∑∑H I
Ciudad
∑∑I O
)
∑∑O P
;
∑∑P Q
}
ππ !
AddDataGeographical
ªª 
(
ªª  
	entityDto
ªª  )
)
ªª) *
;
ªª* +
return
ææ 
	entityDto
ææ 
;
ææ 
}
øø 	
public
¬¬ 
override
¬¬ 
async
¬¬ 
Task
¬¬ "
<
¬¬" #
PagedResultDto
¬¬# 1
<
¬¬1 2%
UnidadAdministrativaDto
¬¬2 I
>
¬¬I J
>
¬¬J K
GetListAsync
¬¬L X
(
¬¬X Y*
GetUnidadAdministrativaInput
¬¬Y u
input
¬¬v {
)
¬¬{ |
{
√√ 	
await
≈≈ %
CheckGetListPolicyAsync
≈≈ )
(
≈≈) *
)
≈≈* +
;
≈≈+ ,
var
«« 
	queryable
«« 
=
«« 
await
«« !&
CreateFilteredQueryAsync
««" :
(
««: ;
input
««; @
)
««@ A
;
««A B
	queryable
   
=
   
	queryable
   !
.
  ! "
WhereIf
  " )
(
  ) *
!
ÀÀ 
input
ÀÀ 
.
ÀÀ 
Filter
ÀÀ !
.
ÀÀ! " 
IsNullOrWhiteSpace
ÀÀ" 4
(
ÀÀ4 5
)
ÀÀ5 6
,
ÀÀ6 7
u
ÃÃ 
=>
ÃÃ 
u
ÕÕ 
.
ÕÕ 
Nombre
ÕÕ 
.
ÕÕ  
ToUpper
ÕÕ  '
(
ÕÕ' (
)
ÕÕ( )
.
ÕÕ) *
Contains
ÕÕ* 2
(
ÕÕ2 3
input
ÕÕ3 8
.
ÕÕ8 9
Filter
ÕÕ9 ?
.
ÕÕ? @
ToUpper
ÕÕ@ G
(
ÕÕG H
)
ÕÕH I
)
ÕÕI J
||
ŒŒ 
u
ŒŒ 
.
ŒŒ 
Siglas
ŒŒ "
.
ŒŒ" #
ToUpper
ŒŒ# *
(
ŒŒ* +
)
ŒŒ+ ,
.
ŒŒ, -
Contains
ŒŒ- 5
(
ŒŒ5 6
input
ŒŒ6 ;
.
ŒŒ; <
Filter
ŒŒ< B
.
ŒŒB C
ToUpper
ŒŒC J
(
ŒŒJ K
)
ŒŒK L
)
ŒŒL M
||
œœ 
u
œœ 
.
œœ 
Codigo
œœ "
.
œœ" #
ToUpper
œœ# *
(
œœ* +
)
œœ+ ,
.
œœ, -
Contains
œœ- 5
(
œœ5 6
input
œœ6 ;
.
œœ; <
Filter
œœ< B
.
œœB C
ToUpper
œœC J
(
œœJ K
)
œœK L
)
œœL M
)
–– 
;
–– 
	queryable
““ 
=
““ 
	queryable
““ !
.
““! "
WhereIf
““" )
(
““) *
!
”” 
input
”” 
.
”” (
TipoUnidadAdministrativaId
”” 3
.
””3 4 
IsNullOrWhiteSpace
””4 F
(
””F G
)
””G H
,
””H I
u
‘‘ 
=>
‘‘ 
u
’’ 
.
’’ (
TipoUnidadAdministrativaId
’’ 2
==
’’3 5
input
’’6 ;
.
’’; <(
TipoUnidadAdministrativaId
’’< V
)
÷÷ 
;
÷÷ 
var
ÿÿ 

totalCount
ÿÿ 
=
ÿÿ 
await
ÿÿ "
AsyncExecuter
ÿÿ# 0
.
ÿÿ0 1

CountAsync
ÿÿ1 ;
(
ÿÿ; <
	queryable
ÿÿ< E
)
ÿÿE F
;
ÿÿF G
	queryable
⁄⁄ 
=
⁄⁄  
ApplySortingCustom
⁄⁄ *
(
⁄⁄* +
	queryable
⁄⁄+ 4
,
⁄⁄4 5
input
⁄⁄6 ;
)
⁄⁄; <
;
⁄⁄< =
	queryable
€€ 
=
€€ 
ApplyPagingCustom
€€ )
(
€€) *
	queryable
€€* 3
,
€€3 4
input
€€5 :
)
€€: ;
;
€€; <
var
›› 
queryableDto
›› 
=
›› 
	queryable
›› (
.
››( )
Select
››) /
(
››/ 0
entity
››0 6
=>
››7 9
new
››: =%
UnidadAdministrativaDto
››> U
(
››U V
)
››V W
{
ﬁﬁ 
Id
ﬂﬂ 
=
ﬂﬂ 
entity
ﬂﬂ 
.
ﬂﬂ 
Id
ﬂﬂ 
,
ﬂﬂ &
TipoUnidadAdministrativa
‡‡ (
=
‡‡) *
entity
‡‡+ 1
.
‡‡1 2&
TipoUnidadAdministrativa
‡‡2 J
.
‡‡J K
Nombre
‡‡K Q
,
‡‡Q R(
TipoUnidadAdministrativaId
·· *
=
··+ ,
entity
··- 3
.
··3 4(
TipoUnidadAdministrativaId
··4 N
,
··N O
Banco
‚‚ 
=
‚‚ 
entity
‚‚ 
.
‚‚ 
Banco
‚‚ $
.
‚‚$ %
Nombre
‚‚% +
,
‚‚+ ,
BancoId
„„ 
=
„„ 
entity
„„  
.
„„  !
BancoId
„„! (
,
„„( )
PaisId
‰‰ 
=
‰‰ 
entity
‰‰ 
.
‰‰  
PaisId
‰‰  &
,
‰‰& '
Moneda
ÂÂ 
=
ÂÂ 
entity
ÂÂ 
.
ÂÂ  
Moneda
ÂÂ  &
.
ÂÂ& '
Nombre
ÂÂ' -
,
ÂÂ- .
MonedaId
ÊÊ 
=
ÊÊ 
entity
ÊÊ !
.
ÊÊ! "
MonedaId
ÊÊ" *
,
ÊÊ* +
Activo
ÁÁ 
=
ÁÁ 
entity
ÁÁ 
.
ÁÁ  
Activo
ÁÁ  &
,
ÁÁ& '
Nivel
ËË 
=
ËË 
entity
ËË 
.
ËË 
Nivel
ËË $
.
ËË$ %
Nombre
ËË% +
,
ËË+ ,
NivelId
ÈÈ 
=
ÈÈ 
entity
ÈÈ  
.
ÈÈ  !
NivelId
ÈÈ! (
,
ÈÈ( )
Nombre
ÍÍ 
=
ÍÍ 
entity
ÍÍ 
.
ÍÍ  
Nombre
ÍÍ  &
,
ÍÍ& '
Siglas
ÎÎ 
=
ÎÎ 
entity
ÎÎ 
.
ÎÎ  
Siglas
ÎÎ  &
,
ÎÎ& '
Codigo
ÏÏ 
=
ÏÏ 
entity
ÏÏ 
.
ÏÏ  
Codigo
ÏÏ  &
,
ÏÏ& '
FechaFinOperacion
ÌÌ !
=
ÌÌ" #
entity
ÌÌ$ *
.
ÌÌ* +
FechaFinOperacion
ÌÌ+ <
,
ÌÌ< ="
FechaInicioOperacion
ÓÓ $
=
ÓÓ% &
entity
ÓÓ' -
.
ÓÓ- ."
FechaInicioOperacion
ÓÓ. B
,
ÓÓB C
RegionId
ÔÔ 
=
ÔÔ 
entity
ÔÔ !
.
ÔÔ! "
RegionId
ÔÔ" *
,
ÔÔ* +
	Direccion
 
=
 
entity
 "
.
" #
	Direccion
# ,
,
, -
Ciudad
ÒÒ 
=
ÒÒ 
entity
ÒÒ 
.
ÒÒ  
Ciudad
ÒÒ  &
,
ÒÒ& '
CodigoPostal
ÚÚ 
=
ÚÚ 
entity
ÚÚ %
.
ÚÚ% &
CodigoPostal
ÚÚ& 2
,
ÚÚ2 3
Observaciones
ÛÛ 
=
ÛÛ 
entity
ÛÛ  &
.
ÛÛ& '
Observaciones
ÛÛ' 4
,
ÛÛ4 5"
TipoCuentaBancariaId
ÙÙ $
=
ÙÙ% &
entity
ÙÙ' -
.
ÙÙ- ."
TipoCuentaBancariaId
ÙÙ. B
,
ÙÙB C 
TipoCuentaBancaria
ıı "
=
ıı# $
entity
ıı% +
.
ıı+ , 
TipoCuentaBancaria
ıı, >
.
ıı> ?
Nombre
ıı? E
,
ııE F#
TitularCuentaBancaria
ˆˆ %
=
ˆˆ& '
entity
ˆˆ( .
.
ˆˆ. /#
TitularCuentaBancaria
ˆˆ/ D
,
ˆˆD E"
NumeroCuentaBancaria
˜˜ $
=
˜˜% &
entity
˜˜' -
.
˜˜- ."
NumeroCuentaBancaria
˜˜. B
}
¯¯ 
)
¯¯ 
;
¯¯ 
var
˙˙ 

entityDtos
˙˙ 
=
˙˙ 
await
˙˙ "
AsyncExecuter
˙˙# 0
.
˙˙0 1
ToListAsync
˙˙1 <
(
˙˙< =
queryableDto
˙˙= I
)
˙˙I J
;
˙˙J K
var
˝˝ #
queryableJurisdiccion
˝˝ %
=
˝˝& '
	queryable
˝˝( 1
.
˝˝1 2

SelectMany
˝˝2 <
(
˝˝< =
entity
˝˝= C
=>
˝˝D F
entity
˝˝G M
.
˝˝M N
Jurisdiccion
˝˝N Z
)
˝˝Z [
;
˝˝[ \
var
˛˛ 
jurisdiccionLista
˛˛ !
=
˛˛" #
await
˛˛$ )
AsyncExecuter
˛˛* 7
.
˛˛7 8
ToListAsync
˛˛8 C
(
˛˛C D#
queryableJurisdiccion
˛˛D Y
)
˛˛Y Z
;
˛˛Z [
foreach
ÄÄ 
(
ÄÄ 
var
ÄÄ %
unidadAdministrativaDto
ÄÄ 0
in
ÄÄ1 3

entityDtos
ÄÄ4 >
)
ÄÄ> ?
{
ÅÅ %
unidadAdministrativaDto
ÇÇ '
.
ÇÇ' (
Jurisdiccion
ÇÇ( 4
=
ÇÇ5 6
jurisdiccionLista
ÇÇ7 H
.
ÇÇH I
Where
ÇÇI N
(
ÇÇN O
a
ÇÇO P
=>
ÇÇP R
a
ÇÇR S
.
ÇÇS T$
UnidadAdministrativaId
ÇÇT j
==
ÇÇj l&
unidadAdministrativaDtoÇÇl É
.ÇÇÉ Ñ
IdÇÇÑ Ü
)ÇÇÜ á
.ÇÇá à
SelectÇÇà é
(ÇÇé è
aÇÇè ê
=>ÇÇë ì
aÇÇî ï
.ÇÇï ñ
CiudadÇÇñ ú
)ÇÇú ù
;ÇÇù û
}
ÉÉ !
AddDataGeographical
ÖÖ 
(
ÖÖ  

entityDtos
ÖÖ  *
)
ÖÖ* +
;
ÖÖ+ ,
return
áá 
new
áá 
PagedResultDto
áá %
<
áá% &%
UnidadAdministrativaDto
áá& =
>
áá= >
(
áá> ?

totalCount
àà 
,
àà 

entityDtos
ââ 
)
ää 
;
ää 
}
ãã 	
public
éé 
async
éé 
Task
éé 
<
éé 
ListResultDto
éé '
<
éé' ()
UnidadAdministrativaInfoDto
éé( C
>
ééC D
>
ééD E.
 GetLookupAdministrativeUnitAsync
ééF f
(
ééf g
)
éég h
{
èè 	
await
êê %
CheckGetListPolicyAsync
êê )
(
êê) *
)
êê* +
;
êê+ ,
var
íí 
list
íí 
=
íí 
await
íí 

Repository
íí '
.
íí' (
GetListAsync
íí( 4
(
íí4 5
)
íí5 6
;
íí6 7
return
îî 
new
îî 
ListResultDto
îî $
<
îî$ %)
UnidadAdministrativaInfoDto
îî% @
>
îî@ A
(
îîA B
ObjectMapper
ïï 
.
ïï 
Map
ïï  
<
ïï  !
List
ïï! %
<
ïï% &
Dominio
ïï& -
.
ïï- ."
UnidadAdministrativa
ïï. B
>
ïïB C
,
ïïC D
List
ïïE I
<
ïïI J)
UnidadAdministrativaInfoDto
ïïJ e
>
ïïe f
>
ïïf g
(
ïïg h
list
ïïh l
)
ïïl m
)
ññ 
;
ññ 
}
óó 	
public
ôô 
async
ôô 
Task
ôô 
<
ôô 
ListResultDto
ôô '
<
ôô' ()
UnidadAdministrativaInfoDto
ôô( C
>
ôôC D
>
ôôD E9
+ObtenerUnidadAdministrativaPorServicioAsync
ôôF q
(
ôôq r
Guid
ôôr v

servicioIdôôw Å
)ôôÅ Ç
{
öö 	
await
õõ !
CheckGetPolicyAsync
õõ %
(
õõ% &
)
õõ& '
;
õõ' (
var
ùù 2
$consultaServicioUnidadAdministrativa
ùù 4
=
ùù5 6
await
ùù7 <3
%_administrativeUnitServiceRespository
ùù= b
.
ùùb c
GetQueryableAsync
ùùc t
(
ùùt u
)
ùùu v
;
ùùv w
var
ûû *
consultaUnidadAdministrativa
ûû ,
=
ûû- .
await
ûû/ 4

Repository
ûû5 ?
.
ûû? @
GetQueryableAsync
ûû@ Q
(
ûûQ R
)
ûûR S
;
ûûS T
var
†† 
queryDto
†† 
=
†† 
from
†† 
servicio
††  (
in
††) +2
$consultaServicioUnidadAdministrativa
††, P
join
°° "
unidadAdministrativa
°°  4
in
°°5 7*
consultaUnidadAdministrativa
°°8 T
on
¢¢ 
servicio
¢¢ &
.
¢¢& '$
UnidadAdministrativaId
¢¢' =
equals
¢¢> D"
unidadAdministrativa
¢¢E Y
.
¢¢Y Z
Id
¢¢Z \
where
££  
servicio
££! )
.
££) *

ServicioId
££* 4
==
££5 7

servicioId
££8 B
&&
££C E
servicio
££F N
.
££N O
Activo
££O U
select
§§ !
new
§§" %)
UnidadAdministrativaInfoDto
§§& A
{
•• 
Id
¶¶ !
=
¶¶" #"
unidadAdministrativa
¶¶$ 8
.
¶¶8 9
Id
¶¶9 ;
,
¶¶; <
Nombre
ßß %
=
ßß& '"
unidadAdministrativa
ßß( <
.
ßß< =
Nombre
ßß= C
,
ßßC D
PaisId
®® %
=
®®& '"
unidadAdministrativa
®®( <
.
®®< =
PaisId
®®= C
,
®®C D
Siglas
©© %
=
©©& '"
unidadAdministrativa
©©( <
.
©©< =
Siglas
©©= C
,
©©C D
Codigo
™™ %
=
™™& '"
unidadAdministrativa
™™( <
.
™™< =
Codigo
™™= C
}
´´ 
;
´´ 
var
ÆÆ 
resultadoDto
ÆÆ 
=
ÆÆ 
await
ÆÆ $
AsyncExecuter
ÆÆ% 2
.
ÆÆ2 3
ToListAsync
ÆÆ3 >
(
ÆÆ> ?
queryDto
ÆÆ? G
)
ÆÆG H
;
ÆÆH I
return
±± 
new
±± 
ListResultDto
±± $
<
±±$ %)
UnidadAdministrativaInfoDto
±±% @
>
±±@ A
(
±±A B
resultadoDto
±±B N
)
±±N O
;
±±O P
}
≤≤ 	
public
¥¥ 
async
¥¥ 
Task
¥¥ 
<
¥¥ 
ListResultDto
¥¥ '
<
¥¥' ()
UnidadAdministrativaInfoDto
¥¥( C
>
¥¥C D
>
¥¥D E 
ObtenerPorListaIds
¥¥F X
(
¥¥X Y
List
¥¥Y ]
<
¥¥] ^
Guid
¥¥^ b
>
¥¥b c
ids
¥¥d g
)
¥¥g h
{
µµ 	
await
∂∂ !
CheckGetPolicyAsync
∂∂ %
(
∂∂% &
)
∂∂& '
;
∂∂' (
var
∏∏ 
query
∏∏ 
=
∏∏ 
await
∏∏ 

Repository
∏∏ (
.
∏∏( )
GetQueryableAsync
∏∏) :
(
∏∏: ;
)
∏∏; <
;
∏∏< =
query
ππ 
=
ππ 
query
ππ 
.
ππ 
Where
ππ 
(
ππ  
x
ππ  !
=>
ππ" $
ids
ππ% (
.
ππ( )
Contains
ππ) 1
(
ππ1 2
x
ππ2 3
.
ππ3 4
Id
ππ4 6
)
ππ6 7
)
ππ7 8
;
ππ8 9
var
ªª 
queryDto
ªª 
=
ªª 
query
ªª  
.
ªª  !
Select
ªª! '
(
ªª' (
entidad
ªª( /
=>
ªª0 2
new
ªª3 6)
UnidadAdministrativaInfoDto
ªª7 R
{
ºº 
Id
ΩΩ 
=
ΩΩ 
entidad
ΩΩ 
.
ΩΩ 
Id
ΩΩ 
,
ΩΩ  
Nombre
ææ 
=
ææ 
entidad
ææ  
.
ææ  !
Nombre
ææ! '
,
ææ' (
PaisId
øø 
=
øø 
entidad
øø  
.
øø  !
PaisId
øø! '
,
øø' (
Siglas
¿¿ 
=
¿¿ 
entidad
¿¿  
.
¿¿  !
Siglas
¿¿! '
,
¿¿' (
Codigo
¡¡ 
=
¡¡ 
entidad
¡¡  
.
¡¡  !
Codigo
¡¡! '
}
¬¬ 
)
¬¬ 
;
¬¬ 
var
ƒƒ 
resultadoDto
ƒƒ 
=
ƒƒ 
await
ƒƒ $
AsyncExecuter
ƒƒ% 2
.
ƒƒ2 3
ToListAsync
ƒƒ3 >
(
ƒƒ> ?
queryDto
ƒƒ? G
)
ƒƒG H
;
ƒƒH I
return
«« 
new
«« 
ListResultDto
«« $
<
««$ %)
UnidadAdministrativaInfoDto
««% @
>
««@ A
(
««A B
resultadoDto
««B N
)
««N O
;
««O P
}
»» 	
public
   
async
   
Task
   
<
   
ListResultDto
   '
<
  ' ()
UnidadAdministrativaInfoDto
  ( C
>
  C D
>
  D E5
'ObtenerUnidadAdminsitrativaPorPaisAsync
  F m
(
  m n
string
  n t

codigoPais
  u 
)   Ä
{
ÀÀ 	
await
ÃÃ !
CheckGetPolicyAsync
ÃÃ %
(
ÃÃ% &
)
ÃÃ& '
;
ÃÃ' (
var
ŒŒ 
	queryable
ŒŒ 
=
ŒŒ 
await
ŒŒ !

Repository
ŒŒ" ,
.
ŒŒ, -
GetQueryableAsync
ŒŒ- >
(
ŒŒ> ?
)
ŒŒ? @
;
ŒŒ@ A
	queryable
œœ 
=
œœ 
	queryable
œœ !
.
œœ! "
Where
œœ" '
(
œœ' (
a
œœ( )
=>
œœ* ,
a
œœ- .
.
œœ. /
PaisId
œœ/ 5
==
œœ6 8

codigoPais
œœ9 C
)
œœC D
;
œœD E
var
—— 
queryableDto
—— 
=
—— 
	queryable
—— (
.
——( )
Select
——) /
(
——/ 0
entidad
——0 7
=>
——8 :
new
——; >)
UnidadAdministrativaInfoDto
——? Z
(
——Z [
)
——[ \
{
““ 
Id
”” 
=
”” 
entidad
”” 
.
”” 
Id
”” 
,
””  
Nombre
‘‘ 
=
‘‘ 
entidad
‘‘  
.
‘‘  !
Nombre
‘‘! '
,
‘‘' (
PaisId
’’ 
=
’’ 
entidad
’’  
.
’’  !
PaisId
’’! '
,
’’' (
Siglas
÷÷ 
=
÷÷ 
entidad
÷÷  
.
÷÷  !
Siglas
÷÷! '
,
÷÷' (
Codigo
◊◊ 
=
◊◊ 
entidad
◊◊  
.
◊◊  !
Codigo
◊◊! '
}
ÿÿ 
)
ÿÿ 
;
ÿÿ 
var
⁄⁄ 
entidadadesDto
⁄⁄ 
=
⁄⁄  
await
⁄⁄! &
AsyncExecuter
⁄⁄' 4
.
⁄⁄4 5
ToListAsync
⁄⁄5 @
(
⁄⁄@ A
queryableDto
⁄⁄A M
)
⁄⁄M N
;
⁄⁄N O
return
‹‹ 
new
‹‹ 
ListResultDto
‹‹ $
<
‹‹$ %)
UnidadAdministrativaInfoDto
‹‹% @
>
‹‹@ A
(
‹‹A B
entidadadesDto
‹‹B P
)
‹‹P Q
;
‹‹Q R
}
›› 	
public
ﬂﬂ 
async
ﬂﬂ 
Task
ﬂﬂ 
<
ﬂﬂ 
ListResultDto
ﬂﬂ '
<
ﬂﬂ' ()
UnidadAdministrativaInfoDto
ﬂﬂ( C
>
ﬂﬂC D
>
ﬂﬂD E=
/ObtenerUnidadAdministrativaPorServicioPaisAsync
ﬂﬂF u
(
ﬂﬂu v
Guid
ﬂﬂv z

servicioIdﬂﬂ{ Ö
,ﬂﬂÖ Ü
stringﬂﬂá ç

codigoPaisﬂﬂé ò
)ﬂﬂò ô
{
‡‡ 	
await
·· !
CheckGetPolicyAsync
·· %
(
··% &
)
··& '
;
··' (
var
„„ 
queryPorServicio
„„  
=
„„! "
await
„„# (3
%_administrativeUnitServiceRespository
„„) N
.
„„N O
GetQueryableAsync
„„O `
(
„„` a
)
„„a b
;
„„b c
queryPorServicio
‰‰ 
=
‰‰ 
queryPorServicio
‰‰ /
.
‰‰/ 0
Where
‰‰0 5
(
‰‰5 6
x
‰‰6 7
=>
‰‰8 :
x
‰‰; <
.
‰‰< =

ServicioId
‰‰= G
==
‰‰H J

servicioId
‰‰K U
&&
‰‰V X
x
‰‰Y Z
.
‰‰Z [
Activo
‰‰[ a
)
‰‰a b
;
‰‰b c
var
ÁÁ 
queryPorPais
ÁÁ 
=
ÁÁ 
await
ÁÁ $

Repository
ÁÁ% /
.
ÁÁ/ 0
GetQueryableAsync
ÁÁ0 A
(
ÁÁA B
)
ÁÁB C
;
ÁÁC D
queryPorPais
ËË 
=
ËË 
queryPorPais
ËË '
.
ËË' (
Where
ËË( -
(
ËË- .
x
ËË. /
=>
ËË0 2
x
ËË3 4
.
ËË4 5
PaisId
ËË5 ;
==
ËË< >

codigoPais
ËË? I
&&
ËËJ L
x
ËËM N
.
ËËN O
Activo
ËËO U
)
ËËU V
;
ËËV W
var
ÍÍ 
queryDto
ÍÍ 
=
ÍÍ 
from
ÍÍ 
entity
ÍÍ  &
in
ÍÍ' )
queryPorServicio
ÍÍ* :
join
ÎÎ "
unidadAdministrativa
ÎÎ  4
in
ÎÎ5 7
queryPorPais
ÎÎ8 D
on
ÏÏ 
entity
ÏÏ $
.
ÏÏ$ %$
UnidadAdministrativaId
ÏÏ% ;
equals
ÏÏ< B"
unidadAdministrativa
ÏÏC W
.
ÏÏW X
Id
ÏÏX Z
select
ÌÌ !
new
ÌÌ" %)
UnidadAdministrativaInfoDto
ÌÌ& A
{
ÓÓ 
Id
ÔÔ !
=
ÔÔ" #"
unidadAdministrativa
ÔÔ$ 8
.
ÔÔ8 9
Id
ÔÔ9 ;
,
ÔÔ; <
Nombre
 %
=
& '"
unidadAdministrativa
( <
.
< =
Nombre
= C
,
C D
Siglas
ÒÒ %
=
ÒÒ& '"
unidadAdministrativa
ÒÒ( <
.
ÒÒ< =
Siglas
ÒÒ= C
,
ÒÒC D
PaisId
ÚÚ %
=
ÚÚ& '"
unidadAdministrativa
ÚÚ( <
.
ÚÚ< =
PaisId
ÚÚ= C
,
ÚÚC D
Codigo
ÛÛ %
=
ÛÛ& '"
unidadAdministrativa
ÛÛ( <
.
ÛÛ< =
Codigo
ÛÛ= C
}
ÙÙ 
;
ÙÙ 
var
ˆˆ 
resultadoDto
ˆˆ 
=
ˆˆ 
await
ˆˆ $
AsyncExecuter
ˆˆ% 2
.
ˆˆ2 3
ToListAsync
ˆˆ3 >
(
ˆˆ> ?
queryDto
ˆˆ? G
)
ˆˆG H
;
ˆˆH I
return
˘˘ 
new
˘˘ 
ListResultDto
˘˘ $
<
˘˘$ %)
UnidadAdministrativaInfoDto
˘˘% @
>
˘˘@ A
(
˘˘A B
resultadoDto
˘˘B N
)
˘˘N O
;
˘˘O P
}
˙˙ 	
public
¸¸ 
async
¸¸ 
Task
¸¸ 
<
¸¸ 
ListResultDto
¸¸ '
<
¸¸' ()
UnidadAdministrativaInfoDto
¸¸( C
>
¸¸C D
>
¸¸D EC
5ObtenerUnidadAdministrativaPorCiudadJurisdiccionAsync
¸¸F {
(
¸¸{ |
string¸¸| Ç
ciudad¸¸É â
)¸¸â ä
{
˝˝ 	
await
˛˛ !
CheckGetPolicyAsync
˛˛ %
(
˛˛% &
)
˛˛& '
;
˛˛' (
var
ÄÄ 
query
ÄÄ 
=
ÄÄ 
await
ÄÄ 

Repository
ÄÄ (
.
ÄÄ( )
GetQueryableAsync
ÄÄ) :
(
ÄÄ: ;
)
ÄÄ; <
;
ÄÄ< =
query
ÅÅ 
=
ÅÅ 
query
ÅÅ 
.
ÅÅ 
Where
ÅÅ 
(
ÅÅ  
x
ÅÅ  !
=>
ÅÅ" $
x
ÅÅ% &
.
ÅÅ& '
Activo
ÅÅ' -
)
ÅÅ- .
;
ÅÅ. /
query
ÇÇ 
=
ÇÇ 
query
ÇÇ 
.
ÇÇ 
Where
ÇÇ 
(
ÇÇ  
x
ÇÇ  !
=>
ÇÇ" $
x
ÇÇ% &
.
ÇÇ& '
Jurisdiccion
ÇÇ' 3
.
ÇÇ3 4
Any
ÇÇ4 7
(
ÇÇ7 8
j
ÇÇ8 9
=>
ÇÇ: <
j
ÇÇ= >
.
ÇÇ> ?
Ciudad
ÇÇ? E
==
ÇÇF H
ciudad
ÇÇI O
.
ÇÇO P
ToUpper
ÇÇP W
(
ÇÇW X
)
ÇÇX Y
)
ÇÇY Z
)
ÇÇZ [
;
ÇÇ[ \
var
ÖÖ 
queryDto
ÖÖ 
=
ÖÖ 
from
ÖÖ "
unidadAdministrativa
ÖÖ  4
in
ÖÖ5 7
query
ÖÖ8 =
select
ÜÜ !
new
ÜÜ" %)
UnidadAdministrativaInfoDto
ÜÜ& A
{
áá 
Id
àà !
=
àà" #"
unidadAdministrativa
àà$ 8
.
àà8 9
Id
àà9 ;
,
àà; <
Nombre
ââ %
=
ââ& '"
unidadAdministrativa
ââ( <
.
ââ< =
Nombre
ââ= C
,
ââC D
Siglas
ää %
=
ää& '"
unidadAdministrativa
ää( <
.
ää< =
Siglas
ää= C
,
ääC D
PaisId
ãã %
=
ãã& '"
unidadAdministrativa
ãã( <
.
ãã< =
PaisId
ãã= C
,
ããC D
Codigo
åå %
=
åå& '"
unidadAdministrativa
åå( <
.
åå< =
Codigo
åå= C
}
çç 
;
çç 
var
èè ,
unidadesAdministrativasInfoDto
èè .
=
èè/ 0
await
èè1 6
AsyncExecuter
èè7 D
.
èèD E
ToListAsync
èèE P
(
èèP Q
queryDto
èèQ Y
)
èèY Z
;
èèZ [
return
ëë 
new
ëë 
ListResultDto
ëë $
<
ëë$ %)
UnidadAdministrativaInfoDto
ëë% @
>
ëë@ A
(
ëëA B,
unidadesAdministrativasInfoDto
ëëB `
)
ëë` a
;
ëëa b
}
íí 	
public
óó 
override
óó 
async
óó 
Task
óó "
<
óó" #%
UnidadAdministrativaDto
óó# :
>
óó: ;
CreateAsync
óó< G
(
óóG H4
&CrearActualizarUnidadAdministrativaDto
óóH n
input
óóo t
)
óót u
{
òò 	
await
öö $
CheckCreatePolicyAsync
öö (
(
öö( )
)
öö) *
;
öö* +
var
úú 
entity
úú 
=
úú 
await
úú )
UnidadAdministrativaManager
úú :
.
úú: ;

CrearAsync
úú; E
(
úúE F
id
ùù 
:
ùù 
GuidGenerator
ùù !
.
ùù! "
Create
ùù" (
(
ùù( )
)
ùù) *
,
ùù* +
name
ûû 
:
ûû 
input
ûû 
.
ûû 
Nombre
ûû "
,
ûû" #
codigo
üü 
:
üü 
input
üü 
.
üü 
Codigo
üü $
,
üü$ %&
administrativeUnitTypeId
†† (
:
††( )
input
††* /
.
††/ 0(
TipoUnidadAdministrativaId
††0 J
,
††J K(
administrativeDependencyId
°° *
:
°°* +
input
°°, 1
.
°°1 2)
DependenciaAdministrativaId
°°2 M
,
°°M N
acronym
¢¢ 
:
¢¢ 
input
¢¢ 
.
¢¢ 
Siglas
¢¢ %
,
¢¢% &
	countryId
££ 
:
££ 
input
££  
.
££  !
PaisId
££! '
,
££' (
regionId
§§ 
:
§§ 
input
§§ 
.
§§  
RegionId
§§  (
,
§§( )
city
•• 
:
•• 
input
•• 
.
•• 
Ciudad
•• "
,
••" #
address
¶¶ 
:
¶¶ 
input
¶¶ 
.
¶¶ 
	Direccion
¶¶ (
,
¶¶( )
zipCode
ßß 
:
ßß 
input
ßß 
.
ßß 
CodigoPostal
ßß +
,
ßß+ ,
bankId
®® 
:
®® 
input
®® 
.
®® 
BancoId
®® %
,
®®% &

currencyId
©© 
:
©© 
input
©© !
.
©©! "
MonedaId
©©" *
,
©©* + 
operationStartDate
™™ "
:
™™" #
input
™™$ )
.
™™) *"
FechaInicioOperacion
™™* >
,
™™> ?
operationEndDate
´´  
:
´´  !
input
´´" '
.
´´' (
FechaFinOperacion
´´( 9
,
´´9 :
levelId
¨¨ 
:
¨¨ 
input
¨¨ 
.
¨¨ 
NivelId
¨¨ &
,
¨¨& '
isActive
≠≠ 
:
≠≠ 
input
≠≠ 
.
≠≠  
Activo
≠≠  &
,
≠≠& '
observations
ÆÆ 
:
ÆÆ 
input
ÆÆ #
.
ÆÆ# $
Observaciones
ÆÆ$ 1
,
ÆÆ1 2"
tipoCuentaBancariaId
ØØ $
:
ØØ$ %
input
ØØ& +
.
ØØ+ ,"
TipoCuentaBancariaId
ØØ, @
,
ØØ@ A#
titularCuentaBancaria
∞∞ %
:
∞∞% &
input
∞∞' ,
.
∞∞, -#
TitularCuentaBancaria
∞∞- B
,
∞∞B C"
numeroCuentaBancaria
±± $
:
±±$ %
input
±±& +
.
±±+ ,"
NumeroCuentaBancaria
±±, @
)
≤≤ 
;
≤≤ 
TryToSetTenantId
¥¥ 
(
¥¥ 
entity
¥¥ "
)
¥¥" #
;
¥¥# $
entity
∂∂ 
=
∂∂ 
await
∂∂ )
UnidadAdministrativaManager
∂∂ 5
.
∂∂5 6)
EstablecerJurisdiccionAsync
∂∂6 Q
(
∂∂Q R
entity
∂∂R X
,
∂∂X Y
input
∂∂Y ^
.
∂∂^ _
Jurisdiccion
∂∂_ k
)
∂∂k l
;
∂∂l m
await
∏∏ 

Repository
∏∏ 
.
∏∏ 
InsertAsync
∏∏ '
(
∏∏' (
entity
∏∏( .
,
∏∏. /
autoSave
∏∏0 8
:
∏∏8 9
true
∏∏: >
)
∏∏> ?
;
∏∏? @
return
∫∫ 
await
∫∫ 
GetAsync
∫∫ !
(
∫∫! "
entity
∫∫" (
.
∫∫( )
Id
∫∫) +
)
∫∫+ ,
;
∫∫, -
}
ªª 	
public
ΩΩ 
override
ΩΩ 
async
ΩΩ 
Task
ΩΩ "
<
ΩΩ" #%
UnidadAdministrativaDto
ΩΩ# :
>
ΩΩ: ;
UpdateAsync
ΩΩ< G
(
ΩΩG H
Guid
ΩΩH L
id
ΩΩM O
,
ΩΩO P4
&CrearActualizarUnidadAdministrativaDto
ΩΩQ w
input
ΩΩx }
)
ΩΩ} ~
{
ææ 	
await
¿¿ $
CheckUpdatePolicyAsync
¿¿ (
(
¿¿( )
)
¿¿) *
;
¿¿* +
var
¬¬ 
	queryable
¬¬ 
=
¬¬ 
await
¬¬ !

Repository
¬¬" ,
.
¬¬, -
WithDetailsAsync
¬¬- =
(
¬¬= >
p
¬¬> ?
=>
¬¬@ B
p
¬¬C D
.
¬¬D E
Jurisdiccion
¬¬E Q
)
¬¬Q R
;
¬¬R S
	queryable
√√ 
=
√√ 
	queryable
√√ !
.
√√! "
Where
√√" '
(
√√' (
a
√√( )
=>
√√* ,
a
√√- .
.
√√. /
Id
√√/ 1
==
√√2 4
id
√√5 7
)
√√7 8
;
√√8 9
var
≈≈ 
entity
≈≈ 
=
≈≈ 
await
≈≈ 
AsyncExecuter
≈≈ ,
.
≈≈, -"
SingleOrDefaultAsync
≈≈- A
(
≈≈A B
	queryable
≈≈B K
)
≈≈K L
;
≈≈L M
if
»» 
(
»» 
!
»» 
entity
»» 
.
»» 
Nombre
»» 
.
»» 
Equals
»» %
(
»»% &
input
»»& +
.
»»+ ,
Nombre
»», 2
,
»»2 3
StringComparison
»»4 D
.
»»D E
OrdinalIgnoreCase
»»E V
)
»»V W
)
»»W X
{
…… 
await
   )
UnidadAdministrativaManager
   1
.
  1 2 
CambiarNombreAsync
  2 D
(
  D E
entity
  E K
,
  K L
input
  M R
.
  R S
Nombre
  S Y
)
  Y Z
;
  Z [
}
ÀÀ 
if
ÕÕ 
(
ÕÕ 
!
ÕÕ 
entity
ÕÕ 
.
ÕÕ 
Siglas
ÕÕ 
.
ÕÕ 
Equals
ÕÕ %
(
ÕÕ% &
input
ÕÕ& +
.
ÕÕ+ ,
Siglas
ÕÕ, 2
,
ÕÕ2 3
StringComparison
ÕÕ4 D
.
ÕÕD E
OrdinalIgnoreCase
ÕÕE V
)
ÕÕV W
)
ÕÕW X
{
ŒŒ 
await
œœ )
UnidadAdministrativaManager
œœ 1
.
œœ1 2 
CambiarSiglasAsync
œœ2 D
(
œœD E
entity
œœE K
,
œœK L
input
œœM R
.
œœR S
Siglas
œœS Y
)
œœY Z
;
œœZ [
}
–– 
await
““ 
MapToEntityAsync
““ "
(
““" #
input
““# (
,
““( )
entity
““* 0
)
““0 1
;
““1 2
entity
‘‘ 
=
‘‘ 
await
‘‘ )
UnidadAdministrativaManager
‘‘ 6
.
‘‘6 7)
EstablecerJurisdiccionAsync
‘‘7 R
(
‘‘R S
entity
‘‘S Y
,
‘‘Y Z
input
‘‘[ `
.
‘‘` a
Jurisdiccion
‘‘a m
)
‘‘m n
;
‘‘n o
await
÷÷ 

Repository
÷÷ 
.
÷÷ 
UpdateAsync
÷÷ (
(
÷÷( )
entity
÷÷) /
,
÷÷/ 0
autoSave
÷÷1 9
:
÷÷9 :
true
÷÷; ?
)
÷÷? @
;
÷÷@ A
return
ÿÿ 
await
ÿÿ 
GetAsync
ÿÿ !
(
ÿÿ! "
entity
ÿÿ" (
.
ÿÿ( )
Id
ÿÿ) +
)
ÿÿ+ ,
;
ÿÿ, -
}
ŸŸ 	
public
€€ 
override
€€ 
async
€€ 
Task
€€ "
DeleteAsync
€€# .
(
€€. /
Guid
€€/ 3
id
€€4 6
)
€€6 7
{
‹‹ 	
await
›› $
CheckDeletePolicyAsync
›› (
(
››( )
)
››) *
;
››* +
throw
ﬂﬂ 
new
ﬂﬂ #
UserFriendlyException
ﬂﬂ +
(
ﬂﬂ+ ,
string
ﬂﬂ, 2
.
ﬂﬂ2 3
Format
ﬂﬂ3 9
(
ﬂﬂ9 :

_localizer
ﬂﬂ: D
[
ﬂﬂD E
$str
ﬂﬂE k
]
ﬂﬂk l
)
ﬂﬂl m
)
ﬂﬂm n
;
ﬂﬂn o
}
‡‡ 	
public
‚‚ 
async
‚‚ 
Task
‚‚  
CambiarEstadoAsync
‚‚ ,
(
‚‚, -
Guid
‚‚- 1$
unidadAdministrativaId
‚‚2 H
,
‚‚H I
bool
‚‚J N
activo
‚‚O U
)
‚‚U V
{
„„ 	
await
‰‰ $
CheckUpdatePolicyAsync
‰‰ (
(
‰‰( )
)
‰‰) *
;
‰‰* +
var
ÊÊ 
admnistrativeUnit
ÊÊ !
=
ÊÊ" #
await
ÊÊ$ ))
UnidadAdministrativaManager
ÊÊ* E
.
ÊÊE F 
CambiarEstadoAsync
ÊÊF X
(
ÊÊX Y$
unidadAdministrativaId
ÊÊY o
,
ÊÊo p
activo
ÊÊq w
)
ÊÊw x
;
ÊÊx y
await
ËË 

Repository
ËË 
.
ËË 
UpdateAsync
ËË (
(
ËË( )
admnistrativeUnit
ËË) :
,
ËË: ;
autoSave
ËË< D
:
ËËD E
true
ËËF J
)
ËËJ K
;
ËËK L
}
ÈÈ 	
public
ÌÌ 
async
ÌÌ 
Task
ÌÌ 
<
ÌÌ 
PagedResultDto
ÌÌ (
<
ÌÌ( ).
 UnidadAdministrativaFuncionalDto
ÌÌ) I
>
ÌÌI J
>
ÌÌJ K%
ObtenerFuncionalesAsync
ÌÌL c
(
ÌÌc d
Guid
ÌÌd h$
unidadAdministrativaId
ÌÌi 
)ÌÌ Ä
{
ÓÓ 	
await
ÔÔ !
CheckGetPolicyAsync
ÔÔ %
(
ÔÔ% &
)
ÔÔ& '
;
ÔÔ' (
var
ÒÒ 
	queryable
ÒÒ 
=
ÒÒ 
await
ÒÒ !7
)_administrativeUnitFunctionaryRespository
ÒÒ" K
.
ÒÒK L
WithDetailsAsync
ÒÒL \
(
ÒÒ\ ]
f
ÒÒ] ^
=>
ÒÒ_ a
f
ÒÒb c
.
ÒÒc d
Cargo
ÒÒd i
)
ÒÒi j
;
ÒÒj k
	queryable
ÚÚ 
=
ÚÚ 
	queryable
ÚÚ !
.
ÚÚ! "
Where
ÚÚ" '
(
ÚÚ' (
f
ÚÚ( )
=>
ÚÚ* ,
f
ÚÚ- .
.
ÚÚ. /$
UnidadAdministrativaId
ÚÚ/ E
==
ÚÚF H$
unidadAdministrativaId
ÚÚI _
)
ÚÚ_ `
;
ÚÚ` a
var
ıı 

totalCount
ıı 
=
ıı 
await
ıı "
AsyncExecuter
ıı# 0
.
ıı0 1

CountAsync
ıı1 ;
(
ıı; <
	queryable
ıı< E
)
ııE F
;
ııF G
var
˜˜ 
queryableDto
˜˜ 
=
˜˜ 
	queryable
˜˜ (
.
˜˜( )
Select
˜˜) /
(
˜˜/ 0
entity
˜˜0 6
=>
˜˜7 9
new
˜˜: =.
 UnidadAdministrativaFuncionalDto
˜˜> ^
(
˜˜^ _
)
˜˜_ `
{
¯¯ 
	UsuarioId
˘˘ 
=
˘˘ 
entity
˘˘ "
.
˘˘" #
	UsuarioId
˘˘# ,
,
˘˘, -
Cargo
˙˙ 
=
˙˙ 
entity
˙˙ 
.
˙˙ 
Cargo
˙˙ $
.
˙˙$ %
Nombre
˙˙% +
}
˚˚ 
)
˚˚ 
;
˚˚ 
var
˝˝ 

entityDtos
˝˝ 
=
˝˝ 
await
˝˝ "
AsyncExecuter
˝˝# 0
.
˝˝0 1
ToListAsync
˝˝1 <
(
˝˝< =
queryableDto
˝˝= I
)
˝˝I J
;
˝˝J K
return
ˇˇ 
new
ˇˇ 
PagedResultDto
ˇˇ %
<
ˇˇ% &.
 UnidadAdministrativaFuncionalDto
ˇˇ& F
>
ˇˇF G
(
ˇˇG H

totalCount
ÄÄ 
,
ÄÄ 

entityDtos
ÅÅ 
)
ÇÇ 
;
ÇÇ 
}
ÉÉ 	
public
ÖÖ 
async
ÖÖ 
Task
ÖÖ #
AgregarFuncionalAsync
ÖÖ /
(
ÖÖ/ 0
Guid
ÖÖ0 4$
unidadAdministrativaId
ÖÖ5 K
,
ÖÖK L#
AgregarFuncionarioDto
ÖÖM b
input
ÖÖc h
)
ÖÖh i
{
ÜÜ 	
await
áá $
CheckUpdatePolicyAsync
áá (
(
áá( )
)
áá) *
;
áá* +
var
ââ 
admnistrativeUnit
ââ !
=
ââ" #
await
ââ$ ))
UnidadAdministrativaManager
ââ* E
.
ââE F%
AgregarFuncionarioAsync
ââF ]
(
ââ] ^$
unidadAdministrativaId
ââ^ t
,
âât u
input
ââv {
.
ââ{ |
	UsuarioIdââ| Ö
,ââÖ Ü
inputââá å
.ââå ç
CargoIdââç î
)ââî ï
;ââï ñ
await
ãã 

Repository
ãã 
.
ãã 
UpdateAsync
ãã (
(
ãã( )
admnistrativeUnit
ãã) :
,
ãã: ;
autoSave
ãã< D
:
ããD E
true
ããF J
)
ããJ K
;
ããK L
}
åå 	
public
éé 
async
éé 
Task
éé $
EliminarFuncionalAsync
éé 0
(
éé0 1
Guid
éé1 5$
unidadAdministrativaId
éé6 L
,
ééL M
Guid
ééN R
userId
ééS Y
)
ééY Z
{
èè 	
await
êê $
CheckUpdatePolicyAsync
êê (
(
êê( )
)
êê) *
;
êê* +
var
íí 
admnistrativeUnit
íí !
=
íí" #
await
íí$ ))
UnidadAdministrativaManager
íí* E
.
ííE F&
EliminarFuncionarioAsync
ííF ^
(
íí^ _$
unidadAdministrativaId
íí_ u
,
ííu v
userId
ííw }
)
íí} ~
;
íí~ 
await
îî 

Repository
îî 
.
îî 
UpdateAsync
îî (
(
îî( )
admnistrativeUnit
îî) :
,
îî: ;
autoSave
îî< D
:
îîD E
true
îîF J
)
îîJ K
;
îîK L
}
ïï 	
public
öö 
async
öö 
Task
öö 
<
öö 
ListResultDto
öö '
<
öö' (
ServicioDto
öö( 3
>
öö3 4
>
öö4 54
&ObtenerServiciosPorTipoDeServicioAsync
öö6 \
(
öö\ ]
Guid
öö] a"
administrativeUnitId
ööb v
,
ööv w
string
ööx ~
tipoServicioIdöö ç
)ööç é
{
õõ 	
await
úú !
CheckGetPolicyAsync
úú %
(
úú% &
)
úú& '
;
úú' (
var
ûû 
	queryable
ûû 
=
ûû 
await
ûû !3
%_administrativeUnitServiceRespository
ûû" G
.
ûûG H
GetQueryableAsync
ûûH Y
(
ûûY Z
)
ûûZ [
;
ûû[ \
var
üü 
queryableService
üü  
=
üü! "
await
üü# ( 
_serviceRepository
üü) ;
.
üü; <
GetQueryableAsync
üü< M
(
üüM N
)
üüN O
;
üüO P
queryableService
†† 
=
†† 
queryableService
†† /
.
††/ 0
Where
††0 5
(
††5 6
s
††6 7
=>
††8 :
s
††; <
.
††< =
TipoServicio
††= I
.
††I J
Id
††J L
==
††M O
tipoServicioId
††P ^
)
††^ _
;
††_ `
	queryable
¢¢ 
=
¢¢ 
	queryable
¢¢ !
.
¢¢! "
Where
¢¢" '
(
¢¢' (
p
¢¢( )
=>
¢¢* ,
p
¢¢- .
.
¢¢. /$
UnidadAdministrativaId
¢¢/ E
==
¢¢F H"
administrativeUnitId
¢¢I ]
)
¢¢] ^
;
¢¢^ _
var
§§ 
serviciosDto
§§ 
=
§§ 
from
§§ #
entidad
§§$ +
in
§§, .
	queryable
§§/ 8
join
•• #
servicio
••$ ,
in
••- /
queryableService
••0 @
on
••A C
entidad
••D K
.
••K L

ServicioId
••L V
equals
••W ]
servicio
••^ f
.
••f g
Id
••g i
select
¶¶ %
new
¶¶& )
ServicioDto
¶¶* 5
(
¶¶5 6
)
¶¶6 7
{
ßß  
Id
®®# %
=
®®& '
entidad
®®( /
.
®®/ 0

ServicioId
®®0 :
,
®®: ;
Nombre
©©# )
=
©©* +
servicio
©©, 4
.
©©4 5
Nombre
©©5 ;
,
©©; <
TipoServicioId
™™# 1
=
™™2 3
servicio
™™4 <
.
™™< =
TipoServicioId
™™= K
,
™™K L
TipoServicio
´´# /
=
´´0 1
servicio
´´2 :
.
´´: ;
TipoServicio
´´; G
.
´´G H
Nombre
´´H N
,
´´N O 
AtencionPresencial
¨¨# 5
=
¨¨6 7
servicio
¨¨8 @
.
¨¨@ A 
AtencionPresencial
¨¨A S
,
¨¨S T$
AtencionSemiPresencial
≠≠# 9
=
≠≠: ;
servicio
≠≠< D
.
≠≠D E$
AtencionSemiPresencial
≠≠E [
,
≠≠[ \
AtencionVirtual
ÆÆ# 2
=
ÆÆ3 4
servicio
ÆÆ5 =
.
ÆÆ= >
AtencionVirtual
ÆÆ> M
,
ÆÆM N
Activo
ØØ# )
=
ØØ* +
servicio
ØØ, 4
.
ØØ4 5
Activo
ØØ5 ;
}
∞∞  
;
∞∞  !
var
≤≤ 

entityDtos
≤≤ 
=
≤≤ 
await
≤≤ "
AsyncExecuter
≤≤# 0
.
≤≤0 1
ToListAsync
≤≤1 <
(
≤≤< =
serviciosDto
≤≤= I
)
≤≤I J
;
≤≤J K
return
¥¥ 
new
¥¥ 
ListResultDto
¥¥ $
<
¥¥$ %
ServicioDto
¥¥% 0
>
¥¥0 1
(
¥¥1 2

entityDtos
¥¥2 <
)
¥¥< =
;
¥¥= >
}
µµ 	
public
∑∑ 
async
∑∑ 
Task
∑∑ 
<
∑∑ 
PagedResultDto
∑∑ (
<
∑∑( )-
UnidadAdministrativaServicioDto
∑∑) H
>
∑∑H I
>
∑∑I J#
ObtenerServiciosAsync
∑∑K `
(
∑∑` a
Guid
∑∑a e$
unidadAdministrativaId
∑∑f |
,
∑∑| }3
$GetUnidadAdministrativaServicioInput∑∑~ ¢
input∑∑£ ®
)∑∑® ©
{
∏∏ 	
await
∫∫ !
CheckGetPolicyAsync
∫∫ %
(
∫∫% &
)
∫∫& '
;
∫∫' (
var
ºº 
	queryable
ºº 
=
ºº 
await
ºº !3
%_administrativeUnitServiceRespository
ºº" G
.
ººG H
GetQueryableAsync
ººH Y
(
ººY Z
)
ººZ [
;
ºº[ \
var
ΩΩ 
queryableService
ΩΩ  
=
ΩΩ! "
await
ΩΩ# ( 
_serviceRepository
ΩΩ) ;
.
ΩΩ; <
GetQueryableAsync
ΩΩ< M
(
ΩΩM N
)
ΩΩN O
;
ΩΩO P
	queryable
øø 
=
øø 
	queryable
øø !
.
øø! "
Where
øø" '
(
øø' (
p
øø( )
=>
øø* ,
p
øø- .
.
øø. /$
UnidadAdministrativaId
øø/ E
==
øøF H$
unidadAdministrativaId
øøI _
)
øø_ `
;
øø` a
	queryable
¡¡ 
=
¡¡ 
	queryable
¡¡ !
.
¡¡! "
WhereIf
¡¡" )
(
¡¡) *
input
¬¬ 
.
¬¬ 
Activo
¬¬ 
.
¬¬  
HasValue
¬¬  (
,
¬¬( )
u
√√ 
=>
√√ 
u
ƒƒ 
.
ƒƒ 
Activo
ƒƒ 
==
ƒƒ  "
input
ƒƒ# (
.
ƒƒ( )
Activo
ƒƒ) /
.
ƒƒ/ 0
Value
ƒƒ0 5
)
≈≈ 
;
≈≈ 
var
»» 

totalCount
»» 
=
»» 
await
»» "
AsyncExecuter
»»# 0
.
»»0 1

CountAsync
»»1 ;
(
»»; <
	queryable
»»< E
)
»»E F
;
»»F G
	queryable
   
=
    
ApplySortingCustom
   *
(
  * +
	queryable
  + 4
,
  4 5
input
  6 ;
)
  ; <
;
  < =
	queryable
ÀÀ 
=
ÀÀ 
ApplyPagingCustom
ÀÀ )
(
ÀÀ) *
	queryable
ÀÀ* 3
,
ÀÀ3 4
input
ÀÀ5 :
)
ÀÀ: ;
;
ÀÀ; <
var
ŒŒ 
queryableDto
ŒŒ 
=
ŒŒ 
from
ŒŒ #
entity
ŒŒ$ *
in
ŒŒ+ -
	queryable
ŒŒ. 7
join
œœ #
service
œœ$ +
in
œœ, .
queryableService
œœ/ ?
on
œœ@ B
entity
œœC I
.
œœI J

ServicioId
œœJ T
equals
œœU [
service
œœ\ c
.
œœc d
Id
œœd f
select
–– %
new
––& )-
UnidadAdministrativaServicioDto
––* I
(
––I J
)
––J K
{
——  $
UnidadAdministrativaId
““# 9
=
““: ;
entity
““< B
.
““B C$
UnidadAdministrativaId
““C Y
,
““Y Z
Activo
””# )
=
””* +
entity
””, 2
.
””2 3
Activo
””3 9
,
””9 :
TipoPago
‘‘# +
=
‘‘, -
entity
‘‘. 4
.
‘‘4 5
TipoPago
‘‘5 =
.
‘‘= >
Nombre
‘‘> D
,
‘‘D E

TipoPagoId
’’# -
=
’’. /
entity
’’0 6
.
’’6 7

TipoPagoId
’’7 A
,
’’A B

ServicioId
÷÷# -
=
÷÷. /
entity
÷÷0 6
.
÷÷6 7

ServicioId
÷÷7 A
,
÷÷A B
Servicio
◊◊# +
=
◊◊, -
service
◊◊. 5
.
◊◊5 6
Nombre
◊◊6 <
}
ÿÿ  
;
ŸŸ 
var
€€ 

entityDtos
€€ 
=
€€ 
await
€€ "
AsyncExecuter
€€# 0
.
€€0 1
ToListAsync
€€1 <
(
€€< =
queryableDto
€€= I
)
€€I J
;
€€J K
return
›› 
new
›› 
PagedResultDto
›› %
<
››% &-
UnidadAdministrativaServicioDto
››& E
>
››E F
(
››F G

totalCount
ﬁﬁ 
,
ﬁﬁ 

entityDtos
ﬂﬂ 
)
‡‡ 
;
‡‡ 
}
‚‚ 	
public
‰‰ 
async
‰‰ 
Task
‰‰ 
<
‰‰ -
UnidadAdministrativaServicioDto
‰‰ 9
>
‰‰9 :"
ObtenerServicioAsync
‰‰; O
(
‰‰O P
Guid
‰‰P T$
unidadAdministrativaId
‰‰U k
,
‰‰k l
Guid
‰‰m q

servicioId
‰‰r |
)
‰‰| }
{
ÂÂ 	
await
ÁÁ !
CheckGetPolicyAsync
ÁÁ %
(
ÁÁ% &
)
ÁÁ& '
;
ÁÁ' (
var
ÈÈ 
	queryable
ÈÈ 
=
ÈÈ 
await
ÈÈ !3
%_administrativeUnitServiceRespository
ÈÈ" G
.
ÈÈG H
GetQueryableAsync
ÈÈH Y
(
ÈÈY Z
)
ÈÈZ [
;
ÈÈ[ \
var
ÍÍ 
queryableService
ÍÍ  
=
ÍÍ! "
await
ÍÍ# ( 
_serviceRepository
ÍÍ) ;
.
ÍÍ; <
GetQueryableAsync
ÍÍ< M
(
ÍÍM N
)
ÍÍN O
;
ÍÍO P
	queryable
ÏÏ 
=
ÏÏ 
	queryable
ÏÏ !
.
ÏÏ! "
Where
ÏÏ" '
(
ÏÏ' (
p
ÏÏ( )
=>
ÏÏ* ,
p
ÏÏ- .
.
ÏÏ. /$
UnidadAdministrativaId
ÏÏ/ E
==
ÏÏF H$
unidadAdministrativaId
ÏÏI _
)
ÏÏ_ `
;
ÏÏ` a
	queryable
ÌÌ 
=
ÌÌ 
	queryable
ÌÌ !
.
ÌÌ! "
Where
ÌÌ" '
(
ÌÌ' (
p
ÌÌ( )
=>
ÌÌ* ,
p
ÌÌ- .
.
ÌÌ. /

ServicioId
ÌÌ/ 9
==
ÌÌ: <

servicioId
ÌÌ= G
)
ÌÌG H
;
ÌÌH I
var
ÔÔ 
queryableDto
ÔÔ 
=
ÔÔ 
from
ÔÔ #
entity
ÔÔ$ *
in
ÔÔ+ -
	queryable
ÔÔ. 7
join
 #
service
$ +
in
, .
queryableService
/ ?
on
@ B
entity
C I
.
I J

ServicioId
J T
equals
U [
service
\ c
.
c d
Id
d f
select
ÒÒ %
new
ÒÒ& )-
UnidadAdministrativaServicioDto
ÒÒ* I
(
ÒÒI J
)
ÒÒJ K
{
ÚÚ  $
UnidadAdministrativaId
ÛÛ# 9
=
ÛÛ: ;
entity
ÛÛ< B
.
ÛÛB C$
UnidadAdministrativaId
ÛÛC Y
,
ÛÛY Z
Activo
ÙÙ# )
=
ÙÙ* +
entity
ÙÙ, 2
.
ÙÙ2 3
Activo
ÙÙ3 9
,
ÙÙ9 :
TipoPago
ıı# +
=
ıı, -
entity
ıı. 4
.
ıı4 5
TipoPago
ıı5 =
.
ıı= >
Nombre
ıı> D
,
ııD E

TipoPagoId
ˆˆ# -
=
ˆˆ. /
entity
ˆˆ0 6
.
ˆˆ6 7

TipoPagoId
ˆˆ7 A
,
ˆˆA B

ServicioId
˜˜# -
=
˜˜. /
entity
˜˜0 6
.
˜˜6 7

ServicioId
˜˜7 A
,
˜˜A B
Servicio
¯¯# +
=
¯¯, -
service
¯¯. 5
.
¯¯5 6
Nombre
¯¯6 <
}
˘˘  
;
˙˙ 
var
¸¸ 
	entityDto
¸¸ 
=
¸¸ 
await
¸¸ !
AsyncExecuter
¸¸" /
.
¸¸/ 0"
SingleOrDefaultAsync
¸¸0 D
(
¸¸D E
queryableDto
¸¸E Q
)
¸¸Q R
;
¸¸R S
return
˛˛ 
	entityDto
˛˛ 
;
˛˛ 
}
ˇˇ 	
public
ÉÉ 
async
ÉÉ 
Task
ÉÉ 
<
ÉÉ -
UnidadAdministrativaServicioDto
ÉÉ 9
>
ÉÉ9 :"
AgregarServicioAsync
ÉÉ; O
(
ÉÉO P
Guid
ÉÉP T$
unidadAdministrativaId
ÉÉU k
,
ÉÉk l3
$CrearUnidadAdministrativaServicioDtoÉÉm ë
inputÉÉí ó
)ÉÉó ò
{
ÑÑ 	
await
ÖÖ $
CheckUpdatePolicyAsync
ÖÖ (
(
ÖÖ( )
)
ÖÖ) *
;
ÖÖ* +
var
áá 
admnistrativeUnit
áá !
=
áá" #
await
áá$ ))
UnidadAdministrativaManager
áá* E
.
ááE F"
AgregarServicioAsync
ááF Z
(
ááZ [$
unidadAdministrativaId
áá[ q
,
ááq r
input
áás x
.
ááx y

ServicioIdááy É
,ááÉ Ñ
inputááÖ ä
.ááä ã

TipoPagoIdááã ï
,ááï ñ
inputááó ú
.ááú ù
Activoááù £
)áá£ §
;áá§ •
await
ââ 

Repository
ââ 
.
ââ 
UpdateAsync
ââ (
(
ââ( )
admnistrativeUnit
ââ) :
,
ââ: ;
autoSave
ââ< D
:
ââD E
true
ââF J
)
ââJ K
;
ââK L
return
åå 
await
åå "
ObtenerServicioAsync
åå -
(
åå- .$
unidadAdministrativaId
åå. D
,
ååD E
input
ååF K
.
ååK L

ServicioId
ååL V
)
ååV W
;
ååW X
}
çç 	
public
èè 
async
èè 
Task
èè 
<
èè -
UnidadAdministrativaServicioDto
èè 9
>
èè9 :%
ActualizarServicioAsync
èè; R
(
èèR S
Guid
èèS W$
unidadAdministrativaId
èèX n
,
èèn o
Guid
èèp t

servicioId
èèu 
,èè Ä9
)ActualizarUnidadAdministrativaServicioDtoèèÅ ™
inputèè´ ∞
)èè∞ ±
{
êê 	
await
íí $
CheckUpdatePolicyAsync
íí (
(
íí( )
)
íí) *
;
íí* +
var
îî 
	queryable
îî 
=
îî 
await
îî !

Repository
îî" ,
.
ïï 
WithDetailsAsync
ïï )
(
ïï) *
p
ïï* +
=>
ïï, .
p
ïï/ 0
.
ïï0 1
	Servicios
ïï1 :
)
ïï: ;
;
ññ 
	queryable
òò 
=
òò 
	queryable
òò !
.
òò! "
Where
òò" '
(
òò' (
p
òò( )
=>
òò* ,
p
òò- .
.
òò. /
Id
òò/ 1
==
òò2 4$
unidadAdministrativaId
òò5 K
)
òòK L
;
òòL M
var
öö  
administrativeUnit
öö "
=
öö# $
await
öö% *
AsyncExecuter
öö+ 8
.
öö8 9"
SingleOrDefaultAsync
öö9 M
(
ööM N
	queryable
ööN W
)
ööW X
;
ööX Y
if
õõ 
(
õõ  
administrativeUnit
õõ "
==
õõ# %
null
õõ& *
)
õõ* +
{
úú 
throw
ùù 
new
ùù %
EntityNotFoundException
ùù 1
(
ùù1 2
typeof
ùù2 8
(
ùù8 9
Mre
ùù9 <
.
ùù< =
Sb
ùù= ?
.
ùù? @"
UnidadAdministrativa
ùù@ T
.
ùùT U
Dominio
ùùU \
.
ùù\ ]"
UnidadAdministrativa
ùù] q
)
ùùq r
,
ùùr s%
unidadAdministrativaIdùùt ä
)ùùä ã
;ùùã å
}
ûû 
var
†† '
administrativeUnitService
†† )
=
††* + 
administrativeUnit
††, >
.
††> ?
	Servicios
††? H
.
††H I
SingleOrDefault
††I X
(
††X Y
p
††Y Z
=>
††[ ]
p
††^ _
.
††_ `

ServicioId
††` j
==
††k m

servicioId
††n x
)
††x y
;
††y z
if
°° 
(
°° '
administrativeUnitService
°° )
==
°°* ,
null
°°- 1
)
°°1 2
{
¢¢ 
throw
££ 
new
££ %
EntityNotFoundException
££ 1
(
££1 2
typeof
££2 8
(
££8 9
Mre
££9 <
.
££< =
Sb
££= ?
.
££? @"
UnidadAdministrativa
££@ T
.
££T U
Dominio
££U \
.
££\ ]*
UnidadAdministrativaServicio
££] y
)
££y z
,
££z {

servicioId££| Ü
)££Ü á
;££á à
}
§§ '
administrativeUnitService
ßß %
.
ßß% &
Activo
ßß& ,
=
ßß- .
input
ßß/ 4
.
ßß4 5
Activo
ßß5 ;
;
ßß; <'
administrativeUnitService
®® %
.
®®% &

TipoPagoId
®®& 0
=
®®1 2
input
®®3 8
.
®®8 9

TipoPagoId
®®9 C
;
®®C D
await
™™ 

Repository
™™ 
.
™™ 
UpdateAsync
™™ (
(
™™( ) 
administrativeUnit
™™) ;
,
™™; <
autoSave
™™= E
:
™™E F
true
™™G K
)
™™K L
;
™™L M
return
≠≠ 
await
≠≠ "
ObtenerServicioAsync
≠≠ -
(
≠≠- .$
unidadAdministrativaId
≠≠. D
,
≠≠D E

servicioId
≠≠F P
)
≠≠P Q
;
≠≠Q R
}
ØØ 	
public
±± 
async
±± 
Task
±± #
EliminarServicioAsync
±± /
(
±±/ 0
Guid
±±0 4$
unidadAdministrativaId
±±5 K
,
±±K L
Guid
±±M Q

servicioId
±±R \
)
±±\ ]
{
≤≤ 	
await
≥≥ $
CheckUpdatePolicyAsync
≥≥ (
(
≥≥( )
)
≥≥) *
;
≥≥* +
var
µµ 
admnistrativeUnit
µµ !
=
µµ" #
await
µµ$ ))
UnidadAdministrativaManager
µµ* E
.
µµE F#
EliminarServicioAsync
µµF [
(
µµ[ \$
unidadAdministrativaId
µµ\ r
,
µµr s

servicioId
µµt ~
)
µµ~ 
;µµ Ä
await
∑∑ 

Repository
∑∑ 
.
∑∑ 
UpdateAsync
∑∑ (
(
∑∑( )
admnistrativeUnit
∑∑) :
,
∑∑: ;
autoSave
∑∑< D
:
∑∑D E
true
∑∑F J
)
∑∑J K
;
∑∑K L
await
ππ 
CurrentUnitOfWork
ππ #
.
ππ# $
SaveChangesAsync
ππ$ 4
(
ππ4 5
)
ππ5 6
;
ππ6 7
}
∫∫ 	
public
ΩΩ 
virtual
ΩΩ 
async
ΩΩ 
Task
ΩΩ !
<
ΩΩ! "
ListResultDto
ΩΩ" /
<
ΩΩ/ 0
ServicioDto
ΩΩ0 ;
>
ΩΩ; <
>
ΩΩ< =
GetLookupAsync
ΩΩ> L
(
ΩΩL M
Guid
ΩΩM Q$
unidadAdministrativaId
ΩΩR h
)
ΩΩh i
{
ææ 	
await
¿¿ !
CheckGetPolicyAsync
¿¿ %
(
¿¿% &
)
¿¿& '
;
¿¿' (
var
¬¬ 
	queryable
¬¬ 
=
¬¬ 
await
¬¬ !3
%_administrativeUnitServiceRespository
¬¬" G
.
¬¬G H
GetQueryableAsync
¬¬H Y
(
¬¬Y Z
)
¬¬Z [
;
¬¬[ \
var
√√ 
queryableService
√√  
=
√√! "
await
√√# ( 
_serviceRepository
√√) ;
.
√√; <
GetQueryableAsync
√√< M
(
√√M N
)
√√N O
;
√√O P
	queryable
≈≈ 
=
≈≈ 
	queryable
≈≈ !
.
≈≈! "
Where
≈≈" '
(
≈≈' (
p
≈≈( )
=>
≈≈* ,
p
≈≈- .
.
≈≈. /$
UnidadAdministrativaId
≈≈/ E
==
≈≈F H$
unidadAdministrativaId
≈≈I _
)
≈≈_ `
;
≈≈` a
var
«« 0
"queryableAdministrativeUnitService
«« 2
=
««3 4
from
««5 9
entity
««: @
in
««A C
	queryable
««D M
join
»»5 9
service
»»: A
in
»»B D
queryableService
»»E U
on
»»V X
entity
»»Y _
.
»»_ `

ServicioId
»»` j
equals
»»k q
service
»»r y
.
»»y z
Id
»»z |
select
……5 ;
service
……< C
;
……C D
var
ÀÀ 
queriableDto
ÀÀ 
=
ÀÀ 
queryableService
ÀÀ /
.
ÀÀ/ 0
Except
ÀÀ0 6
(
ÀÀ6 70
"queryableAdministrativeUnitService
ÀÀ7 Y
)
ÀÀY Z
.
ÃÃ 
Select
ÃÃ 
(
ÃÃ 
entity
ÃÃ 
=>
ÃÃ !
new
ÃÃ" %
ServicioDto
ÃÃ& 1
(
ÃÃ1 2
)
ÃÃ2 3
{
ÕÕ 
Id
ŒŒ 
=
ŒŒ 
entity
ŒŒ 
.
ŒŒ  
Id
ŒŒ  "
,
ŒŒ" #
Nombre
œœ 
=
œœ 
entity
œœ #
.
œœ# $
Nombre
œœ$ *
,
œœ* +
TipoServicioId
–– "
=
––# $
entity
––% +
.
––+ ,
TipoServicioId
––, :
,
––: ;
TipoServicio
——  
=
——! "
entity
——# )
.
——) *
TipoServicio
——* 6
.
——6 7
Nombre
——7 =
,
——= > 
AtencionPresencial
““ &
=
““' (
entity
““) /
.
““/ 0 
AtencionPresencial
““0 B
,
““B C$
AtencionSemiPresencial
”” *
=
””+ ,
entity
””- 3
.
””3 4$
AtencionSemiPresencial
””4 J
,
””J K
AtencionVirtual
‘‘ #
=
‘‘$ %
entity
‘‘& ,
.
‘‘, -
AtencionVirtual
‘‘- <
,
‘‘< =
Activo
’’ 
=
’’ 
entity
’’ #
.
’’# $
Activo
’’$ *
}
÷÷ 
)
÷÷ 
;
÷÷ 
var
ÿÿ 

entityDtos
ÿÿ 
=
ÿÿ 
await
ÿÿ "
AsyncExecuter
ÿÿ# 0
.
ÿÿ0 1
ToListAsync
ÿÿ1 <
(
ÿÿ< =
queriableDto
ÿÿ= I
)
ÿÿI J
;
ÿÿJ K
return
⁄⁄ 
new
⁄⁄ 
ListResultDto
⁄⁄ $
<
⁄⁄$ %
ServicioDto
⁄⁄% 0
>
⁄⁄0 1
(
⁄⁄1 2

entityDtos
⁄⁄2 <
)
⁄⁄< =
;
⁄⁄= >
}
‹‹ 	
public
ﬁﬁ 
async
ﬁﬁ 
Task
ﬁﬁ 
<
ﬁﬁ 
ListResultDto
ﬁﬁ '
<
ﬁﬁ' (
ServicioDto
ﬁﬁ( 3
>
ﬁﬁ3 4
>
ﬁﬁ4 55
'ObtenerServiciosPorUnidadAdministrativa
ﬁﬁ6 ]
(
ﬁﬁ] ^
Guid
ﬁﬁ^ b$
unidadAdministrativaId
ﬁﬁc y
)
ﬁﬁy z
{
ﬂﬂ 	
await
‡‡ !
CheckGetPolicyAsync
‡‡ %
(
‡‡% &
)
‡‡& '
;
‡‡' (
var
‚‚ 
	queryable
‚‚ 
=
‚‚ 
await
‚‚ !3
%_administrativeUnitServiceRespository
‚‚" G
.
‚‚G H
GetQueryableAsync
‚‚H Y
(
‚‚Y Z
)
‚‚Z [
;
‚‚[ \
var
„„ 
queryableService
„„  
=
„„! "
await
„„# ( 
_serviceRepository
„„) ;
.
„„; <
GetQueryableAsync
„„< M
(
„„M N
)
„„N O
;
„„O P
	queryable
ÂÂ 
=
ÂÂ 
	queryable
ÂÂ !
.
ÂÂ! "
Where
ÂÂ" '
(
ÂÂ' (
p
ÂÂ( )
=>
ÂÂ* ,
p
ÂÂ- .
.
ÂÂ. /$
UnidadAdministrativaId
ÂÂ/ E
==
ÂÂF H$
unidadAdministrativaId
ÂÂI _
)
ÂÂ_ `
;
ÂÂ` a
var
ÁÁ 0
"queryableAdministrativeUnitService
ÁÁ 2
=
ÁÁ3 4
from
ÁÁ5 9
entity
ÁÁ: @
in
ÁÁA C
	queryable
ÁÁD M
join
ËË5 9
service
ËË: A
in
ËËB D
queryableService
ËËE U
on
ËËV X
entity
ËËY _
.
ËË_ `

ServicioId
ËË` j
equals
ËËk q
service
ËËr y
.
ËËy z
Id
ËËz |
select
ÈÈ5 ;
service
ÈÈ< C
;
ÈÈC D
var
ÎÎ 
queriableDto
ÎÎ 
=
ÎÎ 0
"queryableAdministrativeUnitService
ÎÎ A
.
ÏÏ 
Select
ÏÏ 
(
ÏÏ 
entity
ÏÏ 
=>
ÏÏ !
new
ÏÏ" %
ServicioDto
ÏÏ& 1
{
ÌÌ 
Id
ÓÓ 
=
ÓÓ 
entity
ÓÓ 
.
ÓÓ  
Id
ÓÓ  "
,
ÓÓ" #
Nombre
ÔÔ 
=
ÔÔ 
entity
ÔÔ #
.
ÔÔ# $
Nombre
ÔÔ$ *
,
ÔÔ* +
TipoServicioId
 "
=
# $
entity
% +
.
+ ,
TipoServicioId
, :
,
: ;
TipoServicio
ÒÒ  
=
ÒÒ! "
entity
ÒÒ# )
.
ÒÒ) *
TipoServicio
ÒÒ* 6
.
ÒÒ6 7
Nombre
ÒÒ7 =
,
ÒÒ= > 
AtencionPresencial
ÚÚ &
=
ÚÚ' (
entity
ÚÚ) /
.
ÚÚ/ 0 
AtencionPresencial
ÚÚ0 B
,
ÚÚB C$
AtencionSemiPresencial
ÛÛ *
=
ÛÛ+ ,
entity
ÛÛ- 3
.
ÛÛ3 4$
AtencionSemiPresencial
ÛÛ4 J
,
ÛÛJ K
AtencionVirtual
ÙÙ #
=
ÙÙ$ %
entity
ÙÙ& ,
.
ÙÙ, -
AtencionVirtual
ÙÙ- <
,
ÙÙ< =
Activo
ıı 
=
ıı 
entity
ıı #
.
ıı# $
Activo
ıı$ *
}
ˆˆ 
)
ˆˆ 
;
ˆˆ 
var
¯¯ 

entityDtos
¯¯ 
=
¯¯ 
await
¯¯ "
AsyncExecuter
¯¯# 0
.
¯¯0 1
ToListAsync
¯¯1 <
(
¯¯< =
queriableDto
¯¯= I
)
¯¯I J
;
¯¯J K
return
˙˙ 
new
˙˙ 
ListResultDto
˙˙ $
<
˙˙$ %
ServicioDto
˙˙% 0
>
˙˙0 1
(
˙˙1 2

entityDtos
˙˙2 <
)
˙˙< =
;
˙˙= >
}
˚˚ 	
public
ÄÄ 
async
ÄÄ 
Task
ÄÄ %
AssignMissionChiefAsync
ÄÄ 1
(
ÄÄ1 2
Guid
ÄÄ2 6$
unidadAdministrativaId
ÄÄ7 M
,
ÄÄM N
Guid
ÄÄO S
userId
ÄÄT Z
)
ÄÄZ [
{
ÅÅ 	
await
ÇÇ $
CheckUpdatePolicyAsync
ÇÇ (
(
ÇÇ( )
)
ÇÇ) *
;
ÇÇ* +
var
ÑÑ 
admnistrativeUnit
ÑÑ !
=
ÑÑ" #
await
ÑÑ$ ))
UnidadAdministrativaManager
ÑÑ* E
.
ÑÑE F%
AssignMissionChiefAsync
ÑÑF ]
(
ÑÑ] ^$
unidadAdministrativaId
ÑÑ^ t
,
ÑÑt u
userId
ÑÑv |
)
ÑÑ| }
;
ÑÑ} ~
await
ÜÜ 

Repository
ÜÜ 
.
ÜÜ 
UpdateAsync
ÜÜ (
(
ÜÜ( )
admnistrativeUnit
ÜÜ) :
,
ÜÜ: ;
autoSave
ÜÜ< D
:
ÜÜD E
true
ÜÜF J
)
ÜÜJ K
;
ÜÜK L
}
áá 	
public
ãã 
async
ãã 
Task
ãã 
<
ãã 
PagedResultDto
ãã (
<
ãã( )
SignatarioDto
ãã) 6
>
ãã6 7
>
ãã7 8%
ObtenerSignatariosAsync
ãã9 P
(
ããP Q
Guid
ããQ U$
unidadAdministrativaId
ããV l
)
ããl m
{
åå 	
var
çç 
	queryable
çç 
=
çç 
await
çç ! 
_signerRespository
çç" 4
.
çç4 5
GetQueryableAsync
çç5 F
(
ççF G
)
ççG H
;
ççH I
	queryable
èè 
=
èè 
	queryable
èè !
.
èè! "
Where
èè" '
(
èè' (
s
èè( )
=>
èè* ,
s
èè- .
.
èè. /$
UnidadAdministrativaId
èè/ E
==
èèF H$
unidadAdministrativaId
èèI _
)
èè_ `
;
èè` a
var
ëë 
queryableServices
ëë !
=
ëë" #
await
ëë$ ) 
_serviceRepository
ëë* <
.
ëë< =
GetQueryableAsync
ëë= N
(
ëëN O
)
ëëO P
;
ëëP Q
var
ìì 

signersDto
ìì 
=
ìì 
from
ìì !

signatario
ìì" ,
in
ìì- /
	queryable
ìì0 9
join
îî !
servicio
îî" *
in
îî+ -
queryableServices
îî. ?
on
îî@ B

signatario
îîC M
.
îîM N

ServicioId
îîN X
equals
îîY _
servicio
îî` h
.
îîh i
Id
îîi k
select
ïï #
new
ïï$ '
SignatarioDto
ïï( 5
(
ïï5 6
)
ïï6 7
{
ññ $
UnidadAdministrativaId
óó! 7
=
óó8 9

signatario
óó: D
.
óóD E$
UnidadAdministrativaId
óóE [
,
óó[ \
	UsuarioId
òò! *
=
òò+ ,

signatario
òò- 7
.
òò7 8
	UsuarioId
òò8 A
,
òòA B

ServicioId
ôô! +
=
ôô, -
servicio
ôô. 6
.
ôô6 7
Id
ôô7 9
,
ôô9 :
Servicio
öö! )
=
öö* +
servicio
öö, 4
.
öö4 5
Nombre
öö5 ;
,
öö; <

PorDefecto
õõ! +
=
õõ, -

signatario
õõ. 8
.
õõ8 9

PorDefecto
õõ9 C
}
úú 
;
úú 
var
ûû 

entityDtos
ûû 
=
ûû 
await
ûû "
AsyncExecuter
ûû# 0
.
ûû0 1
ToListAsync
ûû1 <
(
ûû< =

signersDto
ûû= G
)
ûûG H
;
ûûH I
var
†† 

totalCount
†† 
=
†† 

entityDtos
†† '
.
††' (
Count
††( -
;
††- .
var
££ 
usuariosIds
££ 
=
££ 

entityDtos
££ (
.
££( )
Select
££) /
(
££/ 0
x
££0 1
=>
££2 4
x
££5 6
.
££6 7
	UsuarioId
££7 @
)
££@ A
.
££A B
ToList
££B H
(
££H I
)
££I J
;
££J K
var
•• !
usuariosConFirmaIds
•• #
=
••$ %
await
••& +0
"_configuracionSignatarioAppService
••, N
.
••N O&
PoseenConfiguracionAsync
••O g
(
••g h
usuariosIds
••h s
)
••s t
;
••t u
foreach
¶¶ 
(
¶¶ 
var
¶¶ 
item
¶¶ 
in
¶¶  

entityDtos
¶¶! +
)
¶¶+ ,
{
ßß 
if
®® 
(
®® !
usuariosConFirmaIds
®® '
.
®®' (
Contains
®®( 0
(
®®0 1
item
®®1 5
.
®®5 6
	UsuarioId
®®6 ?
)
®®? @
)
®®@ A
{
®®B C
item
©© 
.
©© #
PoseeFirmaElectronica
©© .
=
©©/ 0
true
©©1 5
;
©©5 6
}
™™ 
}
´´ 
return
ÆÆ 
new
ÆÆ 
PagedResultDto
ÆÆ %
<
ÆÆ% &
SignatarioDto
ÆÆ& 3
>
ÆÆ3 4
(
ÆÆ4 5

totalCount
ØØ 
,
ØØ 

entityDtos
∞∞ 
)
±± 
;
±± 
}
≤≤ 	
public
¥¥ 
async
¥¥ 
Task
¥¥ 
<
¥¥ 
ListResultDto
¥¥ '
<
¥¥' (
SignatarioDto
¥¥( 5
>
¥¥5 6
>
¥¥6 7$
BuscarSignatariosAsync
¥¥8 N
(
¥¥N O
Guid
¥¥O S$
unidadAdministrativaId
¥¥T j
,
¥¥j k$
ObtenerSignatarioInput
µµ "
input
µµ# (
)
µµ( )
{
∂∂ 	
var
∑∑ 
	queryable
∑∑ 
=
∑∑ 
await
∑∑ ! 
_signerRespository
∑∑" 4
.
∑∑4 5
GetQueryableAsync
∑∑5 F
(
∑∑F G
)
∑∑G H
;
∑∑H I
	queryable
ππ 
=
ππ 
	queryable
ππ !
.
ππ! "
Where
ππ" '
(
ππ' (
s
ππ( )
=>
ππ* ,
s
ππ- .
.
ππ. /$
UnidadAdministrativaId
ππ/ E
==
ππF H$
unidadAdministrativaId
ππI _
)
ππ_ `
;
ππ` a
var
ªª 
queryableServices
ªª !
=
ªª" #
await
ªª$ ) 
_serviceRepository
ªª* <
.
ªª< =
GetQueryableAsync
ªª= N
(
ªªN O
)
ªªO P
;
ªªP Q
var
ΩΩ  
signatarioConsulta
ΩΩ "
=
ΩΩ# $
from
ΩΩ% )

signatario
ΩΩ* 4
in
ΩΩ5 7
	queryable
ΩΩ8 A
join
ææ; ?
servicio
ææ@ H
in
ææI K
queryableServices
ææL ]
on
ææ^ `

signatario
ææa k
.
ææk l

ServicioId
ææl v
equals
ææw }
servicioææ~ Ü
.ææÜ á
Idææá â
select
øø; A
new
øøB E
SignatarioDto
øøF S
(
øøS T
)
øøT U
{
¿¿; <$
UnidadAdministrativaId
¡¡? U
=
¡¡V W

signatario
¡¡X b
.
¡¡b c$
UnidadAdministrativaId
¡¡c y
,
¡¡y z
	UsuarioId
¬¬? H
=
¬¬I J

signatario
¬¬K U
.
¬¬U V
	UsuarioId
¬¬V _
,
¬¬_ `

ServicioId
√√? I
=
√√J K
servicio
√√L T
.
√√T U
Id
√√U W
,
√√W X
Servicio
ƒƒ? G
=
ƒƒH I
servicio
ƒƒJ R
.
ƒƒR S
Nombre
ƒƒS Y
,
ƒƒY Z

PorDefecto
≈≈? I
=
≈≈J K

signatario
≈≈L V
.
≈≈V W

PorDefecto
≈≈W a
}
∆∆; <
;
∆∆< = 
signatarioConsulta
…… 
=
……   
signatarioConsulta
……! 3
.
……3 4
WhereIf
……4 ;
(
……; <
input
……< A
.
……A B

ServicioId
……B L
.
……L M
HasValue
……M U
,
……U V
x
……W X
=>
……Y [
x
……\ ]
.
……] ^

ServicioId
……^ h
==
……i k
input
……l q
.
……q r

ServicioId
……r |
)
……| }
;
……} ~ 
signatarioConsulta
   
=
     
signatarioConsulta
  ! 3
.
  3 4
WhereIf
  4 ;
(
  ; <
input
  < A
.
  A B
	UsuarioId
  B K
.
  K L
HasValue
  L T
,
  T U
x
  V W
=>
  X Z
x
  [ \
.
  \ ]
	UsuarioId
  ] f
==
  g i
input
  j o
.
  o p
	UsuarioId
  p y
)
  y z
;
  z {
var
ÃÃ 

entityDtos
ÃÃ 
=
ÃÃ 
await
ÃÃ "
AsyncExecuter
ÃÃ# 0
.
ÃÃ0 1
ToListAsync
ÃÃ1 <
(
ÃÃ< = 
signatarioConsulta
ÃÃ= O
)
ÃÃO P
;
ÃÃP Q
var
ŒŒ *
signatarioConsultaPorDefecto
ŒŒ ,
=
ŒŒ- .
from
ŒŒ/ 3

signatario
ŒŒ4 >
in
ŒŒ? A
	queryable
ŒŒB K
join
œœ% )
servicio
œœ* 2
in
œœ3 5
queryableServices
œœ6 G
on
œœH J

signatario
œœK U
.
œœU V

ServicioId
œœV `
equals
œœa g
servicio
œœh p
.
œœp q
Id
œœq s
where
––% *

signatario
––+ 5
.
––5 6

PorDefecto
––6 @
select
——% +
new
——, /
SignatarioDto
——0 =
(
——= >
)
——> ?
{
““% &$
UnidadAdministrativaId
””) ?
=
””@ A

signatario
””B L
.
””L M$
UnidadAdministrativaId
””M c
,
””c d
	UsuarioId
‘‘) 2
=
‘‘3 4

signatario
‘‘5 ?
.
‘‘? @
	UsuarioId
‘‘@ I
,
‘‘I J

ServicioId
’’) 3
=
’’4 5
servicio
’’6 >
.
’’> ?
Id
’’? A
,
’’A B
Servicio
÷÷) 1
=
÷÷2 3
servicio
÷÷4 <
.
÷÷< =
Nombre
÷÷= C
,
÷÷C D

PorDefecto
◊◊) 3
=
◊◊4 5

signatario
◊◊6 @
.
◊◊@ A

PorDefecto
◊◊A K
}
ÿÿ% &
;
ÿÿ& '
var
⁄⁄ %
signatarioPorDefectoDto
⁄⁄ '
=
⁄⁄( )
await
⁄⁄* /
AsyncExecuter
⁄⁄0 =
.
⁄⁄= >"
SingleOrDefaultAsync
⁄⁄> R
(
⁄⁄R S*
signatarioConsultaPorDefecto
⁄⁄S o
)
⁄⁄o p
;
⁄⁄p q
if
€€ 
(
€€ %
signatarioPorDefectoDto
€€ '
!=
€€( *
null
€€+ /
&&
€€0 2
!
€€3 4

entityDtos
€€4 >
.
€€> ?
Any
€€? B
(
€€B C
x
€€D E
=>
€€F H
x
€€I J
.
€€J K$
UnidadAdministrativaId
€€K a
==
€€b d%
signatarioPorDefectoDto
€€e |
.
€€| }%
UnidadAdministrativaId€€} ì
&&
‹‹ 
x
‹‹ 
.
‹‹ 

ServicioId
‹‹  
==
‹‹! #%
signatarioPorDefectoDto
‹‹$ ;
.
‹‹; <

ServicioId
‹‹< F
&&
›› 
x
›› 
.
›› 
	UsuarioId
›› 
==
››  "%
signatarioPorDefectoDto
››# :
.
››: ;
	UsuarioId
››; D
)
››D E
)
››E F
{
››G H

entityDtos
‡‡ 
.
‡‡ 
Add
‡‡ 
(
‡‡ %
signatarioPorDefectoDto
‡‡ 6
)
‡‡6 7
;
‡‡7 8
}
·· 
var
„„ 
	resultado
„„ 
=
„„ 
new
„„ 
List
„„  $
<
„„$ %
SignatarioDto
„„% 2
>
„„2 3
(
„„3 4
)
„„4 5
;
„„5 6
var
ÁÁ 
usuariosIds
ÁÁ 
=
ÁÁ 

entityDtos
ÁÁ (
.
ÁÁ( )
Select
ÁÁ) /
(
ÁÁ/ 0
x
ÁÁ0 1
=>
ÁÁ2 4
x
ÁÁ5 6
.
ÁÁ6 7
	UsuarioId
ÁÁ7 @
)
ÁÁ@ A
.
ÁÁA B
ToList
ÁÁB H
(
ÁÁH I
)
ÁÁI J
;
ÁÁJ K
var
ÈÈ !
usuariosConFirmaIds
ÈÈ #
=
ÈÈ$ %
await
ÈÈ& +0
"_configuracionSignatarioAppService
ÈÈ, N
.
ÈÈN O&
PoseenConfiguracionAsync
ÈÈO g
(
ÈÈg h
usuariosIds
ÈÈh s
)
ÈÈs t
;
ÈÈt u
foreach
ÍÍ 
(
ÍÍ 
var
ÍÍ 
item
ÍÍ 
in
ÍÍ  

entityDtos
ÍÍ! +
)
ÍÍ+ ,
{
ÎÎ 
if
ÏÏ 
(
ÏÏ !
usuariosConFirmaIds
ÏÏ '
.
ÏÏ' (
Contains
ÏÏ( 0
(
ÏÏ0 1
item
ÏÏ1 5
.
ÏÏ5 6
	UsuarioId
ÏÏ6 ?
)
ÏÏ? @
)
ÏÏ@ A
{
ÌÌ 
item
ÓÓ 
.
ÓÓ #
PoseeFirmaElectronica
ÓÓ .
=
ÓÓ/ 0
true
ÓÓ1 5
;
ÓÓ5 6
}
ÔÔ 
}
 
if
ÛÛ 
(
ÛÛ 
input
ÛÛ 
.
ÛÛ #
PoseeFirmaElectronica
ÛÛ +
.
ÛÛ+ ,
HasValue
ÛÛ, 4
&&
ÛÛ5 7
input
ÛÛ8 =
.
ÛÛ= >#
PoseeFirmaElectronica
ÛÛ> S
.
ÛÛS T
Value
ÛÛT Y
)
ÛÛY Z
{
ÙÙ 
foreach
ıı 
(
ıı 
var
ıı 
item
ıı !
in
ıı" $

entityDtos
ıı% /
)
ıı/ 0
{
ˆˆ 
if
˜˜ 
(
˜˜ 
item
˜˜ 
.
˜˜ #
PoseeFirmaElectronica
˜˜ 2
)
˜˜2 3
{
¯¯ 
	resultado
˘˘ !
.
˘˘! "
Add
˘˘" %
(
˘˘% &
item
˘˘& *
)
˘˘* +
;
˘˘+ ,
}
˙˙ 
}
˚˚ 
}
¸¸ 
else
˝˝ 
if
˝˝ 
(
˝˝ 
input
˝˝ 
.
˝˝ #
PoseeFirmaElectronica
˝˝ 0
.
˝˝0 1
HasValue
˝˝1 9
&&
˝˝: <
!
˝˝= >
input
˝˝> C
.
˝˝C D#
PoseeFirmaElectronica
˝˝D Y
.
˝˝Y Z
Value
˝˝Z _
)
˝˝_ `
{
˝˝a b
foreach
˛˛ 
(
˛˛ 
var
˛˛ 
item
˛˛ !
in
˛˛" $

entityDtos
˛˛% /
)
˛˛/ 0
{
ˇˇ 
if
ÄÄ 
(
ÄÄ 
!
ÄÄ 
item
ÄÄ 
.
ÄÄ #
PoseeFirmaElectronica
ÄÄ 3
)
ÄÄ3 4
{
ÅÅ 
	resultado
ÇÇ !
.
ÇÇ! "
Add
ÇÇ" %
(
ÇÇ% &
item
ÇÇ& *
)
ÇÇ* +
;
ÇÇ+ ,
}
ÉÉ 
}
ÑÑ 
}
ÖÖ 
else
ÜÜ 
{
áá 
	resultado
àà 
.
àà 
AddRange
àà "
(
àà" #

entityDtos
àà# -
)
àà- .
;
àà. /
}
ââ 
return
ãã 
new
ãã 
ListResultDto
ãã $
<
ãã$ %
SignatarioDto
ãã% 2
>
ãã2 3
(
ãã3 4
	resultado
åå 
)
çç 
;
çç 
}
éé 	
public
ëë 
async
ëë 
Task
ëë $
AgregarSignatarioAsync
ëë 0
(
ëë0 1
Guid
ëë1 5$
unidadAdministrativaId
ëë6 L
,
ëëL M 
CrearSignatarioDto
ëëN `
input
ëëa f
)
ëëf g
{
íí 	
await
ìì $
CheckUpdatePolicyAsync
ìì (
(
ìì( )
)
ìì) *
;
ìì* +
var
ïï 
admnistrativeUnit
ïï !
=
ïï" #
await
ïï$ ))
UnidadAdministrativaManager
ïï* E
.
ïïE F$
AgregarSignatarioAsync
ïïF \
(
ïï\ ]$
unidadAdministrativaId
ïï] s
,
ïïs t
input
ïïu z
.
ïïz {
	UsuarioIdïï{ Ñ
,ïïÑ Ö
inputïïÜ ã
.ïïã å

ServicioIdïïå ñ
,ïïñ ó
inputïïò ù
.ïïù û

PorDefectoïïû ®
)ïï® ©
;ïï© ™
await
óó 

Repository
óó 
.
óó 
UpdateAsync
óó (
(
óó( )
admnistrativeUnit
óó) :
,
óó: ;
autoSave
óó< D
:
óóD E
true
óóF J
)
óóJ K
;
óóK L
}
òò 	
public
öö 
async
öö 
Task
öö %
EliminarSignatarioAsync
öö 1
(
öö1 2
Guid
öö2 6$
unidadAdministrativaId
öö7 M
,
ööM N
Guid
ööO S
userId
ööT Z
,
ööZ [
Guid
öö\ `

servicioId
ööa k
)
öök l
{
õõ 	
await
úú $
CheckUpdatePolicyAsync
úú (
(
úú( )
)
úú) *
;
úú* +
var
ûû 
admnistrativeUnit
ûû !
=
ûû" #
await
ûû$ ))
UnidadAdministrativaManager
ûû* E
.
ûûE F%
EliminarSignatarioAsync
ûûF ]
(
ûû] ^$
unidadAdministrativaId
ûû^ t
,
ûût u
userId
ûûv |
,
ûû| }

servicioIdûû~ à
)ûûà â
;ûûâ ä
await
†† 

Repository
†† 
.
†† 
UpdateAsync
†† (
(
††( )
admnistrativeUnit
††) :
,
††: ;
autoSave
††< D
:
††D E
true
††F J
)
††J K
;
††K L
}
°° 	
	protected
©© 
virtual
©© 

IQueryable
©© $
<
©©$ %
TEntity
©©% ,
>
©©, - 
ApplySortingCustom
©©. @
<
©©@ A
TEntity
©©A H
>
©©H I
(
©©I J

IQueryable
©©J T
<
©©T U
TEntity
©©U \
>
©©\ ]
query
©©^ c
,
©©c d-
PagedAndSortedResultRequestDto©©e É
input©©Ñ â
)©©â ä
{
™™ 	
if
¨¨ 
(
¨¨ 
input
¨¨ 
is
¨¨ "
ISortedResultRequest
¨¨ -
	sortInput
¨¨. 7
)
¨¨7 8
{
≠≠ 
if
ÆÆ 
(
ÆÆ 
!
ÆÆ 
	sortInput
ÆÆ 
.
ÆÆ 
Sorting
ÆÆ &
.
ÆÆ& ' 
IsNullOrWhiteSpace
ÆÆ' 9
(
ÆÆ9 :
)
ÆÆ: ;
)
ÆÆ; <
{
ØØ 
return
∞∞ 
query
∞∞  
.
∞∞  !
OrderBy
∞∞! (
(
∞∞( )
	sortInput
∞∞) 2
.
∞∞2 3
Sorting
∞∞3 :
)
∞∞: ;
;
∞∞; <
}
±± 
}
≤≤ 
if
µµ 
(
µµ 
input
µµ 
is
µµ #
ILimitedResultRequest
µµ .
)
µµ. /
{
∂∂ 
return
∑∑ '
ApplyDefaultSortingCustom
∑∑ 0
(
∑∑0 1
query
∑∑1 6
)
∑∑6 7
;
∑∑7 8
}
∏∏ 
return
ªª 
query
ªª 
;
ªª 
}
ºº 	
	protected
ææ 
virtual
ææ 

IQueryable
ææ $
<
ææ$ %
TEntity
ææ% ,
>
ææ, -'
ApplyDefaultSortingCustom
ææ. G
<
ææG H
TEntity
ææH O
>
ææO P
(
ææP Q

IQueryable
ææQ [
<
ææ[ \
TEntity
ææ\ c
>
ææc d
query
ææe j
)
ææj k
{
øø 	
if
¿¿ 
(
¿¿ 
typeof
¿¿ 
(
¿¿ 
TEntity
¿¿ 
)
¿¿ 
.
¿¿  
IsAssignableTo
¿¿  .
<
¿¿. /
IHasCreationTime
¿¿/ ?
>
¿¿? @
(
¿¿@ A
)
¿¿A B
)
¿¿B C
{
¡¡ 
return
¬¬ 
query
¬¬ 
.
¬¬ 
OrderByDescending
¬¬ .
(
¬¬. /
e
¬¬/ 0
=>
¬¬1 3
(
¬¬4 5
(
¬¬5 6
IHasCreationTime
¬¬6 F
)
¬¬F G
e
¬¬G H
)
¬¬H I
.
¬¬I J
CreationTime
¬¬J V
)
¬¬V W
;
¬¬W X
}
√√ 
throw
«« 
new
«« 
AbpException
«« "
(
««" #
$str««# À
)««À Ã
;««Ã Õ
}
»» 	
	protected
   
virtual
   

IQueryable
   $
<
  $ %
TEntity
  % ,
>
  , -
ApplyPagingCustom
  . ?
<
  ? @
TEntity
  @ G
>
  G H
(
  H I

IQueryable
  I S
<
  S T
TEntity
  T [
>
  [ \
query
  ] b
,
  b c-
PagedAndSortedResultRequestDto  d Ç
input  É à
)  à â
{
ÀÀ 	
if
ÕÕ 
(
ÕÕ 
input
ÕÕ 
is
ÕÕ !
IPagedResultRequest
ÕÕ ,

pagedInput
ÕÕ- 7
)
ÕÕ7 8
{
ŒŒ 
return
œœ 
query
œœ 
.
œœ 
PageBy
œœ #
(
œœ# $

pagedInput
œœ$ .
)
œœ. /
;
œœ/ 0
}
–– 
if
”” 
(
”” 
input
”” 
is
”” #
ILimitedResultRequest
”” .
limitedInput
””/ ;
)
””; <
{
‘‘ 
return
’’ 
query
’’ 
.
’’ 
Take
’’ !
(
’’! "
limitedInput
’’" .
.
’’. /
MaxResultCount
’’/ =
)
’’= >
;
’’> ?
}
÷÷ 
return
ŸŸ 
query
ŸŸ 
;
ŸŸ 
}
⁄⁄ 	
private
ﬂﬂ 
void
ﬂﬂ !
AddDataGeographical
ﬂﬂ (
(
ﬂﬂ( )%
UnidadAdministrativaDto
ﬂﬂ) @
data
ﬂﬂA E
)
ﬂﬂE F
{
‡‡ 	!
AddDataGeographical
·· 
(
··  
new
··  #
List
··$ (
<
··( )%
UnidadAdministrativaDto
··) @
>
··@ A
{
··B C
data
··D H
}
··I J
)
··J K
;
··K L
}
„„ 	
private
ÂÂ 
void
ÂÂ !
AddDataGeographical
ÂÂ (
(
ÂÂ( )
List
ÂÂ) -
<
ÂÂ- .%
UnidadAdministrativaDto
ÂÂ. E
>
ÂÂE F
data
ÂÂG K
)
ÂÂK L
{
ÊÊ 	
foreach
ÁÁ 
(
ÁÁ 
var
ÁÁ 
item
ÁÁ 
in
ÁÁ  
data
ÁÁ! %
)
ÁÁ% &
{
ËË 
var
ÎÎ 
country
ÎÎ 
=
ÎÎ 
_countryData
ÎÎ *
.
ÎÎ* +

GetCountry
ÎÎ+ 5
(
ÎÎ5 6
item
ÎÎ6 :
.
ÎÎ: ;
PaisId
ÎÎ; A
)
ÎÎA B
;
ÎÎB C
if
ÏÏ 
(
ÏÏ 
country
ÏÏ 
!=
ÏÏ 
null
ÏÏ #
)
ÏÏ# $
{
ÌÌ 
item
ÔÔ 
.
ÔÔ 
Pais
ÔÔ 
=
ÔÔ 
country
ÔÔ  '
?
ÔÔ' (
.
ÔÔ( )
Name
ÔÔ) -
;
ÔÔ- .
var
ÚÚ 
region
ÚÚ 
=
ÚÚ  
_countryData
ÚÚ! -
.
ÚÚ- .$
GetRegionByCountryCode
ÚÚ. D
(
ÚÚD E
country
ÚÚE L
.
ÚÚL M
Code
ÚÚM Q
)
ÚÚQ R
.
ÚÚR S
SingleOrDefault
ÚÚS b
(
ÚÚb c
r
ÚÚc d
=>
ÚÚe g
r
ÚÚh i
.
ÚÚi j
Code
ÚÚj n
==
ÚÚo q
item
ÚÚr v
.
ÚÚv w
RegionId
ÚÚw 
)ÚÚ Ä
;ÚÚÄ Å
item
ÛÛ 
.
ÛÛ 
Region
ÛÛ 
=
ÛÛ  !
region
ÛÛ" (
?
ÛÛ( )
.
ÛÛ) *
Name
ÛÛ* .
;
ÛÛ. /
}
˜˜ 
}
¯¯ 
}
˘˘ 	
}
˝˝ 
}ÄÄ åP
ÅD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\UnidadAdministrativa\UnidadAdministrativaFuncional.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% & 
UnidadAdministrativa& :
{ 
public 

class )
UnidadAdministrativaFuncional .
:/ 0
ApplicationService1 C
,C D*
IUnidadAdministrativaFuncionalE c
{ 
public 
IRepository 
< +
UnidadAdministrativaFuncionario :
>: ;+
AdministrativeUnitFunctionaries< [
{\ ]
get^ a
;a b
}c d
public 
IRepository 
< 
Dominio "
." # 
UnidadAdministrativa# 7
,7 8
Guid9 =
>= >
AdministrativeUnits? R
{S T
getU X
;X Y
}Z [
public 
IStringLocalizer 
<  &
AdministrativeUnitResource  :
>: ;
	Localizer< E
{F G
getH K
;K L
}M N
public )
UnidadAdministrativaFuncional ,
(, -
IRepository 
< +
UnidadAdministrativaFuncionario 7
>7 8+
administrativeUnitFunctionaries9 X
,X Y
IRepository 
< 
Dominio 
.   
UnidadAdministrativa  4
,4 5
Guid6 :
>: ;
administrativeUnits< O
,O P
IStringLocalizer 
< &
AdministrativeUnitResource 7
>7 8
	localizer9 B
)B C
{ 	+
AdministrativeUnitFunctionaries +
=, -+
administrativeUnitFunctionaries. M
;M N
AdministrativeUnits 
=  !
administrativeUnits" 5
;5 6
	Localizer 
= 
	localizer !
;! "
}   	
[## 	
	Authorize##	 
(## )
AdministrativeUnitPermissions## 0
.##0 1
AdministrativeUnit##1 C
.##C D
Default##D K
)##K L
]##L M
public$$ 
async$$ 
Task$$ 
<$$ '
UnidadAdministrativaInfoDto$$ 5
>$$5 68
,ObtenerUnidadAdministrativaDelFuncionalAsync$$7 c
($$c d
Guid$$d h
	usuarioId$$i r
)$$r s
{%% 	
return&& 
await&& =
1ObtenerUnidadAdminsitrativaDelFuncionalPorIdAsync&& J
(&&J K
	usuarioId&&K T
)&&T U
;&&U V
}'' 	
[** 	
	Authorize**	 
(** )
AdministrativeUnitPermissions** 0
.**0 1
AdministrativeUnit**1 C
.**C D
Default**D K
)**K L
]**L M
public++ 
async++ 
Task++ 
<++ '
UnidadAdministrativaInfoDto++ 5
>++5 6>
2ObtenerUnidadAdministrativaDelFuncionalActualAsync++7 i
(++i j
)++j k
{,, 	
var.. 
	usuarioId.. 
=.. 
CurrentUser.. '
...' (
Id..( *
;..* +
if// 
(// 
	usuarioId// 
==// 
null// !
)//! "
{00 
return11 
null11 
;11 
}22 
return44 
await44 =
1ObtenerUnidadAdminsitrativaDelFuncionalPorIdAsync44 J
(44J K
	usuarioId44K T
.44T U
Value44U Z
)44Z [
;44[ \
}55 	
public77 
async77 
Task77 
<77 
PagedResultDto77 (
<77( )
FuncionarioInfoDto77) ;
>77; <
>77< =;
/ObtenerFuncionariosPorUnidadAdministrativaAsync77> m
(77m n
Guid77n r#
unidadAdministrativaId	77s â
)
77â ä
{88 	
var99 %
consultaUnidadFuncionario99 )
=99* +
await99, 1+
AdministrativeUnitFunctionaries992 Q
.99Q R
GetQueryableAsync99R c
(99c d
)99d e
;99e f%
consultaUnidadFuncionario:: %
=::& '%
consultaUnidadFuncionario::( A
.::A B
Where::B G
(::G H
x::H I
=>::J L
x::M N
.::N O"
UnidadAdministrativaId::O e
==::f h"
unidadAdministrativaId::i 
)	:: Ä
;
::Ä Å
var<< 

totalCount<< 
=<< 
await<< "
AsyncExecuter<<# 0
.<<0 1

CountAsync<<1 ;
(<<; <%
consultaUnidadFuncionario<<< U
)<<U V
;<<V W
var>> 
consultaDto>> 
=>> %
consultaUnidadFuncionario>> 7
.>>7 8
Select>>8 >
(>>> ?
entidad>>? F
=>>>G I
new>>J M
FuncionarioInfoDto>>N `
(>>` a
)>>a b
{?? 
	UsuarioId@@ 
=@@ 
entidad@@ #
.@@# $
	UsuarioId@@$ -
,@@- .
}AA 
)AA 
;AA 
varCC 
entidadDtosCC 
=CC 
awaitCC #
AsyncExecuterCC$ 1
.CC1 2
ToListAsyncCC2 =
(CC= >
consultaDtoCC> I
)CCI J
;CCJ K
returnEE 
newEE 
PagedResultDtoEE %
<EE% &
FuncionarioInfoDtoEE& 8
>EE8 9
(EE9 :

totalCountFF 
,FF 
entidadDtosGG 
)HH 
;HH 
}II 	
privateLL 
asyncLL 
TaskLL 
<LL '
UnidadAdministrativaInfoDtoLL 6
>LL6 7=
1ObtenerUnidadAdminsitrativaDelFuncionalPorIdAsyncLL8 i
(LLi j
GuidLLj n
	usuarioIdLLo x
)LLx y
{MM 	
varNN %
consultaUnidadFuncionalesNN )
=NN* +
awaitNN, 1+
AdministrativeUnitFunctionariesNN2 Q
.NNQ R
GetQueryableAsyncNNR c
(NNc d
)NNd e
;NNe f
varOO 
consultaUnidadOO 
=OO  
awaitOO! &
AdministrativeUnitsOO' :
.OO: ;
GetQueryableAsyncOO; L
(OOL M
)OOM N
;OON O
varQQ 
consultaQQ 
=QQ 
fromQQ 
unidadFuncionalQQ  /
inQQ0 2%
consultaUnidadFuncionalesQQ3 L
joinRR 
unidadRR  &
inRR' )
consultaUnidadRR* 8
onRR9 ;
unidadFuncionalRR< K
.RRK L"
UnidadAdministrativaIdRRL b
equalsRRc i
unidadRRj p
.RRp q
IdRRq s
whereSS  
unidadFuncionalSS! 0
.SS0 1
	UsuarioIdSS1 :
==SS; =
	usuarioIdSS> G
selectTT !
newTT" %'
UnidadAdministrativaInfoDtoTT& A
{UU 
IdVV !
=VV" #
unidadVV$ *
.VV* +
IdVV+ -
,VV- .
PaisIdWW %
=WW& '
unidadWW( .
.WW. /
PaisIdWW/ 5
,WW5 6
NombreXX %
=XX& '
unidadXX( .
.XX. /
NombreXX/ 5
,XX5 6
SiglasYY %
=YY& '
unidadYY( .
.YY. /
SiglasYY/ 5
,YY5 6
CodigoZZ %
=ZZ& '
unidadZZ( .
.ZZ. /
CodigoZZ/ 5
}[[ 
;[[ 
return]] 
await]] 
AsyncExecuter]] &
.]]& ' 
SingleOrDefaultAsync]]' ;
(]]; <
consulta]]< D
)]]D E
;]]E F
}^^ 	
public`` 
async`` 
Task`` 
<`` $
FuncionarioInfoExtendido`` 2
>``2 3/
#ObtenerFuncionarioPorUsuarioIdAsync``4 W
(``W X
Guid``X \
	usuarioId``] f
)``f g
{aa 	
varbb %
consultaUnidadFuncionalesbb )
=bb* +
awaitbb, 1+
AdministrativeUnitFunctionariesbb2 Q
.bbQ R
GetQueryableAsyncbbR c
(bbc d
)bbd e
;bbe f
varcc 
consultaUnidadcc 
=cc  
awaitcc! &
AdministrativeUnitscc' :
.cc: ;
GetQueryableAsynccc; L
(ccL M
)ccM N
;ccN O
varee 
consultaee 
=ee 
fromee 
unidadFuncionalee  /
inee0 2%
consultaUnidadFuncionalesee3 L
joinff 
unidadff  &
inff' )
consultaUnidadff* 8
onff9 ;
unidadFuncionalff< K
.ffK L"
UnidadAdministrativaIdffL b
equalsffc i
unidadffj p
.ffp q
Idffq s
wheregg  
unidadFuncionalgg! 0
.gg0 1
	UsuarioIdgg1 :
==gg; =
	usuarioIdgg> G
selecthh !
newhh" %$
FuncionarioInfoExtendidohh& >
{ii 
	UsuarioIdjj (
=jj) *
unidadFuncionaljj+ :
.jj: ;
	UsuarioIdjj; D
,jjD E
Cargokk $
=kk% &
unidadFuncionalkk' 6
.kk6 7
Cargokk7 <
.kk< =
Nombrekk= C
,kkC D
Ciudadll %
=ll& '
unidadll( .
.ll. /
Ciudadll/ 5
,ll5 6"
UnidadAdministrativaIdmm 5
=mm6 7
unidadmm8 >
.mm> ?
Idmm? A
,mmA B&
UnidadAdministrativaNombrenn 9
=nn: ;
unidadnn< B
.nnB C
NombrennC I
,nnI J&
UnidadAdministrativaPaisIdoo 9
=oo: ;
unidadoo< B
.ooB C
PaisIdooC I
,ooI J&
UnidadAdministrativaSiglaspp 9
=pp: ;
unidadpp< B
.ppB C
SiglasppC I
}qq 
;qq 
returnss 
awaitss 
AsyncExecuterss &
.ss& ' 
SingleOrDefaultAsyncss' ;
(ss; <
consultass< D
)ssD E
;ssE F
}tt 	
}uu 
}xx !
ÜD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\UnidadAdministrativa\UnidadAdministrativaTipoAppService.cs
	namespace		 	
Mre		
 
.		 
Sb		 
.		  
UnidadAdministrativa		 %
.		% & 
UnidadAdministrativa		& :
{

 
public 

class .
"UnidadAdministrativaTipoAppService 3
:4 5
CrudAppService 
< $
TipoUnidadAdministrativa  
,  !'
UnidadAdministrativaTipoDto #
,# $
string 
> 
, /
#IUnidadAdministrativaTipoAppService '
{ 
private 
readonly +
TipoUnidadAdministrativaManager 8(
administrativeUnitTpeManager9 U
;U V
public .
"UnidadAdministrativaTipoAppService 1
(1 2
IRepository2 =
<= >$
TipoUnidadAdministrativa> V
,V W
stringX ^
>^ _

repository` j
,j k+
TipoUnidadAdministrativaManager '(
administrativeUnitTpeManager( D
)D E
: 
base 
( 

repository 
) 
{ 	
this 
. (
administrativeUnitTpeManager -
=. /(
administrativeUnitTpeManager0 L
;L M
CreatePolicyName 
= )
AdministrativeUnitPermissions <
.< ="
AdministrativeUnitType= S
.S T
CreateT Z
;Z [
UpdatePolicyName 
= )
AdministrativeUnitPermissions <
.< ="
AdministrativeUnitType= S
.S T
UpdateT Z
;Z [
DeletePolicyName 
= )
AdministrativeUnitPermissions <
.< ="
AdministrativeUnitType= S
.S T
DeleteT Z
;Z [
}   	
public"" 
override"" 
async"" 
Task"" "
<""" #'
UnidadAdministrativaTipoDto""# >
>""> ?
CreateAsync""@ K
(""K L'
UnidadAdministrativaTipoDto""L g
input""h m
)""m n
{## 	
await$$ "
CheckCreatePolicyAsync$$ (
($$( )
)$$) *
;$$* +
await(( (
administrativeUnitTpeManager(( .
.((. /
ValidateCreateAsync((/ B
(((B C
input((C H
.((H I
Id((I K
)((K L
;((L M
var** 
entity** 
=** 
await** 
MapToEntityAsync** /
(**/ 0
input**0 5
)**5 6
;**6 7
TryToSetTenantId,, 
(,, 
entity,, #
),,# $
;,,$ %
await.. 

Repository.. 
... 
InsertAsync.. (
(..( )
entity..) /
,../ 0
autoSave..1 9
:..9 :
true..; ?
)..? @
;..@ A
return00 
await00 "
MapToGetOutputDtoAsync00 /
(00/ 0
entity000 6
)006 7
;007 8
}11 	
public33 
async33 
Task33 
<33 
ListResultDto33 '
<33' (+
UnidadAdministrativaTipoInfoDto33( G
>33G H
>33H I!
ObtenerListaInfoAsync33J _
(33_ `
)33` a
{44 	
await55 #
CheckGetListPolicyAsync55 )
(55) *
)55* +
;55+ ,
var77 
list77 
=77 
await77 

Repository77 '
.77' (
GetListAsync77( 4
(774 5
)775 6
;776 7
return99 
new99 
ListResultDto99 $
<99$ %+
UnidadAdministrativaTipoInfoDto99% D
>99D E
(99E F
ObjectMapper:: 
.:: 
Map::  
<::  !
List::! %
<::% &$
TipoUnidadAdministrativa::& >
>::> ?
,::? @
List::A E
<::E F+
UnidadAdministrativaTipoInfoDto::F e
>::e f
>::f g
(::g h
list::h l
)::l m
);; 
;;; 
}<< 	
}>> 
}@@ Ì

ûD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\UnidadAdministrativa\Validacion\CrearActualizarUnidadAdministrativaDtoValidator.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% & 
UnidadAdministrativa& :
{ 
public 

class ;
/CrearActualizarUnidadAdministrativaDtoValidator @
:A B
AbstractValidatorC T
<T U2
&CrearActualizarUnidadAdministrativaDtoU {
>{ |
{ 
public ;
/CrearActualizarUnidadAdministrativaDtoValidator >
(> ?
)? @
{ 	
RuleFor 
( 
x 
=> 
x 
. 
Jurisdiccion '
)' (
.( )
NotNull) 0
(0 1
)1 2
;2 3
RuleFor 
( 
x 
=> 
x 
. 
Jurisdiccion '
)' (
. 
Must 
( 
x 
=> 
x 
. 
Count  
>! "
$num# $
)$ %
.% &
WithMessage& 1
(1 2
$str2 ^
)^ _
;_ `
} 	
} 
} äq
nD:\MREGITHUB\UnidadAdministrativa\src\Mre.Sb.AdministrativeUnit.Application\Ventanilla\VentanillaAppService.cs
	namespace 	
Mre
 
. 
Sb 
.  
UnidadAdministrativa %
.% &

Ventanilla& 0
{ 
public 

class  
VentanillaAppService %
:& '
CrudAppService 
< 
Dominio 
. 

Ventanilla 
, 
VentanillaDto 
, 
Guid 
, !
GetVentanillaInputDto 
, (
CrearActualizarVentanillaDto $
>$ %
,% &!
IVentanillaAppService 
{ 
private 
readonly 
VentanillaManager *!
agentAttentionManager+ @
;@ A
public  
VentanillaAppService #
(# $
IRepository$ /
</ 0
Dominio0 7
.7 8

Ventanilla8 B
,B C
GuidD H
>H I

repositoryJ T
,T U
VentanillaManager !
agentAttentionManager /
)/ 0
: 
base 
( 

repository 
) 
{ 	
this 
. !
agentAttentionManager &
=' (!
agentAttentionManager) >
;> ?
CreatePolicyName"" 
="" )
AdministrativeUnitPermissions"" <
.""< =
AgentAttention""= K
.""K L
Create""L R
;""R S
UpdatePolicyName## 
=## )
AdministrativeUnitPermissions## <
.##< =
AgentAttention##= K
.##K L
Update##L R
;##R S
DeletePolicyName$$ 
=$$ )
AdministrativeUnitPermissions$$ <
.$$< =
AgentAttention$$= K
.$$K L
Delete$$L R
;$$R S
}%% 	
public'' 
override'' 
async'' 
Task'' "
<''" #
VentanillaDto''# 0
>''0 1
GetAsync''2 :
('': ;
Guid''; ?
id''@ B
)''B C
{(( 	
await)) 
CheckGetPolicyAsync)) %
())% &
)))& '
;))' (
var++ 
	queryable++ 
=++ 
await++ !

Repository++" ,
.++, -
GetQueryableAsync++- >
(++> ?
)++? @
;++@ A
	queryable,, 
=,, 
	queryable,, !
.,,! "
Where,," '
(,,' (
a,,( )
=>,,* ,
a,,- .
.,,. /
Id,,/ 1
==,,2 4
id,,5 7
),,7 8
;,,8 9
var.. 
queryableDto.. 
=.. 
	queryable.. (
...( )
Select..) /
(../ 0
entity..0 6
=>..7 9
new..: =
VentanillaDto..> K
(..K L
)..L M
{// 
Id00 
=00 
entity00 
.00 
Id00 
,00 
Name11 
=11 
entity11 
.11 
Nombre11 $
,11$ % 
AdministrativeUnitId22 $
=22% &
entity22' -
.22- ."
UnidadAdministrativaId22. D
,22D E!
IsPresentialAttention33 %
=33& '
entity33( .
.33. /
AtencionPresencial33/ A
,33A B
IsVirtualAttention44 "
=44# $
entity44% +
.44+ ,
AtencionVirtual44, ;
,44; <
AttentionStart55 
=55  
entity55! '
.55' (
InicioAtencion55( 6
,556 7
AttentionEnd66 
=66 
entity66 %
.66% &
FinAtencion66& 1
,661 2
IsActive77 
=77 
entity77 !
.77! "
Activo77" (
}88 
)88 
;88 
var:: 
	entityDto:: 
=:: 
await:: !
AsyncExecuter::" /
.::/ 0
FirstOrDefaultAsync::0 C
(::C D
queryableDto::D P
)::P Q
;::Q R
return<< 
	entityDto<< 
;<< 
}== 	
public?? 
override?? 
async?? 
Task?? "
<??" #
PagedResultDto??# 1
<??1 2
VentanillaDto??2 ?
>??? @
>??@ A
GetListAsync??B N
(??N O!
GetVentanillaInputDto??O d
input??e j
)??j k
{@@ 	
awaitBB #
CheckGetListPolicyAsyncBB )
(BB) *
)BB* +
;BB+ ,
varDD 
	queryableDD 
=DD 
awaitDD !$
CreateFilteredQueryAsyncDD" :
(DD: ;
inputDD; @
)DD@ A
;DDA B
	queryableFF 
=FF 
	queryableFF !
.FF! "
WhereIfFF" )
(FF) *
!GG 
inputGG 
.GG 
FilterGG !
.GG! "
IsNullOrWhiteSpaceGG" 4
(GG4 5
)GG5 6
,GG6 7
uHH 
=>HH 
uII 
.II 
NombreII  
.II  !
ContainsII! )
(II) *
inputII* /
.II/ 0
FilterII0 6
)II6 7
)JJ 
;JJ 
varLL 

totalCountLL 
=LL 
awaitLL "
AsyncExecuterLL# 0
.LL0 1

CountAsyncLL1 ;
(LL; <
	queryableLL< E
)LLE F
;LLF G
	queryableNN 
=NN 
ApplySortingNN $
(NN$ %
	queryableNN% .
,NN. /
inputNN0 5
)NN5 6
;NN6 7
	queryableOO 
=OO 
ApplyPagingOO #
(OO# $
	queryableOO$ -
,OO- .
inputOO/ 4
)OO4 5
;OO5 6
varQQ 
queryableDtoQQ 
=QQ 
	queryableQQ (
.QQ( )
SelectQQ) /
(QQ/ 0
entityQQ0 6
=>QQ7 9
newQQ: =
VentanillaDtoQQ> K
(QQK L
)QQL M
{RR 
IdSS 
=SS 
entitySS 
.SS 
IdSS 
,SS 
NameTT 
=TT 
entityTT 
.TT 
NombreTT $
,TT$ % 
AdministrativeUnitIdUU $
=UU% &
entityUU' -
.UU- ."
UnidadAdministrativaIdUU. D
,UUD E!
IsPresentialAttentionVV %
=VV& '
entityVV( .
.VV. /
AtencionPresencialVV/ A
,VVA B
IsVirtualAttentionWW "
=WW# $
entityWW% +
.WW+ ,
AtencionVirtualWW, ;
,WW; <
AttentionStartXX 
=XX  
entityXX! '
.XX' (
InicioAtencionXX( 6
,XX6 7
AttentionEndYY 
=YY 
entityYY %
.YY% &
FinAtencionYY& 1
,YY1 2
IsActiveZZ 
=ZZ 
entityZZ !
.ZZ! "
ActivoZZ" (
}[[ 
)[[ 
;[[ 
var]] 

entityDtos]] 
=]] 
await]] "
AsyncExecuter]]# 0
.]]0 1
ToListAsync]]1 <
(]]< =
queryableDto]]= I
)]]I J
;]]J K
return__ 
new__ 
PagedResultDto__ %
<__% &
VentanillaDto__& 3
>__3 4
(__4 5

totalCount`` 
,`` 

entityDtosaa 
)bb 
;bb 
}cc 	
publicee 
overrideee 
asyncee 
Taskee "
<ee" #
VentanillaDtoee# 0
>ee0 1
CreateAsyncee2 =
(ee= >(
CrearActualizarVentanillaDtoee> Z
inputee[ `
)ee` a
{ff 	
awaitgg "
CheckCreatePolicyAsyncgg (
(gg( )
)gg) *
;gg* +
varii 
entityii 
=ii 
awaitii !
agentAttentionManagerii 4
.ii4 5
CreateAsyncii5 @
(ii@ A
GuidGeneratoriiA N
.iiN O
CreateiiO U
(iiU V
)iiV W
,iiW X"
admiministrativeUnitIdjj &
:jj& '
inputjj( -
.jj- ."
UnidadAdministrativaIdjj. D
,jjD E
namekk 
:kk 
inputkk 
.kk 
Nombrekk "
,kk" #!
isPresentialAttentionll %
:ll% &
inputll' ,
.ll, -
AtencionPresencialll- ?
,ll? @
isVirtualAttentionmm "
:mm" #
inputmm$ )
.mm) *
AtencionVirtualmm* 9
,mm9 :
attentionStartnn 
:nn 
inputnn  %
.nn% &
InicioAtencionnn& 4
,nn4 5
attentionEndoo 
:oo 
inputoo #
.oo# $
FinAtencionoo$ /
,oo/ 0
isActivepp 
:pp 
inputpp 
.pp  
Activopp  &
)pp& '
;pp' (
TryToSetTenantIdrr 
(rr 
entityrr #
)rr# $
;rr$ %
awaittt 

Repositorytt 
.tt 
InsertAsynctt (
(tt( )
entitytt) /
,tt/ 0
autoSavett1 9
:tt9 :
truett; ?
)tt? @
;tt@ A
returnvv 
awaitvv 
GetAsyncvv !
(vv! "
entityvv" (
.vv( )
Idvv) +
)vv+ ,
;vv, -
}ww 	
publicyy 
overrideyy 
asyncyy 
Taskyy "
<yy" #
VentanillaDtoyy# 0
>yy0 1
UpdateAsyncyy2 =
(yy= >
Guidyy> B
idyyC E
,yyE F(
CrearActualizarVentanillaDtoyyG c
inputyyd i
)yyi j
{zz 	
await{{ "
CheckUpdatePolicyAsync{{ (
({{( )
){{) *
;{{* +
var}} 
entity}} 
=}} 
await}} 
GetEntityByIdAsync}} 1
(}}1 2
id}}2 4
)}}4 5
;}}5 6
if 
( 
! 
entity 
. 
Nombre 
. 
Equals %
(% &
input& +
.+ ,
Nombre, 2
,2 3
StringComparison4 D
.D E
OrdinalIgnoreCaseE V
)V W
)W X
{
ÄÄ 
await
ÇÇ #
agentAttentionManager
ÇÇ +
.
ÇÇ+ ,
ChangeNameAsync
ÇÇ, ;
(
ÇÇ; <
entity
ÇÇ< B
,
ÇÇB C
input
ÇÇD I
.
ÇÇI J
Nombre
ÇÇJ P
)
ÇÇP Q
;
ÇÇQ R
}
ÉÉ 
await
ÜÜ 
MapToEntityAsync
ÜÜ "
(
ÜÜ" #
input
ÜÜ# (
,
ÜÜ( )
entity
ÜÜ* 0
)
ÜÜ0 1
;
ÜÜ1 2
await
áá 

Repository
áá 
.
áá 
UpdateAsync
áá (
(
áá( )
entity
áá) /
,
áá/ 0
autoSave
áá1 9
:
áá9 :
true
áá; ?
)
áá? @
;
áá@ A
return
ââ 
await
ââ 
GetAsync
ââ !
(
ââ! "
entity
ââ" (
.
ââ( )
Id
ââ) +
)
ââ+ ,
;
ââ, -
}
ää 	
public
åå 
async
åå 
Task
åå 
<
åå 
PagedResultDto
åå (
<
åå( )
VentanillaDto
åå) 6
>
åå6 7
>
åå7 83
%ObtenerPorUnidadAdministrativaIdAsync
åå9 ^
(
åå^ _
Guid
åå_ c$
unidadAdministrativaId
ååd z
)
ååz {
{
çç 	
await
èè %
CheckGetListPolicyAsync
èè )
(
èè) *
)
èè* +
;
èè+ ,
var
ëë 
	queryable
ëë 
=
ëë 
await
ëë !

Repository
ëë" ,
.
ëë, -
GetQueryableAsync
ëë- >
(
ëë> ?
)
ëë? @
;
ëë@ A
	queryable
ìì 
=
ìì 
	queryable
ìì !
.
ìì! "
Where
ìì" '
(
ìì' (
x
ìì( )
=>
ìì* ,
x
ìì- .
.
ìì. /$
UnidadAdministrativaId
ìì/ E
==
ììF H$
unidadAdministrativaId
ììI _
)
ìì_ `
;
ìì` a
var
ïï 

totalCount
ïï 
=
ïï 
await
ïï "
AsyncExecuter
ïï# 0
.
ïï0 1

CountAsync
ïï1 ;
(
ïï; <
	queryable
ïï< E
)
ïïE F
;
ïïF G
var
óó 
queryableDto
óó 
=
óó 
	queryable
óó (
.
óó( )
Select
óó) /
(
óó/ 0
entity
óó0 6
=>
óó7 9
new
óó: =
VentanillaDto
óó> K
(
óóK L
)
óóL M
{
òò 
Id
ôô 
=
ôô 
entity
ôô 
.
ôô 
Id
ôô 
,
ôô 
Name
öö 
=
öö 
entity
öö 
.
öö 
Nombre
öö $
,
öö$ %"
AdministrativeUnitId
õõ $
=
õõ% &
entity
õõ' -
.
õõ- .$
UnidadAdministrativaId
õõ. D
,
õõD E#
IsPresentialAttention
úú %
=
úú& '
entity
úú( .
.
úú. / 
AtencionPresencial
úú/ A
,
úúA B 
IsVirtualAttention
ùù "
=
ùù# $
entity
ùù% +
.
ùù+ ,
AtencionVirtual
ùù, ;
,
ùù; <
AttentionStart
ûû 
=
ûû  
entity
ûû! '
.
ûû' (
InicioAtencion
ûû( 6
,
ûû6 7
AttentionEnd
üü 
=
üü 
entity
üü %
.
üü% &
FinAtencion
üü& 1
,
üü1 2
IsActive
†† 
=
†† 
entity
†† !
.
††! "
Activo
††" (
}
°° 
)
°° 
;
°° 
var
££ 

entityDtos
££ 
=
££ 
await
££ "
AsyncExecuter
££# 0
.
££0 1
ToListAsync
££1 <
(
££< =
queryableDto
££= I
)
££I J
;
££J K
return
•• 
new
•• 
PagedResultDto
•• %
<
••% &
VentanillaDto
••& 3
>
••3 4
(
••4 5

totalCount
¶¶ 
,
¶¶ 

entityDtos
ßß 
)
®® 
;
®® 
}
©© 	
}
™™ 
}¨¨ 